{"version":3,"sources":["node_modules/browser-pack/_prelude.js","js-dos-ts/js-dos-build.ts","js-dos-ts/js-dos-cache-db.ts","js-dos-ts/js-dos-cache-noop.ts","js-dos-ts/js-dos-cache.ts","js-dos-ts/js-dos-ci.ts","js-dos-ts/js-dos-conf.ts","js-dos-ts/js-dos-dom.ts","js-dos-ts/js-dos-fs.ts","js-dos-ts/js-dos-host.ts","js-dos-ts/js-dos-module.ts","js-dos-ts/js-dos-options.ts","js-dos-ts/js-dos-ui.ts","js-dos-ts/js-dos-xhr.ts","js-dos-ts/js-dos.ts","node_modules/assert/assert.js","node_modules/assert/node_modules/inherits/inherits_browser.js","node_modules/assert/node_modules/util/support/isBufferBrowser.js","node_modules/assert/node_modules/util/util.js","node_modules/process/browser.js","test/compare.ts","test/do.ts","test/test.ts"],"names":[],"mappings":"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ACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AC1eA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvBA;AACA;AACA;AACA;AACA;AACA;;;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AC1kBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;ACxLA,IAAA,SAAA,QAAA,QAAA,CAAA;AAEA,IAAA,OAAA,QAAA,MAAA,CAAA;AAEA;AACA;AACA;AAEA,SAAgB,cAAhB,CAA+B,QAA/B,EAAiD,EAAjD,EAA0E,IAA1E,EAA0F;AACtF,YAAQ,QAAR,EAAkB,EAAlB,EAAsB,UAAC,KAAD,EAAM;AACxB,eAAO,KAAP,CAAa,CAAb,EAAgB,KAAhB;AACA,WAAG,IAAH;AACA;AACH,KAJD;AAKH;AAND,QAAA,cAAA,GAAA,cAAA;AAQA,IAAM,UAAU,SAAV,OAAU,CAAC,QAAD,EAAmB,EAAnB,EAA4C,QAA5C,EAA6E;AACzF,SAAA,MAAA,CAAO,GAAG,UAAH,EAAP,EAAwB,UAAC,SAAD,EAAkB;AACtC,YAAM,MAAM,IAAI,KAAJ,EAAZ;AACA,YAAI,MAAJ,GAAa,YAAA;AACT,mBAAO,IAAI,KAAJ,KAAc,GAAG,KAAH,EAArB,EAAiC,oBAAoB,GAAG,KAAH,EAApB,GAAiC,cAAjC,GAAkD,IAAI,KAAvF;AACA,mBAAO,IAAI,MAAJ,KAAe,GAAG,MAAH,EAAtB,EAAmC,qBAAqB,GAAG,MAAH,EAArB,GAAmC,cAAnC,GAAoD,IAAI,MAA3F;AAEA,gBAAM,SAAS,SAAS,aAAT,CAAuB,QAAvB,CAAf;AACA,mBAAO,KAAP,GAAe,IAAI,KAAnB;AACA,mBAAO,MAAP,GAAgB,IAAI,MAApB;AACA,gBAAM,MAAM,OAAO,UAAP,CAAkB,IAAlB,CAAZ;AACA,gBAAI,SAAJ,CAAc,GAAd,EAAmB,CAAnB,EAAsB,CAAtB;AACA,gBAAM,WAAW,IAAI,YAAJ,CAAiB,CAAjB,EAAoB,CAApB,EAAuB,IAAI,KAA3B,EAAkC,IAAI,MAAtC,EAA8C,IAA/D;AAEA,gBAAM,cAAc,IAAI,KAAJ,EAApB;AACA,wBAAY,MAAZ,GAAqB,YAAA;AACjB;;;;;;;AAQA,oBAAM,eAAe,SAAS,aAAT,CAAuB,QAAvB,CAArB;AACA,6BAAa,KAAb,GAAqB,YAAY,KAAjC;AACA,6BAAa,MAAb,GAAsB,YAAY,MAAlC;AACA,oBAAM,YAAY,aAAa,UAAb,CAAwB,IAAxB,CAAlB;AACA,0BAAU,SAAV,CAAoB,WAApB,EAAiC,CAAjC,EAAoC,CAApC;AACA,oBAAM,SAAS,UAAU,YAAV,CAAuB,CAAvB,EAA0B,CAA1B,EAA6B,YAAY,KAAzC,EAAgD,YAAY,MAA5D,EAAoE,IAAnF;AAEA,oBAAI,QAAQ,CAAZ;AACA,oBAAM,QAAQ,IAAI,KAAlB;AACA,oBAAM,SAAS,IAAI,MAAnB;AACA,qBAAK,IAAI,IAAI,CAAb,EAAgB,IAAI,KAApB,EAA2B,GAA3B,EAAgC;AAC5B,yBAAK,IAAI,IAAI,CAAb,EAAgB,IAAI,MAApB,EAA4B,GAA5B,EAAiC;AAC7B,iCAAS,KAAK,GAAL,CAAS,SAAS,IAAI,KAAJ,GAAY,CAAZ,GAAgB,IAAI,CAApB,GAAwB,CAAjC,IAAsC,OAAO,IAAI,KAAJ,GAAY,CAAZ,GAAgB,IAAI,CAApB,GAAwB,CAA/B,CAA/C,CAAT;AACA,iCAAS,KAAK,GAAL,CAAS,SAAS,IAAI,KAAJ,GAAY,CAAZ,GAAgB,IAAI,CAApB,GAAwB,CAAjC,IAAsC,OAAO,IAAI,KAAJ,GAAY,CAAZ,GAAgB,IAAI,CAApB,GAAwB,CAA/B,CAA/C,CAAT;AACA,iCAAS,KAAK,GAAL,CAAS,SAAS,IAAI,KAAJ,GAAY,CAAZ,GAAgB,IAAI,CAApB,GAAwB,CAAjC,IAAsC,OAAO,IAAI,KAAJ,GAAY,CAAZ,GAAgB,IAAI,CAApB,GAAwB,CAA/B,CAA/C,CAAT;AACH;AACJ;AAED;AACA,oBAAM,QAAQ,KAAK,KAAL,CAAW,SAAS,IAAI,KAAJ,GAAY,IAAI,MAAhB,GAAyB,CAAlC,CAAX,CAAd;AACA,yBAAS,KAAT;AACH,aA9BD;AA+BA,wBAAY,GAAZ,GAAkB,SAAlB;AACH,SA5CD;AA6CA,YAAI,GAAJ,GAAU,QAAV;AACH,KAhDD;AAiDH,CAlDD;;;;;;AChBA,IAAA,SAAA,QAAA,QAAA,CAAA;AAIA;AACA;AACA;AACA;AACA;AAEA,SAAgB,MAAhB,CAA0B,OAA1B,EAA+C,EAA/C,EAAiE;AAC7D,YAAQ,IAAR,CAAa,UAAC,CAAD,EAAK;AACd,YAAM,QAAQ,SAAR,KAAQ,GAAA;AACV,eAAG,CAAH;AACH,SAFD;AAIA,mBAAW,KAAX,EAAkB,CAAlB;AACH,KAND;AAOH;AARD,QAAA,MAAA,GAAA,MAAA;AAUA,SAAgB,OAAhB,CAA2B,OAA3B,EAAgD,EAAhD,EAAuE;AACnE,YAAQ,KAAR,CAAc,UAAC,CAAD,EAAU;AACpB,YAAM,QAAQ,SAAR,KAAQ,GAAA;AACV,eAAG,CAAH;AACH,SAFD;AAIA,mBAAW,KAAX,EAAkB,CAAlB;AACH,KAND;AAOH;AARD,QAAA,OAAA,GAAA,OAAA;AAUA,SAAgB,MAAhB,CAA0B,OAA1B,EAA+C,EAA/C,EAAiE;AAC7D,WAAO,OAAP,EAAgB,EAAhB;AACA,YAAQ,OAAR,EAAiB,UAAC,GAAD,EAAY;AAAK,eAAA,OAAO,IAAP,CAAA,GAAA,CAAA;AAAgB,KAAlD;AACH;AAHD,QAAA,MAAA,GAAA,MAAA;AAKA,SAAgB,OAAhB,CAAwB,OAAxB,EAAkD,EAAlD,EAA0F;AACtF,WAAO,OAAP,EAAgB,UAAC,OAAD,EAAQ;AACpB,WAAG,QAAQ,EAAX,EAAe,QAAQ,IAAvB;AACH,KAFD;AAGA,YAAQ,OAAR,EAAiB,UAAC,GAAD,EAAY;AAAK,eAAA,OAAO,IAAP,CAAA,GAAA,CAAA;AAAgB,KAAlD;AACH;AALD,QAAA,OAAA,GAAA,OAAA;;;;ACnCA;AACA;;;AAEA,IAAA,SAAA,QAAA,QAAA,CAAA;AACA,IAAA,WAAA,QAAA,qBAAA,CAAA;AAGA,IAAA,sBAAA,QAAA,gCAAA,CAAA;AAEA,IAAA,gBAAA,QAAA,0BAAA,CAAA;AAGA,IAAA,YAAA,QAAA,WAAA,CAAA;AACA,IAAA,OAAA,QAAA,MAAA,CAAA;AAEA,IAAM,aAAsB,OAAe,UAA3C;AACA,MAAM,aAAN;AAEA,KAAK,uDAAL,EAA8D,UAAC,IAAD,EAAK;AAC/D,QAAM,WAAW,cAAA,IAAA,CAAK,aAAtB;AACA,kBAAA,IAAA,CAAK,aAAL,GAAqB,KAArB;AACA,kBAAA,IAAA,CAAK,aAAL,CAAmB,aAAnB,EAAkC,IAAI,oBAAA,OAAJ,EAAlC,EAAmD;AAC/C,iBAAS,iBAAC,OAAD,EAAgB;AACrB,0BAAA,IAAA,CAAK,aAAL,GAAqB,QAArB;AACA,mBAAO,KAAP,CAAa,uFAAb,EAAsG,OAAtG;AACA;AACH;AAL8C,KAAnD;AAOH,CAVD;AAYA,KAAK,gEAAL,EAAuE,UAAC,IAAD,EAAK;AACxE,kBAAA,IAAA,CAAK,aAAL,CAAmB,aAAnB,EAAkC,IAAI,oBAAA,OAAJ,EAAlC,EAAmD;AAC/C,iBAAS,iBAAC,OAAD,EAAgB;AACrB,mBAAO,KAAP,CAAa,oFAAb,EAAmG,OAAnG;AACA;AACH;AAJ8C,KAAnD;AAMH,CAPD;AASA,KAAK,mDAAL,EAA0D,UAAC,IAAD,EAAK;AAC3D,QAAI,QAAQ,KAAZ;AACA,QAAI,QAAQ,KAAZ;AACA,QAAA,YAAA,aAAA,YAAA;AAAA,iBAAA,SAAA,GAAA,CAcC;AAbU,kBAAA,SAAA,CAAA,GAAA,GAAP,UAAW,GAAX,EAAwB,IAAxB,EAAmC,OAAnC,EAAsD;AAClD,oBAAQ,SAAU,QAAQ,WAAW,OAAX,CAAmB,KAAnB,EAA0B,UAA1B,CAAR,IAAiD,gBAAgB,WAAjE,IAAiF,KAAqB,UAArB,GAAkC,CAArI;AACA;AACH,SAHM;AAKA,kBAAA,SAAA,CAAA,GAAA,GAAP,UAAW,GAAX,EAAwB,MAAxB,EAAqD,OAArD,EAAmF;AAC/E,oBAAQ,SAAS,QAAQ,WAAW,OAAX,CAAmB,KAAnB,EAA0B,UAA1B,CAAzB;AACA,oBAAQ,cAAR;AACH,SAHM;AAKA,kBAAA,SAAA,CAAA,OAAA,GAAP,UAAe,IAAf,EAAwD,KAAxD,EAAyE;AACrE;AACH,SAFM;AAGX,eAAA,SAAA;AAAC,KAdD,EAAA;AAgBA,QAAI,aAAa,CAAC,CAAlB;AACA,kBAAA,IAAA,CAAK,aAAL,CAAmB,UAAnB,EAA+B,IAAI,SAAJ,EAA/B,EAAgD;AAC5C,oBAAY,oBAAC,KAAD,EAAgB,KAAhB,EAA+B,MAA/B,EAA6C;AACrD,oBAAQ,GAAR,CAAY,KAAZ,EAAmB,KAAnB,EAA0B,MAA1B;AACA,mBAAO,KAAP,CAAa,IAAb,EAAmB,UAAU,KAA7B,EAAoC,iBAAiB,MAAjB,GAA0B,IAA1B,GAAiC,KAArE;AACA,mBAAO,KAAP,CAAa,IAAb,EAAmB,cAAc,MAAjC,EAAyC,kBAAkB,UAAlB,GAA+B,IAA/B,GAAsC,MAA/E;AACA,yBAAa,MAAb;AACH,SAN2C;AAO5C,kBAAU,kBAAC,MAAD,EAAc,eAAd,EAAkC;AACxC,mBAAO,EAAP,CAAU,KAAV;AACA,mBAAO,EAAP,CAAU,KAAV;AACA;AACH,SAX2C;AAY5C,iBAAS,iBAAC,OAAD,EAAgB;AACrB,mBAAO,IAAP;AACH;AAd2C,KAAhD;AAgBH,CApCD;AAsCA,KAAK,wCAAL,EAA+C,UAAC,IAAD,EAAK;AAChD,kBAAA,IAAA,CAAK,aAAL,CAAmB,UAAnB,EAA+B,IAAI,oBAAA,OAAJ,EAA/B,EAAgD;AAC5C,oBAAY,oBAAC,KAAD,EAAgB,KAAhB,EAA+B,MAA/B,EAA6C;AACrD,mBAAO,IAAP;AACH,SAH2C;AAI5C,kBAAU,kBAAC,MAAD,EAAc,eAAd,EAAkC;AACxC;AACH,SAN2C;AAO5C,iBAAS,iBAAC,OAAD,EAAgB;AACrB,mBAAO,IAAP;AACH;AAT2C,KAAhD;AAWH,CAZD;AAcA,KAAK,iDAAL,EAAwD,UAAC,IAAD,EAAK;AACzD,kBAAA,IAAA,CAAK,aAAL,CAAmB,UAAnB,EAA+B,IAAI,oBAAA,OAAJ,EAA/B,EAAgD;AAC5C,kBAAU,kBAAC,MAAD,EAAc,eAAd,EAAkC;AACxC,mBAAO,EAAP,CAAU,MAAV;AACA;AACH,SAJ2C;AAK5C,iBAAS,iBAAC,OAAD,EAAgB;AACrB,mBAAO,IAAP;AACH;AAP2C,KAAhD;AASH,CAVD;AAYA,MAAM,QAAN;AAEA,KAAK,oDAAL,EAA2D,UAAC,IAAD,EAAK;AAC5D,aAAA,OAAA,CAAI,IAAJ,EAAU;AACN,oBAAU,UADJ;AAEN,iBAAS,iBAAC,OAAD,EAAgB;AACrB,mBAAO,KAAP,CAAa,wCAAb,EAAuD,OAAvD;AACA;AACH;AALK,KAAV;AAOH,CARD;AAUA,KAAK,mDAAL,EAA0D,UAAC,IAAD,EAAK;AAC3D,QAAM,MAAM,SAAA,OAAA,CAAI,IAAJ,EAAU;AAClB,oBAAU;AADQ,KAAV,CAAZ;AAGA,SAAA,OAAA,CAAQ,GAAR,EAAa,UAAC,OAAD,EAAQ;AACjB,eAAO,KAAP,CAAa,wCAAb,EAAuD,OAAvD;AACA;AACH,KAHD;AAIA,SAAA,MAAA,CAAO,GAAP,EAAY,YAAA;AACR,eAAO,IAAP;AACH,KAFD;AAGH,CAXD;AAaA,KAAK,iDAAL,EAAwD,UAAC,IAAD,EAAK;AACzD,QAAM,MAAM,SAAA,OAAA,CAAI,IAAJ,EAAU;AAClB,oBAAU;AADQ,KAAV,CAAZ;AAGA,QAAM,UAAU,IAAI,KAAJ,CAAU,UAAC,EAAD,EAAK,IAAL,EAAS;AAC/B,YAAM,KAAK,SAAL,EAAK,GAAA;AAAM,mBAAA,OAAA,IAAA,EAAA;AAAa,SAA9B;AACA,mBAAW,EAAX,EAAe,CAAf;AACH,KAHe,CAAhB;AAIA,SAAA,OAAA,CAAQ,OAAR,EAAiB,UAAC,OAAD,EAAQ;AACrB,eAAO,KAAP,CAAa,wCAAb,EAAuD,OAAvD;AACA;AACH,KAHD;AAIH,CAZD;AAcA,KAAK,iCAAL,EAAwC,UAAC,IAAD,EAAK;AACzC,QAAM,MAAM,SAAA,OAAA,CAAI,SAAS,cAAT,CAAwB,QAAxB,CAAJ,EAA4D;AACpE,oBAAU;AAD0D,KAA5D,CAAZ;AAGA,SAAA,OAAA,CAAQ,GAAR,EAAa,UAAC,EAAD,EAAK,IAAL,EAAS;AAClB,aAAA,MAAA,CAAO,KAAK,EAAL,CAAP,EAAiB,UAAC,EAAD,EAAG;AAChB,eAAG,IAAH;AACA;AACH,SAHD;AAIH,KALD;AAMH,CAVD;AAYA,KAAK,sCAAL,EAA6C,UAAC,IAAD,EAAK;AAC9C,QAAM,MAAM,SAAA,OAAA,CAAI,SAAS,cAAT,CAAwB,QAAxB,CAAJ,EAA4D;AACpE,oBAAU;AAD0D,KAA5D,CAAZ;AAGA,SAAA,OAAA,CAAQ,GAAR,EAAa,UAAC,EAAD,EAAK,IAAL,EAAS;AAClB,aAAA,MAAA,CAAO,KAAK,EAAL,CAAP,EAAiB,UAAC,EAAD,EAAG;AAChB,sBAAA,cAAA,CAAe,UAAf,EAA2B,EAA3B,EAA+B,IAA/B;AACH,SAFD;AAGH,KAJD;AAKH,CATD;AAWA,MAAM,WAAN;AAEA,KAAK,qCAAL,EAA4C,UAAC,IAAD,EAAK;AAC7C,QAAM,MAAM,SAAA,OAAA,CAAI,SAAS,cAAT,CAAwB,QAAxB,CAAJ,EAA4D;AACpE,oBAAU,UAD0D;AAEpE,iBAAS,iBAAC,OAAD,EAAQ;AACb,mBAAO,KAAP,CAAa,OAAb,EAAsB,kDAAtB;AACA;AACH;AALmE,KAA5D,CAAZ;AAQA,SAAA,OAAA,CAAQ,GAAR,EAAa,UAAC,EAAD,EAAK,IAAL,EAAS;AAClB,WAAG,UAAH,CAAc,EAAd,EAAkB,EAAlB;AACH,KAFD;AAGH,CAZD;AAcA,KAAK,uCAAL,EAA8C,UAAC,IAAD,EAAK;AAC/C,QAAM,MAAM,SAAA,OAAA,CAAI,SAAS,cAAT,CAAwB,QAAxB,CAAJ,EAA4D;AACpE,oBAAU,UAD0D;AAEpE,iBAAS,iBAAC,OAAD,EAAQ;AACb,mBAAO,KAAP,CAAa,OAAb,EAAsB,wDAAtB;AACA;AACH;AALmE,KAA5D,CAAZ;AAQA,SAAA,OAAA,CAAQ,GAAR,EAAa,UAAC,EAAD,EAAK,IAAL,EAAS;AAClB,WAAG,UAAH,CAAc,QAAd,EAAwB,EAAxB;AACH,KAFD;AAGH,CAZD;AAcA,KAAK,2BAAL,EAAkC,UAAC,IAAD,EAAK;AACnC,QAAM,MAAM,SAAA,OAAA,CAAI,SAAS,cAAT,CAAwB,QAAxB,CAAJ,EAA4D;AACpE,oBAAU,UAD0D;AAEpE,iBAAS,iBAAC,OAAD,EAAQ;AACb,mBAAO,IAAP;AACH;AAJmE,KAA5D,CAAZ;AAOA,SAAA,OAAA,CAAQ,GAAR,EAAa,UAAC,EAAD,EAAK,IAAL,EAAS;AAClB,WAAG,UAAH,CAAc,YAAd,EAA4B,YAA5B;AACA,aAAA,MAAA,CAAO,MAAP,EAAe,UAAC,EAAD,EAAG;AACd,iBAAA,MAAA,CAAO,GAAG,KAAH,CAAS,iBAAT,CAAP,EAAoC,YAAA;AAChC,0BAAA,cAAA,CAAe,cAAf,EAA+B,EAA/B,EAAmC,IAAnC;AACH,aAFD;AAGH,SAJD;AAKH,KAPD;AAQH,CAhBD;AAkBA,KAAK,0CAAL,EAAiD,UAAC,IAAD,EAAK;AAClD,QAAM,MAAM,SAAA,OAAA,CAAI,SAAS,cAAT,CAAwB,QAAxB,CAAJ,EAA4D;AACpE,oBAAU,UAD0D;AAEpE,iBAAS,iBAAC,OAAD,EAAQ;AACb,mBAAO,IAAP;AACH;AAJmE,KAA5D,CAAZ;AAOA,SAAA,OAAA,CAAQ,GAAR,EAAa,UAAC,EAAD,EAAK,IAAL,EAAS;AAClB,WAAG,UAAH,CAAc,gBAAd,EAAgC,YAAhC;AACA,aAAA,MAAA,CAAO,MAAP,EAAe,UAAC,EAAD,EAAG;AACd,iBAAA,MAAA,CAAO,GAAG,KAAH,CAAS,iBAAT,CAAP,EAAoC,YAAA;AAChC,0BAAA,cAAA,CAAe,cAAf,EAA+B,EAA/B,EAAmC,IAAnC;AACH,aAFD;AAGH,SAJD;AAKH,KAPD;AAQH,CAhBD;AAkBA,KAAK,6BAAL,EAAoC,UAAC,IAAD,EAAK;AACrC,QAAM,UAAU,UAAU,cAAV,CAAyB,OAAzB,CAAhB;AAEA,YAAQ,OAAR,GAAkB,UAAC,KAAD,EAAM;AACpB,gBAAQ,KAAR,CAAc,KAAd;AACA,eAAO,IAAP;AACH,KAHD;AAKA,YAAQ,SAAR,GAAoB,UAAC,KAAD,EAAM;AACtB;AACH,KAFD;AAGH,CAXD;AAaA,KAAK,4DAAL,EAAmE,UAAC,IAAD,EAAK;AACpE,QAAI,eAAe,KAAnB;AACA,QAAM,MAAM,SAAA,OAAA,CAAI,SAAS,cAAT,CAAwB,QAAxB,CAAJ,EAA4D;AACpE,oBAAU,UAD0D;AAEpE,iBAAS,iBAAC,OAAD,EAAQ;AACb,mBAAO,IAAP;AACH,SAJmE;AAKpE,oBAAY,oBAAC,KAAD,EAAgB,KAAhB,EAA+B,MAA/B,EAA6C;AACrD,2BAAe,IAAf;AACH;AAPmE,KAA5D,CAAZ;AAUA,SAAA,OAAA,CAAQ,GAAR,EAAa,UAAC,EAAD,EAAK,IAAL,EAAS;AAClB,aAAA,MAAA,CAAO,GAAG,OAAH,CAAW,YAAX,EAAyB,OAAzB,CAAP,EAA0C,YAAA;AACtC,iBAAA,MAAA,CAAO,MAAP,EAAe,UAAC,EAAD,EAAG;AACd,qBAAA,MAAA,CAAO,GAAG,KAAH,CAAS,UAAT,CAAP,EAA6B,YAAA;AACzB,2BAAO,EAAP,CAAU,YAAV;AACA,8BAAA,cAAA,CAAe,qBAAf,EAAsC,EAAtC,EAA0C,IAA1C;AACH,iBAHD;AAIH,aALD;AAMH,SAPD;AAQH,KATD;AAUH,CAtBD;AAwBA,KAAK,+DAAL,EAAsE,UAAC,IAAD,EAAK;AACvE,QAAM,MAAM,SAAA,OAAA,CAAI,SAAS,cAAT,CAAwB,QAAxB,CAAJ,EAA4D;AACpE,oBAAU,UAD0D;AAEpE,iBAAS,iBAAC,OAAD,EAAQ;AACb,mBAAO,IAAP;AACH,SAJmE;AAKpE,oBAAY,oBAAC,KAAD,EAAgB,KAAhB,EAA+B,MAA/B,EAA6C;AACrD,mBAAO,IAAP;AACH;AAPmE,KAA5D,CAAZ;AAUA,SAAA,OAAA,CAAQ,GAAR,EAAa,UAAC,EAAD,EAAK,IAAL,EAAS;AAClB,aAAA,MAAA,CAAO,GAAG,OAAH,CAAW,YAAX,EAAyB,OAAzB,CAAP,EAA0C,YAAA;AACtC,iBAAA,MAAA,CAAO,MAAP,EAAe,UAAC,EAAD,EAAG;AACd,qBAAA,MAAA,CAAO,GAAG,KAAH,CAAS,UAAT,CAAP,EAA6B,YAAA;AACzB,8BAAA,cAAA,CAAe,qBAAf,EAAsC,EAAtC,EAA0C,IAA1C;AACH,iBAFD;AAGH,aAJD;AAKH,SAND;AAOH,KARD;AASH,CApBD;AAsBA,MAAM,QAAN;AAEA,KAAK,8CAAL,EAAqD,UAAC,IAAD,EAAK;AACtD,QAAM,MAAM,SAAA,OAAA,CAAI,SAAS,cAAT,CAAwB,QAAxB,CAAJ,EAA4D;AACpE,oBAAU,UAD0D;AAEpE,iBAAS,iBAAC,OAAD,EAAQ;AACb,mBAAO,IAAP;AACH;AAJmE,KAA5D,CAAZ;AAOA,SAAA,OAAA,CAAQ,GAAR,EAAa,UAAC,EAAD,EAAK,IAAL,EAAS;AAClB,WAAG,UAAH,CAAc,aAAd,EAA6B,qJAA7B;AAUA,aAAA,MAAA,CAAO,KAAK,CAAC,OAAD,EAAU,aAAV,CAAL,CAAP,EAAuC,UAAC,EAAD,EAAG;AACtC,sBAAA,cAAA,CAAe,gBAAf,EAAiC,EAAjC,EAAqC,IAArC;AACH,SAFD;AAGH,KAdD;AAeH,CAvBD;AAyBA,KAAK,wCAAL,EAA+C,UAAC,IAAD,EAAK;AAChD,QAAM,MAAM,SAAA,OAAA,CAAI,SAAS,cAAT,CAAwB,QAAxB,CAAJ,EAA4D;AACpE,oBAAU,UAD0D;AAEpE,iBAAS,iBAAC,OAAD,EAAQ;AACb,mBAAO,IAAP;AACH;AAJmE,KAA5D,CAAZ;AAOA,SAAA,OAAA,CAAQ,GAAR,EAAa,UAAC,EAAD,EAAK,IAAL,EAAS;AAClB,WAAG,UAAH,CAAc,aAAd,EAA6B,0GAA7B;AAMA,aAAA,MAAA,CAAO,KAAK,CAAC,OAAD,EAAU,aAAV,CAAL,CAAP,EAAuC,UAAC,EAAD,EAAG;AACtC,sBAAA,cAAA,CAAe,gBAAf,EAAiC,EAAjC,EAAqC,IAArC;AACH,SAFD;AAGH,KAVD;AAWH,CAnBD;AAqBA,KAAK,2BAAL,EAAkC,UAAC,IAAD,EAAK;AACnC,QAAM,MAAM,SAAA,OAAA,CAAI,SAAS,cAAT,CAAwB,QAAxB,CAAJ,EAA4D;AACpE,oBAAU;AAD0D,KAA5D,CAAZ;AAIA,SAAA,OAAA,CAAQ,GAAR,EAAa,UAAC,EAAD,EAAK,IAAL,EAAS;AAClB,aAAA,MAAA,CAAO,GAAG,OAAH,CAAW,YAAX,CAAP,EAAiC,YAAA;AAC7B,iBAAA,MAAA,CAAO,KAAK,CAAC,YAAD,CAAL,CAAP,EAA6B,UAAC,EAAD,EAAG;AAC5B,oBAAM,KAAK,SAAL,EAAK,GAAA;AACP,8BAAA,cAAA,CAAe,YAAf,EAA6B,EAA7B,EAAiC,IAAjC;AACA;AACH,iBAHD;AAKA,2BAAW,EAAX,EAAe,IAAf;AACH,aAPD;AAQH,SATD;AAUH,KAXD;AAYH,CAjBD;AAmBA,KAAK,gCAAL,EAAuC,UAAC,IAAD,EAAK;AACxC,QAAM,MAAM,SAAA,OAAA,CAAI,SAAS,cAAT,CAAwB,QAAxB,CAAJ,EAA4D;AACpE,oBAAU;AAD0D,KAA5D,CAAZ;AAIA,SAAA,OAAA,CAAQ,GAAR,EAAa,UAAC,EAAD,EAAK,IAAL,EAAS;AAClB,aAAA,MAAA,CAAO,GAAG,OAAH,CAAW,YAAX,CAAP,EAAiC,YAAA;AAC7B,iBAAA,MAAA,CAAO,KAAK,CAAC,YAAD,CAAL,CAAP,EAA6B,UAAC,EAAD,EAAG;AAC5B,mBAAG,gBAAH,CAAoB,EAApB,EAD4B,CACH;AACzB,oBAAM,KAAK,SAAL,EAAK,GAAA;AACP,8BAAA,cAAA,CAAe,gBAAf,EAAiC,EAAjC,EAAqC,IAArC;AACH,iBAFD;AAIA,2BAAW,EAAX,EAAe,IAAf;AACH,aAPD;AAQH,SATD;AAUH,KAXD;AAYH,CAjBD;AAmBA,IAAM,YAAY,SAAZ,SAAY,CAAC,EAAD,EAAwB;AACtC,OAAG,UAAH,GAAgB,IAAhB,CAAqB,UAAC,IAAD,EAAK;AACtB,YAAM,IAAI,OAAO,IAAP,CAAY,aAAZ,EAA2B,mBAA3B,CAAV;AACA,UAAE,QAAF,CAAW,KAAX,CAAiB,eAAe,IAAf,GAAsB,uBAAvC;AACH,KAHD;AAIH,CALD;AAOA,IAAM,eAAe,60CAArB","file":"test.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","// Autogenerated\n// -------------\n// gulpfile.js --> generateBuildInfo\n\nexport const Build = {\n    version: \"6.22.41 (223ebf2d1893cd5fc931149ada377642)\",\n    jsVersion: \"db6a5da9db93829c2265fc32fd61c38a84ff75d4\",\n    wasmJsSize:  199660,\n    wasmVersion: \"ab1e5dfd0a5aa35a0ba806d5e2c8b3eb\",\n    wasmSize: 1809135,\n    jsSize:  6352779,\n};\n","import { ICache } from \"./js-dos-cache\";\n\nexport default class CacheDb implements ICache {\n\n    public version: string;\n    private storeName: string = \"files\";\n    private indexedDB: IDBFactory;\n    private db: IDBDatabase | null = null;\n\n    constructor(version: string, onready: (cache: ICache) => void, onerror: (msg: string) => void) {\n        this.version = version;\n        this.indexedDB = window.indexedDB || (window as any).mozIndexedDB\n            || (window as any).webkitIndexedDB || (window as any).msIndexedDB;\n\n        if (!this.indexedDB) {\n            onerror(\"Indexed db is not supported on this host\");\n            return;\n        }\n\n        const openRequest = this.indexedDB.open(\"js-dos-cache (\" + version + \")\", 1);\n        openRequest.onerror = (event) => {\n            onerror(\"Can't open cache database\");\n        };\n        openRequest.onsuccess = (event) => {\n            this.db = openRequest.result;\n            onready(this);\n        };\n        openRequest.onupgradeneeded = (event) => {\n            try {\n                this.db = openRequest.result;\n                this.db.onerror = (event) => {\n                    onerror(\"Can't upgrade cache database\");\n                };\n\n                this.db.createObjectStore(this.storeName);\n            } catch (e) {\n                onerror(\"Can't upgrade cache database\");\n            }\n        };\n    }\n\n    public put(key: string, data: any, onflush: () => void) {\n        if (this.db === null) {\n            onflush();\n            return;\n        }\n\n        const transaction = this.db.transaction(this.storeName, \"readwrite\");\n        transaction.oncomplete = () => onflush();\n        transaction.objectStore(this.storeName).put(data, key);\n    }\n\n    public get(key: string, ondata: (data: any) => void, onerror: (msg: string) => void) {\n        if (this.db === null) {\n            onerror(\"db is not initalized\");\n            return;\n        }\n\n        const transaction = this.db.transaction(this.storeName, \"readonly\");\n        const request = transaction.objectStore(this.storeName).get(key);\n        request.onerror = () => onerror(\"Can't read value for key '\" + key + \"'\");\n        request.onsuccess = () => {\n            if (request.result) {\n                ondata(request.result);\n            } else {\n                onerror(\"Result is empty for key '\" + key + \"', result: \" + request.result);\n            }\n        };\n    }\n\n    public forEach(each: (key: string, value: any) => void, onend: () => void) {\n        if (this.db === null) {\n            onend();\n            return;\n        }\n\n        const transaction = this.db.transaction(this.storeName, \"readonly\");\n        const request = transaction.objectStore(this.storeName).openCursor();\n        request.onerror = () => onend();\n        request.onsuccess = (event) => {\n            const cursor = (event.target as any).result as IDBCursorWithValue;\n            if (cursor) {\n                each(cursor.key.toString(), cursor.value);\n                cursor.continue();\n            } else {\n                onend();\n            }\n        };\n    }\n}\n","import { ICache } from \"./js-dos-cache\";\n\nexport default class CacheNoop implements ICache {\n    public put(key: string, data: any, onflush: () => void) {\n        // nothing\n    }\n\n    public get(key: string, ondata: (data: any) => void, onerror: (msg: string) => void) {\n        onerror(\"Cache is not supported on this host\");\n    }\n\n    public forEach(each: (key: string, value: any) => void, onend: () => void) {\n        onend();\n    }\n}\n","import CacheDb from \"./js-dos-cache-db\";\nimport CacheNoop from \"./js-dos-cache-noop\";\nimport { DosModule } from \"./js-dos-module\";\n\nexport interface ICache {\n    put: (key: string, data: any, onflush: () => void) => void;\n    get: (key: string, ondata: (data: any) => void, onerror: (msg: string) => void) => void;\n    forEach: (each: (key: string, value: any) => void, onend: () => void) => void;\n}\n\nexport default function openCache(module: DosModule, onready: (cache: ICache) => void) {\n    new CacheDb(module.version, onready, (msg: string) => {\n        if (module.log !== undefined) {\n            module.log(\"ERR! Can't initalize cache, cause: \" + msg);\n        }\n        onready(new CacheNoop());\n    });\n}\n","// # DosCommandInterface\n// Is abstraction that allows you to control runned instance of js-dos\nimport { DosModule } from \"./js-dos-module\";\n\nexport class DosCommandInterface {\n    public dos: DosModule;\n    private em: any; // typeof Module;\n    private api: LowLevelApi;\n    private onready: (ci: DosCommandInterface) => void;\n\n    private shellInputQueue: string[] = [];\n    private shellInputClients: Array<() => void> = [];\n\n    constructor(dos: DosModule, onready: (ci: DosCommandInterface) => void) {\n        this.dos = dos;\n        this.em = (dos as any);\n        this.api = (dos as any);\n        this.api.ping = (msg: string, ...args: any[]) => {\n            this.onping(msg, args);\n        };\n        this.onready = onready;\n    }\n\n    // * `width()` - return dosbox window width in pixels\n    public width() {\n        return this.dos.canvas.width;\n    }\n\n    // * `height()` - return dosbox window height in pixels\n    public height() {\n        return this.dos.canvas.height;\n    }\n\n    // * `fullscreen()` - enters fullscreen mode\n    // This function can be called anywhere, but for web security reasons its associated request can only be raised\n    // inside the event handler for a user-generated event (for example a key, mouse or touch press/release).\n    public fullscreen() {\n        this.dos.canvas.requestFullscreen()\n    }\n\n    // * `shell([cmd1, cmd2, ...])` - executes passed commands\n    // in dosbox shell if it's runned, returns Promise that\n    // resolves when commands sequence is executed\n    public shell(...cmd: string[]) {\n        if (cmd.length === 0) {\n            return;\n        }\n\n        return new Promise((resolve, reject) => {\n            this.shellInputClients.push(resolve);\n            for (const next of cmd) {\n                this.shellInputQueue.push(next);\n            }\n            this.requestShellInput();\n        });\n    }\n\n    // * `screenshot()` - get screnshot of canvas as ImageData\n    public screenshot() {\n        return new Promise((resolve) => {\n            this.api.send(\"screenshot\", \"\", (data) => {\n                resolve(data);\n            });\n        });\n    }\n\n    // * `exit()` - immediately exit from runtime\n    public exit() {\n        try {\n            this.dos.terminate();\n            this.api.send(\"exit\");\n        } catch (e) {\n            return 0;\n        }\n\n        this.dos.error(\"Runtime is still alive!\");\n        return -1;\n    }\n\n    // * `simulateKeyEvent(keyCode, pressed)` - allows to simulate key press OR release on js-dos canvas\n    public simulateKeyEvent(keyCode: number, pressed: boolean): void {\n        const name = pressed ? \"keydown\" : \"keyup\";\n        const event = document.createEvent(\"KeyboardEvent\") as any;\n        const getter: any = {\n            get() {\n                return this.keyCodeVal;\n            },\n        };\n\n        // Chromium Hack\n        Object.defineProperty(event, \"keyCode\", getter);\n        Object.defineProperty(event, \"which\", getter);\n        Object.defineProperty(event, \"charCode\", getter);\n\n        event.initKeyboardEvent\n        ? event.initKeyboardEvent(name, true, true, document.defaultView, false, false, false, false, keyCode, keyCode)\n        : event.initKeyEvent(name, true, true, document.defaultView, false, false, false, false, keyCode, 0);\n\n        event.keyCodeVal = keyCode;\n        this.dos.canvas && this.dos.canvas.dispatchEvent(event);\n    }\n\n    // * `simulateKeyPress(keyCode)` - allows to simulate key press AND release on js-dos canvas\n    public simulateKeyPress(keyCode: number): void {\n        this.simulateKeyEvent(keyCode, true);\n        setTimeout(() => this.simulateKeyEvent(keyCode, false), 100);\n    }\n\n    private sendKeyPress(code: number) {\n        this.api.send(\"sdl_key_event\", code + \"\");\n    }\n\n    private requestShellInput() {\n        this.sendKeyPress(13);\n    }\n\n    private onping(msg: string, args: any[]) {\n        switch (msg) {\n            case \"ready\":\n                this.onready(this);\n                break;\n            case \"frame\":\n                this.onframe();\n                break;\n            case \"shell_input\":\n                if (this.shellInputQueue.length === 0) {\n                    return;\n                }\n\n                const buffer: number = args[0];\n                const maxLength: number = args[1];\n\n                const cmd = this.shellInputQueue.shift();\n                const cmdLength = this.em.lengthBytesUTF8(cmd) + 1;\n\n                if (cmdLength > maxLength) {\n                    if (this.dos.onerror !== undefined) {\n                        this.dos.onerror(\"Can't execute cmd '\" + cmd +\n                            \"', because it's bigger then max cmd length \" + maxLength);\n                    }\n                    return;\n                }\n\n                this.em.stringToUTF8(cmd, buffer, cmdLength);\n\n                if (this.shellInputQueue.length === 0) {\n                    for (const resolve of this.shellInputClients) {\n                        resolve();\n                    }\n                    this.shellInputClients = [];\n                } else {\n                    this.requestShellInput();\n                }\n            default:\n            /* do nothing */\n        }\n    }\n\n    private onframe() {\n        this.dos.tick();\n    }\n}\n\ninterface LowLevelApi {\n    send: (event: string, msg?: any, callback?: (msg: string) => void) => void;\n    ping: (msg: string) => void;\n}\n","import { DosBoxConfig, DosBoxConfigDefaults } from \"./js-dos-options\";\n\n// # js-dos default config\n// This is default config for dosbox that applies for all runs.\n\n// It's configurable through [options](https://js-dos.com/6.22/docs/api/generate.html?page=js-dos-options)\nexport default function getJsDosConfig(config: DosBoxConfig): string {\n    let conf = jsdosconf;\n    function update(placeholder: string) {\n        conf = conf.replace(\"%\" + placeholder + \"%\",\n            ((config as any)[placeholder] || (DosBoxConfigDefaults as any)[placeholder]) + \"\");\n    }\n    Object.keys(DosBoxConfigDefaults).forEach((name) => update(name));\n    return conf;\n}\n\n/* tslint:disable:max-line-length */\nconst jsdosconf = `\n# This is the configurationfile for DOSBox 0.74. (Please use the latest version of DOSBox)\n# Lines starting with a # are commentlines and are ignored by DOSBox.\n# They are used to (briefly) document the effect of each option.\n\n[sdl]\n#       fullscreen: Start dosbox directly in fullscreen. (Press ALT-Enter to go back)\n#       fulldouble: Use double buffering in fullscreen. It can reduce screen flickering, but it can also result in a slow DOSBox.\n#   fullresolution: What resolution to use for fullscreen: original or fixed size (e.g. 1024x768).\n#                     Using your monitor's native resolution with aspect=true might give the best results.\n#                     If you end up with small window on a large screen, try an output different from surface.\n# windowresolution: Scale the window to this size IF the output device supports hardware scaling.\n#                     (output=surface does not!)\n#           output: What video system to use for output.\n#                   Possible values: surface, overlay, opengl, openglnb.\n#         autolock: Mouse will automatically lock, if you click on the screen. (Press CTRL-F10 to unlock)\n#      sensitivity: Mouse sensitivity.\n#      waitonerror: Wait before closing the console if dosbox has an error.\n#         priority: Priority levels for dosbox. Second entry behind the comma is for when dosbox is not focused/minimized.\n#                     pause is only valid for the second entry.\n#                   Possible values: lowest, lower, normal, higher, highest, pause.\n#       mapperfile: File used to load/save the key/event mappings from. Resetmapper only works with the defaul value.\n#     usescancodes: Avoid usage of symkeys, might not work on all operating systems.\n\nfullscreen=false\nfulldouble=false\nfullresolution=original\nwindowresolution=original\noutput=surface\nautolock=%autolock%\nsensitivity=100\nwaitonerror=true\npriority=higher,normal\nmapperfile=mapper-jsdos.map\nusescancodes=true\nvsync=false\n\n[dosbox]\n# language: Select another language file.\n#  machine: The type of machine tries to emulate.\n#           Possible values: hercules, cga, tandy, pcjr, ega, vgaonly, svga_s3, svga_et3000, svga_et4000, svga_paradise, vesa_nolfb, vesa_oldvbe.\n# captures: Directory where things like wave, midi, screenshot get captured.\n#  memsize: Amount of memory DOSBox has in megabytes.\n#             This value is best left at its default to avoid problems with some games,\n#             though few games might require a higher value.\n#             There is generally no speed advantage when raising this value.\n\nlanguage=\nmachine=svga_s3\ncaptures=capture\nmemsize=16\n\n[render]\n# frameskip: How many frames DOSBox skips before drawing one.\n#    aspect: Do aspect correction, if your output method doesn't support scaling this can slow things down!.\n#    scaler: Scaler used to enlarge/enhance low resolution modes.\n#              If 'forced' is appended, then the scaler will be used even if the result might not be desired.\n#            Possible values: none, normal2x, normal3x, advmame2x, advmame3x, advinterp2x, advinterp3x, hq2x, hq3x, 2xsai, super2xsai, supereagle, tv2x, tv3x, rgb2x, rgb3x, scan2x, scan3x.\n\nframeskip=0\naspect=false\nscaler=none\n\n[cpu]\n#      core: CPU Core used in emulation. auto will switch to dynamic if available and appropriate.\n#            Possible values: auto, dynamic, normal, simple.\n#   cputype: CPU Type used in emulation. auto is the fastest choice.\n#            Possible values: auto, 386, 386_slow, 486_slow, pentium_slow, 386_prefetch.\n#    cycles: Amount of instructions DOSBox tries to emulate each millisecond.\n#            Setting this value too high results in sound dropouts and lags.\n#            Cycles can be set in 3 ways:\n#              'auto'          tries to guess what a game needs.\n#                              It usually works, but can fail for certain games.\n#              'fixed #number' will set a fixed amount of cycles. This is what you usually need if 'auto' fails.\n#                              (Example: fixed 4000).\n#              'max'           will allocate as much cycles as your computer is able to handle.\n#\n#            Possible values: auto, fixed, max.\n#   cycleup: Amount of cycles to decrease/increase with keycombo.(CTRL-F11/CTRL-F12)\n# cycledown: Setting it lower than 100 will be a percentage.\n\ncore=auto\ncputype=auto\ncycles=%cycles%\ncycleup=10\ncycledown=20\n\n[mixer]\n#   nosound: Enable silent mode, sound is still emulated though.\n#      rate: Mixer sample rate, setting any device's rate higher than this will probably lower their sound quality.\n#            Possible values: 44100, 48000, 32000, 22050, 16000, 11025, 8000, 49716.\n# blocksize: Mixer block size, larger blocks might help sound stuttering but sound will also be more lagged.\n#            Possible values: 1024, 2048, 4096, 8192, 512, 256.\n# prebuffer: How many milliseconds of data to keep on top of the blocksize.\n\nnosound=false\nrate=44100\nblocksize=1024\nprebuffer=20\n\n[midi]\n#     mpu401: Type of MPU-401 to emulate.\n#             Possible values: intelligent, uart, none.\n# mididevice: Device that will receive the MIDI data from MPU-401.\n#             Possible values: default, win32, alsa, oss, coreaudio, coremidi, none.\n# midiconfig: Special configuration options for the device driver. This is usually the id of the device you want to use.\n#               See the README/Manual for more details.\n\nmpu401=intelligent\nmididevice=default\nmidiconfig=\n\n[sblaster]\n#  sbtype: Type of Soundblaster to emulate. gb is Gameblaster.\n#          Possible values: sb1, sb2, sbpro1, sbpro2, sb16, gb, none.\n#  sbbase: The IO address of the soundblaster.\n#          Possible values: 220, 240, 260, 280, 2a0, 2c0, 2e0, 300.\n#     irq: The IRQ number of the soundblaster.\n#          Possible values: 7, 5, 3, 9, 10, 11, 12.\n#     dma: The DMA number of the soundblaster.\n#          Possible values: 1, 5, 0, 3, 6, 7.\n#    hdma: The High DMA number of the soundblaster.\n#          Possible values: 1, 5, 0, 3, 6, 7.\n# sbmixer: Allow the soundblaster mixer to modify the DOSBox mixer.\n# oplmode: Type of OPL emulation. On 'auto' the mode is determined by sblaster type. All OPL modes are Adlib-compatible, except for 'cms'.\n#          Possible values: auto, cms, opl2, dualopl2, opl3, none.\n#  oplemu: Provider for the OPL emulation. compat might provide better quality (see oplrate as well).\n#          Possible values: default, compat, fast.\n# oplrate: Sample rate of OPL music emulation. Use 49716 for highest quality (set the mixer rate accordingly).\n#          Possible values: 44100, 49716, 48000, 32000, 22050, 16000, 11025, 8000.\n\nsbtype=sb16\nsbbase=220\nirq=7\ndma=1\nhdma=5\nsbmixer=true\noplmode=auto\noplemu=default\noplrate=44100\n\n[gus]\n#      gus: Enable the Gravis Ultrasound emulation.\n#  gusrate: Sample rate of Ultrasound emulation.\n#           Possible values: 44100, 48000, 32000, 22050, 16000, 11025, 8000, 49716.\n#  gusbase: The IO base address of the Gravis Ultrasound.\n#           Possible values: 240, 220, 260, 280, 2a0, 2c0, 2e0, 300.\n#   gusirq: The IRQ number of the Gravis Ultrasound.\n#           Possible values: 5, 3, 7, 9, 10, 11, 12.\n#   gusdma: The DMA channel of the Gravis Ultrasound.\n#           Possible values: 3, 0, 1, 5, 6, 7.\n# ultradir: Path to Ultrasound directory. In this directory\n#           there should be a MIDI directory that contains\n#           the patch files for GUS playback. Patch sets used\n#           with Timidity should work fine.\n\ngus=false\ngusrate=44100\ngusbase=240\ngusirq=5\ngusdma=3\nultradir=C:\\ULTRASND\n\n[speaker]\n# pcspeaker: Enable PC-Speaker emulation.\n#    pcrate: Sample rate of the PC-Speaker sound generation.\n#            Possible values: 44100, 48000, 32000, 22050, 16000, 11025, 8000, 49716.\n#     tandy: Enable Tandy Sound System emulation. For 'auto', emulation is present only if machine is set to 'tandy'.\n#            Possible values: auto, on, off.\n# tandyrate: Sample rate of the Tandy 3-Voice generation.\n#            Possible values: 44100, 48000, 32000, 22050, 16000, 11025, 8000, 49716.\n#    disney: Enable Disney Sound Source emulation. (Covox Voice Master and Speech Thing compatible).\n\npcspeaker=true\npcrate=44100\ntandy=auto\ntandyrate=44100\ndisney=true\n\n[joystick]\n# joysticktype: Type of joystick to emulate: auto (default), none,\n#               2axis (supports two joysticks),\n#               4axis (supports one joystick, first joystick used),\n#               4axis_2 (supports one joystick, second joystick used),\n#               fcs (Thrustmaster), ch (CH Flightstick).\n#               none disables joystick emulation.\n#               auto chooses emulation depending on real joystick(s).\n#               (Remember to reset dosbox's mapperfile if you saved it earlier)\n#               Possible values: auto, 2axis, 4axis, 4axis_2, fcs, ch, none.\n#        timed: enable timed intervals for axis. Experiment with this option, if your joystick drifts (away).\n#     autofire: continuously fires as long as you keep the button pressed.\n#       swap34: swap the 3rd and the 4th axis. can be useful for certain joysticks.\n#   buttonwrap: enable button wrapping at the number of emulated buttons.\n\njoysticktype=auto\ntimed=true\nautofire=false\nswap34=false\nbuttonwrap=false\n\n[serial]\n# serial1: set type of device connected to com port.\n#          Can be disabled, dummy, modem, nullmodem, directserial.\n#          Additional parameters must be in the same line in the form of\n#          parameter:value. Parameter for all types is irq (optional).\n#          for directserial: realport (required), rxdelay (optional).\n#                           (realport:COM1 realport:ttyS0).\n#          for modem: listenport (optional).\n#          for nullmodem: server, rxdelay, txdelay, telnet, usedtr,\n#                         transparent, port, inhsocket (all optional).\n#          Example: serial1=modem listenport:5000\n#          Possible values: dummy, disabled, modem, nullmodem, directserial.\n# serial2: see serial1\n#          Possible values: dummy, disabled, modem, nullmodem, directserial.\n# serial3: see serial1\n#          Possible values: dummy, disabled, modem, nullmodem, directserial.\n# serial4: see serial1\n#          Possible values: dummy, disabled, modem, nullmodem, directserial.\n\nserial1=dummy\nserial2=dummy\nserial3=disabled\nserial4=disabled\n\n[dos]\n#            xms: Enable XMS support.\n#            ems: Enable EMS support.\n#            umb: Enable UMB support.\n# keyboardlayout: Language code of the keyboard layout (or none).\n\nxms=true\nems=true\numb=true\nkeyboardlayout=auto\n\n[ipx]\n# ipx: Enable ipx over UDP/IP emulation.\n\nipx=false\n\n[autoexec]\n# Lines in this section will be run at startup.\n# You can put your MOUNT lines here.\n\n# https://js-dos.com\n#     \n#          \n#         \n#     \n#    \n#       \n#      \n#     \n#     \n#       \n#    \n#      \n#           \n`;\n","// # DosDom\n// Simple API to work with DOM\n\n// ### applyCss - add new css style if no html element with id exists\nexport function applyCss(id: string, css: string) {\n    if (document.getElementById(id) === null) {\n        const style = document.createElement(\"style\") as HTMLStyleElement;\n        style.id = id;\n        style.innerHTML = css;\n        document.head.appendChild(style);\n    }\n}\n\n// ### createDiv - typesafe shortcut for creating HTMLDivElement\nexport function createDiv(className?: string): HTMLDivElement {\n    const el = document.createElement(\"div\") as HTMLDivElement;\n    if (className !== undefined) {\n        el.className = className;\n    }\n    return el;\n}\n","// # DosFS\n// API for working with file system of dosbox\n\nimport CacheNoop from \"./js-dos-cache-noop\";\nimport { DosModule } from \"./js-dos-module\";\nimport { Xhr } from \"./js-dos-xhr\";\n\nexport class DosFS {\n    private dos: DosModule;\n    private em: any; // typeof Module;\n    private fs: any;\n    private syncingPromise: Promise<void> | null = null;\n    private lastSyncTime = 0;\n\n    constructor(dos: DosModule) {\n        this.dos = dos;\n        this.em = dos as any;\n        this.fs = (dos as any).FS;\n\n        // Sync fs to indexed db periodically\n        this.dos.registerTickListener(() => {\n            if (Date.now() - this.lastSyncTime < 5000) {\n                return;\n            }\n            this.lastSyncTime = Date.now();\n            this.syncFs();\n        });\n        this.dos.registerPauseListener(() => this.syncFs());\n        this.dos.registerTerminateListener(() => this.syncFs());\n    }\n\n    public chdir(path: string) {\n        this.fs.chdir(path);\n    }\n\n    // ### extract\n    public extract(url: string, persistentMount: string = \"/\", type: string = \"zip\") {\n        // download archive by given url and then extract it in cwd (cwd will be mounted as C:)\n        //\n        // * `url` - url for downloading archive\n        // * `persistentMount` - is a path to mount archive contents, by default mount point is '/' which\n        // is a MEMFS that is live only in one ssesion. It means that after restart all progress will be erased.\n        // If you set some path (any), then this path will be stored across sessions in indexed db. It means\n        // that progress will be there after browser restart.\n        // * `type` - archive type **only zip is supported**\n        //\n        // this method will return `Promise<void>`, that will be resolved\n        // on success with empty object or rejected\n\n        persistentMount = this.normalizePath(persistentMount);\n\n        const parts = persistentMount.split(\"/\");\n        this.createPath(parts, 0, parts.length);\n        this.chdir(persistentMount);\n\n        const extractArchiveInCwd = () => {\n            return new Promise<void>((resolve, reject) => {\n                if (type !== \"zip\") {\n                    reject(\"Only ZIP archive is supported\");\n                    return;\n                }\n\n                new Xhr(url, {\n                    cache: new CacheNoop(),\n                    responseType: \"arraybuffer\",\n                    fail: (msg) => reject(msg),\n                    progress: (total, loaded) => {\n                        if (this.dos.onprogress !== undefined) {\n                            this.dos.onprogress(\"Downloading \" + url, total, loaded);\n                        }\n                    },\n                    success: (data: ArrayBuffer) => {\n                        const bytes = new Uint8Array(data);\n                        const buffer = this.em._malloc(bytes.length);\n                        this.em.HEAPU8.set(bytes, buffer);\n                        const retcode = this.em._extract_zip(buffer, bytes.length);\n                        this.em._free(buffer);\n\n                        if (retcode === 0) {\n                            this.writeOk(persistentMount);\n                            this.syncFs().then(resolve).catch(reject);\n                        } else {\n                            reject(\"Can't extract zip, retcode \" + retcode + \", see more info in logs\");\n                        }\n                    },\n                });\n            });\n        };\n\n        if (persistentMount === \"/\" || persistentMount.length === 0) {\n            return extractArchiveInCwd();\n        }\n\n        return new Promise<void>((resolve, reject) => {\n            if (this.lastSyncTime > 0) {\n                reject(\"Can't create persistent mount point, after syncing process starts\");\n                return;\n            }\n\n            this.fs.mount(this.fs.filesystems.IDBFS, {}, persistentMount);\n            this.fs.syncfs(true, (err: any) => {\n                if (err) {\n                    reject(\"Can't restore FS from indexed db, cause: \" + err);\n                    return;\n                }\n\n                if (!this.readOk(persistentMount)) {\n                    this.dos.warn(\"Indexed db contains broken FS, resetting...\");\n                    extractArchiveInCwd().then(resolve).catch(reject);\n                    return;\n                }\n\n                resolve();\n            });\n        });\n    }\n\n    // ### createFile\n    public createFile(file: string, body: ArrayBuffer | Uint8Array | string) {\n        // [synchronous] allow to create file in FS, you can pass absolute path.\n        // All directories will be created\n        //\n        // body can be string or ArrayBuffer or Uint8Array\n\n        if (body instanceof ArrayBuffer) {\n            body = new Uint8Array(body);\n        }\n\n        // windows style path are also valid, but **drive letter is ignored**\n        // if you pass only filename, then file will be writed in root \"/\" directory\n        file = file.replace(new RegExp(\"^[a-zA-z]+:\"), \"\") .replace(new RegExp(\"\\\\\\\\\", \"g\"), \"/\");\n        const parts = file.split(\"/\");\n\n        if (parts.length === 0) {\n            if (this.dos.onerror !== undefined) {\n                this.dos.onerror(\"Can't create file '\" + file + \"', because it's not valid file path\");\n            }\n            return;\n        }\n\n        const filename = parts[parts.length - 1].trim();\n\n        if (filename.length === 0) {\n            if (this.dos.onerror !== undefined) {\n                this.dos.onerror(\"Can't create file '\" + file + \"', because file name is empty\");\n            }\n            return;\n        }\n\n        /* i < parts.length - 1, because last part is file name */\n        const path = this.createPath(parts, 0, parts.length - 1);\n        this.fs.createDataFile(path, filename, body, true, true, true);\n    }\n\n    private createPath(parts: string[], begin: number, end: number) {\n        let path = \"\";\n        for (let i = begin; i < end; ++i) {\n            const part = parts[i].trim();\n            if (part.length === 0) {\n                continue;\n            }\n\n            this.fs.createPath(path, part, true, true);\n            path = path + \"/\" + part;\n        }\n\n        return path;\n    }\n\n    private syncFs() {\n        if (this.syncingPromise) {\n            return this.syncingPromise;\n        }\n\n        this.syncingPromise = new Promise<void>((resolve, reject) => {\n            const startedAt = Date.now();\n            this.fs.syncfs(false, (err: any) => {\n                if (err) {\n                    this.dos.error(\"Can't sync FS to indexed db, cause: \" + err);\n                    reject(err);\n                }\n                this.syncingPromise = null;\n                this.lastSyncTime = Date.now();\n                resolve();\n            });\n        });\n\n        return this.syncingPromise;\n    }\n\n    private normalizePath(path: string) {\n        if (path.length === 0 || path[0] !== \"/\") {\n            path = \"/\" + path;\n        }\n\n        if (path.length > 1 && path.endsWith(\"/\")) {\n            path = path.substr(0, path.length - 1);\n        }\n\n        return path;\n    }\n\n    private readOk(path: string) {\n        try {\n            const readed = this.fs.readFile(path + \"/state.fs\");\n            return readed[0] === 79 && readed[1] === 70;\n        } catch {\n            return false;\n        }\n    }\n\n    private writeOk(path: string) {\n        this.createFile(path + \"/state.fs\", new Uint8Array([79, 70])); // Ok\n    }\n\n}\n","// # DosHost\n// This class is used to detect and provide information about\n// features that supported in current environment\n\n/* tslint:disable:member-ordering */\nimport { Build } from \"./js-dos-build\";\nimport { ICache } from \"./js-dos-cache\";\nimport { DosModule } from \"./js-dos-module\";\nimport { Xhr } from \"./js-dos-xhr\";\n\nclass DosHost {\n\n    public wasmSupported = false;\n    public global = window as any;\n\n    private wdosboxPromise: Promise<any> | null = null;\n\n    constructor() {\n        this.global.exports = {};\n\n        // ### WebAssembly\n        // Host able to detect is WebAssembly supported or not,\n        // this information is stored in `Host.wasmSupported` variable\n        try {\n            if (typeof WebAssembly === \"object\" &&\n                typeof WebAssembly.instantiate === \"function\" &&\n                typeof WebAssembly.compile === \"function\") {\n\n                const wmodule = new WebAssembly.Module(Uint8Array.of(0x0, 0x61, 0x73, 0x6d, 0x01, 0x00, 0x00, 0x00));\n                if (wmodule instanceof WebAssembly.Module) {\n                    this.wasmSupported = new WebAssembly.Instance(wmodule) instanceof WebAssembly.Instance;\n                }\n            }\n        } catch (error) {\n            /* do nothing WebAssembly is not supported */\n        }\n\n        // ### polyfill\n        // Host also provides limited set of polyfills to support legacy browsers\n        this.polyfill();\n    }\n\n    // Currently polyfill contains implementations for:\n    // `Math.imul`, `Math.fround`, `Math.clz32`, `Math.trunc`\n    /* tslint:disable:no-bitwise */\n    /* tslint:disable:only-arrow-functions */\n    private polyfill() {\n        if (!Math.imul || Math.imul(0xffffffff, 5) !== -5) {\n            Math.imul = function imul(a: any, b: any) {\n                const ah = a >>> 16;\n                const al = a & 0xffff;\n                const bh = b >>> 16;\n                const bl = b & 0xffff;\n                return (al * bl + ((ah * bl + al * bh) << 16)) | 0;\n            };\n        }\n        Math.imul = Math.imul;\n\n        if (!Math.fround) {\n            Math.fround = function(x) { return x; };\n        }\n        Math.fround = Math.fround;\n\n        if (!Math.clz32) {\n            Math.clz32 = function(x) {\n                x = x >>> 0;\n                for (let i = 0; i < 32; i++) {\n                    if (x & (1 << (31 - i))) { return i; }\n                }\n                return 32;\n            };\n        }\n        Math.clz32 = Math.clz32;\n\n        if (!Math.trunc) {\n            Math.trunc = function(x) {\n                return x < 0 ? Math.ceil(x) : Math.floor(x);\n            };\n        }\n        Math.trunc = Math.trunc;\n    }\n\n    // ### resolveDosBox\n    // `resolveDosBox` is another important task of DosHost\n    public resolveDosBox(url: string, cache: ICache, module: DosModule) {\n        // When dosbox is resolved, WDOSBOX module is set to\n        // global variable `exports.WDOSBOX`. This variable is\n        // used to prevent next loads of same dosbox module.\n        if (this.global.exports.WDOSBOX) {\n            module.ondosbox(this.global.exports.WDOSBOX, this.global.exports.instantiateWasm);\n            return;\n        }\n\n        if (this.wdosboxPromise === null) {\n            this.wdosboxPromise = this.compileDosBox(url, cache, module);\n        }\n\n        this.wdosboxPromise.then((instance: any) => {\n            /* leave promise scope */\n            const fn = () => {\n                this.wdosboxPromise = null;\n                module.ondosbox(this.global.exports.WDOSBOX, this.global.exports.instantiateWasm);\n            };\n            setTimeout(fn, 1);\n        }, (message: string) => {\n            /* leave promise scope */\n            const fn = () => {\n                this.wdosboxPromise = null;\n                if (module.onerror !== undefined) {\n                    module.onerror(message);\n                }\n            };\n            setTimeout(fn, 1);\n        });\n    }\n\n    // If dosbox is not yet resolved, then:\n    private compileDosBox(url: string, cache: ICache, module: DosModule) {\n        const fromIndex = url.lastIndexOf(\"/\");\n        const wIndex = url.indexOf(\"w\", fromIndex);\n        const isWasmUrl = wIndex === fromIndex + 1 && wIndex >= 0;\n\n        if (this.wasmSupported && isWasmUrl) {\n            return this.compileWasmDosBox(url, cache, module);\n        } else {\n            if (module.log) {\n                module.log(\"[WARN] Using js version of dosbox, perfomance can be lower then expected\");\n                module.log(\"[DEBUG] Wasm supported: \" + this.wasmSupported + \", url: \" + url);\n            }\n\n            // fallback to js version if wasm not supported\n            if (isWasmUrl) {\n                url = url.substr(0, wIndex) + url.substr(wIndex + 1);\n            }\n            return this.compileJsDosBox(url, cache, module);\n        }\n    }\n\n    private compileJsDosBox(url: string, cache: ICache, module: DosModule): Promise<any> {\n        return new Promise((resolve, reject) => {\n            const buildTotal = Build.jsSize;\n            const memUrl = url.replace(\".js\", \".js.mem\");\n\n            // * Host download `dosbox`js + mem file\n            new Xhr(memUrl, {\n                cache,\n                responseType: \"arraybuffer\",\n                fail: (url: string, status: number, message: string) => {\n                    reject(\"Can't download mem file, code: \" + status +\n                        \", message: \" + message + \", url: \" + url);\n                },\n                success: (memResponse: any) => {\n                    new Xhr(url, {\n                        cache,\n                        progress: (total, loaded) => {\n                            if (module.onprogress) {\n                                module.onprogress(\"Resolving DosBox\", buildTotal,\n                                    Math.min(buildTotal, loaded));\n                            }\n                        },\n                        fail: (url: string, status: number, message: string) => {\n                            reject(\"Can't download wdosbox.js, code: \" + status +\n                                \", message: \" + message + \", url: \" + url);\n                        },\n                        success: (response: string) => {\n                            if (module.onprogress !== undefined) {\n                                module.onprogress(\"Resolving DosBox\", buildTotal, buildTotal);\n                            }\n\n                            response +=\n                            /* tslint:disable:no-eval */\n                                eval.call(this, response);\n                            /* tslint:enable:no-eval */\n\n                            const wdosbox = this.global.exports.WDOSBOX;\n                            this.global.exports.WDOSBOX = (Module: any) => {\n                                Module.memoryInitializerRequest = {\n                                    status: 200,\n                                    response: memResponse,\n                                };\n                                return new wdosbox(Module);\n                            };\n                            resolve(this.global.exports.WDOSBOX);\n                        },\n                    });\n\n                },\n            });\n        });\n    }\n\n    private compileWasmDosBox(url: string, cache: ICache, module: DosModule): Promise<any> {\n        return new Promise((resolve, reject) => {\n            const buildTotal = Build.wasmSize + Build.wasmJsSize;\n            const wasmUrl = url.replace(\".js\", \".wasm.js\");\n\n            // * Host downloads `wdosbox` asm + js scripts\n            new Xhr(wasmUrl, {\n                cache,\n                responseType: \"arraybuffer\",\n                progress: (total, loaded) => {\n                    if (module.onprogress) {\n                        module.onprogress(\"Resolving DosBox\", buildTotal, Math.min(Build.wasmSize, loaded));\n                    }\n                },\n                fail: (url: string, status: number, message: string) => {\n                    reject(\"Can't download wasm, code: \" + status +\n                        \", message: \" + message + \", url: \" + url);\n                },\n                success: (response: any) => {\n                    // * Compile dosbox wasm module\n                    const promise = WebAssembly.compile(response);\n                    const onreject = (reason: any) => {\n                        reject(reason + \"\");\n                    };\n                    promise.catch(onreject);\n                    promise.then((wasmModule) => {\n                        this.global.exports.instantiateWasm = (info: any, receiveInstance: any) => {\n                            info.env.globalscall = (...args: any[]) => {\n                                if (module.onglobals) {\n                                    module.onglobals.apply(null, args);\n                                }\n                            };\n                            // *  Instaniate it for each new dosbox runtime\n                            return WebAssembly.instantiate(wasmModule, info)\n                                .catch(onreject)\n                                .then((instance) => {\n                                    receiveInstance(instance, wasmModule);\n                                });\n                        };\n\n                        new Xhr(url, {\n                            cache,\n                            progress: (total, loaded) => {\n                                if (module.onprogress) {\n                                    module.onprogress(\"Resolving DosBox\", buildTotal,\n                                        Math.min(buildTotal, Build.wasmSize + loaded));\n                                }\n                            },\n                            fail: (url: string, status: number, message: string) => {\n                                reject(\"Can't download wdosbox.js, code: \" + status +\n                                    \", message: \" + message + \", url: \" + url);\n                            },\n                            success: (response: string) => {\n                                if (module.onprogress !== undefined) {\n                                    module.onprogress(\"Resolving DosBox\", buildTotal, buildTotal);\n                                }\n\n                                response +=\n                                /* tslint:disable:no-eval */\n                                eval.call(window, response);\n                                /* tslint:enable:no-eval */\n                                resolve(this.global.exports.WDOSBOX);\n                            },\n                        });\n                    });\n                },\n            });\n        });\n    }\n\n}\n\nexport const Host = new DosHost();\n","// # DosModule\n// DosModule is [emscripten module object](https://kripken.github.io/emscripten-site/docs/api_reference/module.html),\n// with additional functionality\nimport { DosRuntime } from \"./js-dos\";\nimport { Build } from \"./js-dos-build\";\nimport { DosCommandInterface } from \"./js-dos-ci\";\nimport getJsDosConfig from \"./js-dos-conf\";\nimport { DosFS } from \"./js-dos-fs\";\nimport { DosOptions } from \"./js-dos-options\";\nimport { DosUi } from \"./js-dos-ui\";\n\nexport class DosModule extends DosOptions {\n    public isValid: boolean = false;\n    public canvas: HTMLCanvasElement;\n    public version = Build.version;\n    public onglobals?: (...args: any[]) => void;\n\n    private ci: Promise<DosCommandInterface> | null = null;\n    private instance: any;\n    private fs: DosFS | null = null;\n    private ui: DosUi | null = null;\n    private onready: (runtime: DosRuntime) => void;\n\n    private tickListeners: Array< () => void > = [];\n    private pauseListeners: Array< () => void > = [];\n    private resumeListeners: Array< () => void > = [];\n    private terminateListeners: Array< () => void > = [];\n\n    constructor(canvas: HTMLCanvasElement, onready: (runtime: DosRuntime) => void) {\n        super();\n        this.canvas = canvas;\n        this.onready = onready;\n\n        this.registerDefaultListeners();\n    }\n\n    private registerDefaultListeners() {\n        let hidden: string;\n        let visibilityChange: string;\n\n        if (typeof document.hidden !== \"undefined\") {\n            hidden = \"hidden\";\n            visibilityChange = \"visibilitychange\";\n        } else if (typeof (document as any).mozHidden !== \"undefined\") {\n            hidden = \"mozHidden\";\n            visibilityChange = \"mozvisibilitychange\";\n        } else if (typeof (document as any).msHidden !== \"undefined\") {\n            hidden = \"msHidden\";\n            visibilityChange = \"msvisibilitychange\";\n        } else if (typeof (document as any).webkitHidden !== \"undefined\") {\n            hidden = \"webkitHidden\";\n            visibilityChange = \"webkitvisibilitychange\";\n        }\n\n        document.addEventListener(\"visibilityChange\", () => {\n            (document as any)[hidden] ? this.pause() : this.resume();\n        }, false);\n\n        window.addEventListener(\"beforeunload\", () => {\n           this.terminate();\n        });\n    }\n\n    // ### logging\n    // DosModule implements simply logging features:\n    // `debug`, `info`, `warn`, `error` methods\n    public debug(message: string) {\n        if (this.log !== undefined) {\n            this.log(\"[DEBUG] \" + message);\n        }\n    }\n\n    public info(message: string) {\n        if (this.log !== undefined) {\n            this.log(\"[INFO] \" + message);\n        }\n    }\n\n    public warn(message: string) {\n        if (this.log !== undefined) {\n            this.log(\"[WARN] \" + message);\n        }\n    }\n\n    public error(message: string) {\n        if (this.log !== undefined) {\n            this.log(\"[ERROR] \" + message);\n        }\n    }\n\n    // ### ondosbox\n    public ondosbox(dosbox: any, instantiateWasm: any) {\n        this.info(\"DosBox resolved\");\n        (this as any).instantiateWasm = instantiateWasm;\n        this.instance = new dosbox(this);\n    }\n\n    // Method `ondosbox` is called when\n    // [Host](https://js-dos.com/6.22/docs/api/generate.html?page=js-dos-host) is resolved.\n    // This method instaniate wasm dosbox module with `this` as emscripten\n    // module object. It means that emscripten will call\n    // `this.onRuntimeInitialized` when runtime will be ready\n\n    public resolve() {\n        if (!this.wdosboxUrl) {\n            this.wdosboxUrl = \"wdosbox.js\";\n        }\n\n        if (!this.log) {\n            /* tslint:disable:no-console */\n            this.log = (message: string) => console.log(message);\n        }\n\n        if (!this.canvas) {\n            if (this.onerror !== undefined) {\n                this.onerror(\"canvas field is required, but not set!\");\n            }\n            return;\n        }\n\n        if (!this.onprogress) {\n            this.ui = new DosUi(this);\n            this.onprogress = (stage, total, loaded) => {\n                if (this.ui !== null) {\n                    this.ui.onprogress(stage, total, loaded);\n                }\n            };\n        }\n\n        // ### sdl defaults\n        // DosModule overrides defaults for emscripten SDL wrapper\n        // for maximum performance\n        (this as any).SDL = {\n            defaults: {\n                widht: 320,\n                height: 200,\n                copyOnLock: false,\n                discardOnLock: true,\n                opaqueFrontBuffer: false,\n            },\n        };\n\n        this.isValid = true;\n    }\n\n    // ### onRuntimeInitialized\n    public onRuntimeInitialized() {\n        const mainFn = (args?: string[]) => {\n            // When emscripten runtime is initialized and main\n            // function is called:\n            //\n            // * DosModule detach [auto ui](https://js-dos.com/6.22/docs/api/generate.html?page=js-dos-ui)\n            if (this.ui !== null) {\n                this.ui.detach();\n                this.ui = null;\n            }\n\n            if (!args) {\n                args = [];\n            }\n\n            if (this.fs === null) {\n                return new Promise<DosCommandInterface>((resolve, reject) => {\n                    reject(\"IllegalState: fs is null\");\n                });\n            }\n\n            this.fs.chdir(\"/\");\n\n            // * Write default [dosbox.conf](https://js-dos.com/6.22/docs/api/generate.html?page=js-dos-conf)\n            // file to user directory\n            this.fs.createFile(\"/home/web_user/.dosbox/dosbox-jsdos.conf\", getJsDosConfig(this));\n            // * Mount emscripten FS as drive c:\n            args.unshift(\"-userconf\", \"-c\", \"mount c .\", \"-c\", \"c:\");\n            // * Run dosbox with passed arguments and resolve\n            // [DosCommandInterface](https://js-dos.com/6.22/docs/api/generate.html?page=js-dos-ci)\n            (this as any).callMain(args);\n            return new Promise<DosCommandInterface>((resolve) => {\n                new DosCommandInterface(this, (ci: DosCommandInterface) => {\n                    resolve(ci);\n                });\n            });\n        };\n        this.fs = new DosFS(this);\n        this.onready({\n            fs: this.fs,\n            main: mainFn,\n        });\n    }\n\n    // ### registerTickListener\n    // registred tick listener it will be called each frame\n    public registerTickListener(listener: () => void) {\n        this.tickListeners.push(listener);\n    }\n\n    // ### registerPauseListener\n    // registred tick listener it will be called each frame\n    public registerPauseListener(listener: () => void) {\n        this.pauseListeners.push(listener);\n    }\n\n    // ### registerResumeListener\n    // registred tick listener it will be called each frame\n    public registerResumeListener(listener: () => void) {\n        this.resumeListeners.push(listener);\n    }\n\n    // ### registerTerminateListener\n    // registred tick listener it will be called each frame\n    public registerTerminateListener(listener: () => void) {\n        this.terminateListeners.push(listener);\n    }\n\n    // ### tick\n    // tick is called internally each frame, no need to call\n    // it manually\n    public tick() {\n        for (const l of this.tickListeners) {\n            l();\n        }\n    }\n\n    // ### pause\n    // pause is called when dosbox tab became inactive\n    public pause() {\n        for (const l of this.pauseListeners) {\n            l();\n        }\n    }\n\n    // ### tick\n    // resume is called when dosbox tab became active\n    public resume() {\n        for (const l of this.resumeListeners) {\n            l();\n        }\n    }\n\n    // ### tick\n    // terminate is called when dosbox tab is closed\n    public terminate() {\n        for (const l of this.terminateListeners) {\n            l();\n        }\n    }\n\n}\n","// # DosOptions\n// Is a options object that you pass to constructor of\n// [Dos](https://js-dos.com/6.22/docs/api/generate.html?page=js-dos)\n// class, to configure emulation layer\n\nexport class DosBoxConfig {\n// ### cycles\n    public cycles?: number | string;\n//    Amount of instructions DOSBox tries to emulate each millisecond.\n//    Setting this value too high results in sound dropouts and lags.\n//\n//    Cycles can be set in 3 ways:\n//\n//    * `auto` - tries to guess what a game needs. It usually works, but can fail for certain games.\n//    * `fixed #number` - will set a fixed amount of cycles. This is what you \n// usually need if 'auto' fails. (Example: fixed 4000).\n//    * `max` - will allocate as much cycles as your computer is able to handle.\n//\n\n// ### autolock\n    public autolock?: boolean;\n//    Mouse will automatically lock, if you click on the screen. (Press CTRL-F10 to unlock)\n//\n//    By default dosbox mouse will follow browser cursor without locking.\n//    It means that js-dos will not take exclusive control over mouse pointer.\n//    However you can change this behaviour by providing `autolock=true` in\n//    `dosbox.conf` or throug h [DosOptions](https://js-dos.com/6.22/docs/api/generate.html?page=js-dos-options).\n//    Then js-dos will take exclusive control and lock mouse inside js-dos container (you can't leave it).\n//    This will happen after first click, and you can unlock mouse by pressing `CTRL+F10` or `ESC`.\n//\n}\n\n// tslint:disable-next-line:max-classes-per-file\nexport class DosOptions extends DosBoxConfig {\n\n    // ### onprogress\n    public onprogress?: (stage: string, total: number, loaded: number) => void;\n    // progress event listener, it is fired when loading progress is changed\n    // if this function is not set, then\n    // [auto ui](https://js-dos.com/6.22/docs/api/generate.html?page=js-dos-ui) will be used\n    // to show progress\n    //\n    // * `stage` - current loading stage\n    // * `total` - total bytes to download on current stage\n    // * `loaded` - downloaded bytes\n\n    // ### onerror\n    public onerror?: (message: string) => void;\n    // this function is called when error happens\n    //\n    // * `message` - infomation about error\n\n    // ### log\n    public log?: (message: string) => void;\n    // you can provide log function, to override logging, by default js-dos uses console.log as implementation\n\n    // ### wdosboxUrl\n    public wdosboxUrl?: string;\n    // you can set alternative url for downloading js-dos script, default is `wdosbox.js`.\n    // Additionaly you can change which variant of js-dos script to use:\n    //\n    // * `wdosbox.js` - default variant. This version compiled with latest emscripten and in theory should work best\n    // * `wdosbox-emterp.js` - This version compiled with legacy fastcomp backend, can be useful in rare cases\n    // (e.g. if you have problems with default version)\n    // * `wdosbox-nosync.js` - Fastest possible version, but limited. You can't run console programs/shell\n    // emulation using it\n    // * `dosbox.js` - same as wdosbox.js but compiled as javascript (not wasm)\n    // * `dosbox-emterp.js` - same as wdosbox-emterp.js but javascript (not wasm)\n    // * `dosbox-nosync.js` - same as wdosbox-nosync.js but javascript (not wasm)\n    //\n    // Take in account even if you use wasm version of dosbox it will be automatically fallbacked\n    // to javascript version if wasm can't start\n}\n\nexport const DosBoxConfigDefaults: DosBoxConfig = {\n    cycles: \"auto\",\n    autolock: false,\n};\n","// # JsDosUi\n// Optional ui module for js-dos.\n// This ui will be applied if client did not set `onprogress` in\n// [DosOptions](https://js-dos.com/6.22/docs/api/generate.html?page=js-dos-options)\nimport * as DosDom from \"./js-dos-dom\";\nimport { DosModule } from \"./js-dos-module\";\n\nconst maxStageLength = 32;\nexport class DosUi {\n    private canvas: HTMLCanvasElement;\n    private dos: DosModule;\n\n    private overlay: HTMLDivElement | null = null;\n    private loaderMessage: HTMLDivElement | null = null;\n    private hidden: boolean = true;\n\n    constructor(dos: DosModule) {\n        this.dos = dos;\n        this.canvas = dos.canvas;\n\n        // ### How it works\n        // This ui replace canvas element with div .dosbox-container,\n        // that contains original canvas and .dosbox-overlay as children\n        // You can change style of ui by editing css for this two classes\n\n        try {\n            DosDom.applyCss(\"js-dos-ui-css\", this.css);\n\n            if (this.canvas.parentElement !== null && this.canvas.parentElement.className !== \"dosbox-container\") {\n                const container = DosDom.createDiv(\"dosbox-container\");\n\n                const parent = this.canvas.parentElement;\n                parent.replaceChild(container, this.canvas);\n                container.appendChild(this.canvas);\n\n                const overlay = DosDom.createDiv(\"dosbox-overlay\");\n                container.appendChild(overlay);\n\n                overlay.innerHTML = this.overlayHtml;\n            }\n\n            const container = this.canvas.parentElement;\n            if (container === null) {\n                throw new Error(\"Illegal state, container is null\");\n            }\n            this.overlay = this.childById(container, \"dosbox-overlay\");\n            if (this.overlay === null) {\n                throw new Error(\"Illegal state, overlay is null\");\n            }\n            this.loaderMessage = this.childById(this.overlay, \"dosbox-loader-message\");\n\n            this.hidden = true;\n            this.show();\n        } catch (e) {\n            this.onprogress = this.onprogressFallback;\n        }\n    }\n\n    public onprogress(stage: string, total: number, loaded: number) {\n        if (stage.length > maxStageLength) {\n            stage = \"\" + stage.substr(-maxStageLength);\n        }\n\n        const message = stage + \" \" + Math.round(loaded * 100 / total * 10) / 10 + \"%\";\n        if (this.loaderMessage !== null) {\n            this.loaderMessage.innerHTML = message;\n        }\n        this.dos.info(message);\n\n        if (loaded >= total) {\n            this.hide();\n        } else {\n            this.show();\n        }\n    }\n\n    public detach() {\n        this.hide();\n        this.onprogress = this.onprogressFallback;\n    }\n\n    public hide() {\n        if (this.hidden) {\n            return;\n        }\n        this.hidden = true;\n        if (this.overlay !== null) {\n            this.overlay.setAttribute(\"style\", \"display: none\");\n        }\n    }\n\n    public show() {\n        if (!this.hidden) {\n            return;\n        }\n        this.hidden = false;\n        if (this.overlay !== null) {\n            this.overlay.setAttribute(\"style\", \"display: block\");\n        }\n    }\n\n    private onprogressFallback(stage: string, total: number, loaded: number) {\n        this.dos.info(stage + \" \" + loaded * 100 / total + \"%\");\n    }\n\n    private childById(parent: Element, className: string): HTMLDivElement | null {\n        if (parent === null) {\n            return null;\n        }\n\n        for (let i = 0; i < parent.childElementCount; ++i) {\n            let child: HTMLElement | null = parent.children[i] as HTMLElement;\n            if (child.className === className) {\n                return child as HTMLDivElement;\n            }\n\n            child = this.childById(child, className);\n            if (child !== null) {\n                return child as HTMLDivElement;\n            }\n        }\n\n        return null;\n    }\n\n    // ### Style\n    /* tslint:disable:member-ordering */\n    /* tslint:disable:max-line-length */\n    private css: string = `\n    .dosbox-container { position: relative; min-width: 320px; min-height: 200px; display: inline-block; }\n    .dosbox-overlay, .dosbox-loader { position: absolute; left: 0; right: 0; top: 0; bottom: 0; background-color: rgba(51, 51, 51, 0.7); }\n    .dosbox-start { text-align: center; position: absolute; left: 0; right: 0; bottom: 50%; color: #fff; font-size: 1.5em; text-decoration: underline; cursor: pointer; }\n    .dosbox-overlay a { color: #fff; }\n    .dosbox-powered { position: absolute; right: 1em; bottom: 1em; font-size: 0.8em; color: #9C9C9C; }\n    .dosbox-loader-message { text-align: center; position: absolute; left: 0; right: 0; bottom: 50%; margin: 0 0 -3em 0; box-sizing: border-box; color: #fff; font-size: 1.5em; }\n    @-moz-keyframes loading { 0% { left: 0; } 50% { left: 8.33333em; } 100% { left: 0; } } @-webkit-keyframes loading { 0% { left: 0; } 50% { left: 8.33333em; } 100% { left: 0; } } @keyframes loading { 0% { left: 0; } 50% { left: 8.33333em; } 100% { left: 0; } } .st-loader { width: 10em; height: 2.5em; position: absolute; top: 50%; left: 50%; margin: -1.25em 0 0 -5em; box-sizing: border-box; }\n    .st-loader:before, .st-loader:after { content: \"\"; display: block; position: absolute; top: 0; bottom: 0; width: 1.25em; box-sizing: border-box; border: 0.25em solid #fff; }\n    .st-loader:before { left: -0.76923em; border-right: 0; }\n    .st-loader:after { right: -0.76923em; border-left: 0; }\n    .st-loader .equal { display: block; position: absolute; top: 50%; margin-top: -0.5em; left: 4.16667em; height: 1em; width: 1.66667em; border: 0.25em solid #fff; box-sizing: border-box; border-width: 0.25em 0; -moz-animation: loading 1.5s infinite ease-in-out; -webkit-animation: loading 1.5s infinite ease-in-out; animation: loading 1.5s infinite ease-in-out; background: #fff; }\n    `;\n\n    // ### Template\n    /* tslint:disable:member-ordering */\n    /* tslint:disable:max-line-length */\n    private overlayHtml: string = `\n        <div class=\"dosbox-loader\">\n            <div class=\"st-loader\">\n                <span class=\"equal\"></span>\n            </div>\n            <div class=\"dosbox-loader-message\"></div>\n        </div>\n        <div class=\"dosbox-powered\">\n            Powered by &nbsp;<a href=\"https://js-dos.com\">js-dos.com</a> (6.22)\n        </div>\n    `;\n}\n","import { ICache } from \"./js-dos-cache\";\nimport CacheNoop from \"./js-dos-cache-noop\";\n\n// # Xhr\n// `Xhr` is small wrapper over XMLHttpRequest, that provides some\n// handy methods\n\n// You can configre Xhr with XhrOptions object:\ninterface XhrOptions {\n    cache: ICache;\n    method?: string;\n    success?: (response: any) => void;\n    progress?: (total: number, loaded: number) => void;\n    fail?: (url: string, status: number, message: string) => void;\n    data?: string;\n    responseType?: XMLHttpRequestResponseType;\n}\n// * `method` - \"GET\" | \"POST\"\n// * `success` - callback when resource is downloaded\n// * `progress` - callback for progress\n// * `fail` - fail callback\n// * `data` - data for POST request, should typeof `application/x-www-form-urlencoded`\n// * `responseType` - XMLHttpRequestResponseType\n\n// Class Xhr does not have any public methods\nexport class Xhr {\n    private cache: ICache;\n    private resource: string;\n    private options: XhrOptions;\n    private xhr: XMLHttpRequest | null = null;\n    private total: number = 0;\n    private loaded: number = 0;\n\n    constructor(url: string, options: XhrOptions) {\n        this.resource = url;\n        this.options = options;\n        this.options.method = options.method || \"GET\";\n        this.cache = options.cache || new CacheNoop();\n\n        if (this.options.method  === \"GET\") {\n            this.cache.get(this.resource, (data) => {\n                if (this.options.success !== undefined) {\n                    this.options.success(data);\n                }\n            }, () => {\n                this.makeHttpRequest();\n            });\n        }\n    }\n\n    private makeHttpRequest() {\n        this.xhr = new XMLHttpRequest();\n        this.xhr.open(this.options.method || \"GET\", this.resource, true);\n        if (this.options.method === \"POST\") {\n            this.xhr.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded\");\n        }\n        this.xhr.overrideMimeType(\"text/plain; charset=x-user-defined\");\n\n        let progressListner;\n        if (typeof (progressListner = this.xhr).addEventListener === \"function\") {\n            progressListner.addEventListener(\"progress\", (evt) => {\n                this.total = evt.total;\n                this.loaded = evt.loaded;\n                if (this.options.progress) {\n                    return this.options.progress(evt.total, evt.loaded);\n                }\n            });\n        }\n\n        let errorListener;\n        if (typeof (errorListener = this.xhr).addEventListener === \"function\") {\n            errorListener.addEventListener(\"error\", (evt) => {\n                if (this.options.fail) {\n                    this.options.fail(this.resource, (this.xhr as XMLHttpRequest).status, \"connection problem\");\n                    return delete this.options.fail;\n                }\n            });\n        }\n        this.xhr.onreadystatechange = () => {\n            return this.onReadyStateChange();\n        };\n        if (this.options.responseType) {\n            this.xhr.responseType = this.options.responseType;\n        }\n        this.xhr.send(this.options.data);\n    }\n\n    private onReadyStateChange() {\n        const xhr = (this.xhr as XMLHttpRequest);\n        if (xhr.readyState === 4) {\n            if (xhr.status === 200) {\n                if (this.options.success) {\n                    const total = Math.max(this.total, this.loaded);\n                    if (this.options.progress !== undefined) {\n                        this.options.progress(total, total);\n                    }\n\n                    if (this.options.method === \"GET\" && this.resource.indexOf(\"?\") < 0) {\n                        this.cache.put(this.resource, xhr.response, () => { /**/ });\n                    }\n\n                    return this.options.success(xhr.response);\n                }\n            } else if (this.options.fail) {\n                this.options.fail(this.resource, xhr.status, \"connection problem\");\n                return delete this.options.fail;\n            }\n        }\n    }\n\n}\n","\n// # Example\n// ```javascript\n// Dos(canvas).ready((fs, main) => {\n//     fs.extract(\"digger.zip\").then(() => {\n//         main([\"-c\", \"DIGGER.COM\"])\n//     });\n// });\n// ```\n// Dos function is entry point that provides emulation layer.\n// As emulation layer js-dos uses [DosBox ported to emscripten](https://github.com/dreamlayers/em-dosbox/#compiling).\n\n// # Dos\n\nimport openCache from \"./js-dos-cache\";\nimport { DosCommandInterface } from \"./js-dos-ci\";\nimport { DosFS } from \"./js-dos-fs\";\nimport { Host } from \"./js-dos-host\";\nimport { DosModule } from \"./js-dos-module\";\nimport { DosOptions } from \"./js-dos-options\";\n\n// When you call `Dos(canvas, options)` js-dos behind the scene will download\n// dosbox and prepare it to start. This function will return `Promise<DosReadyPromise>`\n// that will be resolved when dosbox is ready. In case of error promise\n// will be rejected.\n//\n// * `canvas`: HTMLCanvasElement - this canvas element is used as window for dosbox\n// * `options`: [DosOptions](https://js-dos.com/6.22/docs/api/generate.html?page=js-dos-options) -\n// optional configuration object\nexport type DosFactory = (canvas: HTMLCanvasElement, options?: DosOptions) => DosReadyPromise;\nconst Dos: DosFactory = (canvas: HTMLCanvasElement, options?: DosOptions) => {\n    const promise = new Promise<DosRuntime>((resolve, reject) => {\n        const module = new DosModule(canvas, resolve);\n\n        if (!options) {\n            options = {};\n        }\n\n        if (!options.onerror) {\n            options.onerror = (message: string) => {\n                /* tslint:disable:no-console */\n                console.error(message);\n                /* tslint:enable:no-console */\n            };\n        }\n\n        Object.assign(module, options);\n\n        // ### Error handling\n        // Error handling should support both ways:\n        //\n        // * Through rejecting of promise\n        // * Fire onerror function of DosOptions object\n\n        const onerror = module.onerror;\n        module.onerror = (message: string) => {\n            reject(message);\n\n            const fn = () => {\n                if (onerror) {\n                    onerror(message);\n                    module.onerror = onerror;\n                } else {\n                    module.onerror = module.error;\n                }\n            };\n\n            setTimeout(fn, 1);\n        };\n\n        module.resolve();\n        if (!module.isValid) {\n            return;\n        }\n\n        openCache(module, (cache) => {\n            // See [Host](https://js-dos.com/6.22/docs/api/generate.html?page=js-dos-host)\n            // to understand resolving of emulation layer (dosbox).\n            Host.resolveDosBox(module.wdosboxUrl as string, cache, module);\n        });\n\n    });\n\n// ### DosReadyPromise\n// Is a Promise object with additional method ready.\n// Method `ready` is just a wrapper over `then` method that\n// split resolved object into meaningful parts.\n\n    const dosReadyPromise = (promise as unknown) as DosReadyPromise;\n    dosReadyPromise.ready = (onready) => {\n        dosReadyPromise.then((runtime: DosRuntime) => {\n            onready(runtime.fs, runtime.main);\n        });\n        return dosReadyPromise;\n    };\n    return dosReadyPromise;\n};\n\nexport default Dos;\n\nexport type DosMainFn = (args?: string[]) => Promise<DosCommandInterface>;\n\n// Plain promise will be resolved with `DosRuntime` interface, that\n// includes:\n//\n// * `fs`: [DosFS](https://js-dos.com/6.22/docs/api/generate.html?page=js-dos-fs) -\n// API for working with dosbox filesystem\n// * `main`: DosMainFn - a function that you should call to actuall start\n// dosbox. It's like a main function in C++, or shell command line. This function\n// will return Promise of [DosCommandInterface](https://js-dos.com/6.22/docs/api/generate.html?page=js-dos-ci).\n// You can use it to control runned dosbox.\nexport interface DosRuntime {\n    fs: DosFS;\n    main: DosMainFn;\n}\n\nexport interface DosReadyPromise extends Promise<DosRuntime> {\n    // `onready` - callback that receive DosRuntime splitted by fields\n    ready: (onready: (fs: DosFS, main: DosMainFn) => void) => Promise<DosRuntime>;\n}\n\n(window as any).Dos = Dos;\n","'use strict';\n\n// compare and isBuffer taken from https://github.com/feross/buffer/blob/680e9e5e488f22aac27599a57dc844a6315928dd/index.js\n// original notice:\n\n/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\n * @license  MIT\n */\nfunction compare(a, b) {\n  if (a === b) {\n    return 0;\n  }\n\n  var x = a.length;\n  var y = b.length;\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i];\n      y = b[i];\n      break;\n    }\n  }\n\n  if (x < y) {\n    return -1;\n  }\n  if (y < x) {\n    return 1;\n  }\n  return 0;\n}\nfunction isBuffer(b) {\n  if (global.Buffer && typeof global.Buffer.isBuffer === 'function') {\n    return global.Buffer.isBuffer(b);\n  }\n  return !!(b != null && b._isBuffer);\n}\n\n// based on node assert, original notice:\n\n// http://wiki.commonjs.org/wiki/Unit_Testing/1.0\n//\n// THIS IS NOT TESTED NOR LIKELY TO WORK OUTSIDE V8!\n//\n// Originally from narwhal.js (http://narwhaljs.org)\n// Copyright (c) 2009 Thomas Robinson <280north.com>\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the 'Software'), to\n// deal in the Software without restriction, including without limitation the\n// rights to use, copy, modify, merge, publish, distribute, sublicense, and/or\n// sell copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN\n// ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar util = require('util/');\nvar hasOwn = Object.prototype.hasOwnProperty;\nvar pSlice = Array.prototype.slice;\nvar functionsHaveNames = (function () {\n  return function foo() {}.name === 'foo';\n}());\nfunction pToString (obj) {\n  return Object.prototype.toString.call(obj);\n}\nfunction isView(arrbuf) {\n  if (isBuffer(arrbuf)) {\n    return false;\n  }\n  if (typeof global.ArrayBuffer !== 'function') {\n    return false;\n  }\n  if (typeof ArrayBuffer.isView === 'function') {\n    return ArrayBuffer.isView(arrbuf);\n  }\n  if (!arrbuf) {\n    return false;\n  }\n  if (arrbuf instanceof DataView) {\n    return true;\n  }\n  if (arrbuf.buffer && arrbuf.buffer instanceof ArrayBuffer) {\n    return true;\n  }\n  return false;\n}\n// 1. The assert module provides functions that throw\n// AssertionError's when particular conditions are not met. The\n// assert module must conform to the following interface.\n\nvar assert = module.exports = ok;\n\n// 2. The AssertionError is defined in assert.\n// new assert.AssertionError({ message: message,\n//                             actual: actual,\n//                             expected: expected })\n\nvar regex = /\\s*function\\s+([^\\(\\s]*)\\s*/;\n// based on https://github.com/ljharb/function.prototype.name/blob/adeeeec8bfcc6068b187d7d9fb3d5bb1d3a30899/implementation.js\nfunction getName(func) {\n  if (!util.isFunction(func)) {\n    return;\n  }\n  if (functionsHaveNames) {\n    return func.name;\n  }\n  var str = func.toString();\n  var match = str.match(regex);\n  return match && match[1];\n}\nassert.AssertionError = function AssertionError(options) {\n  this.name = 'AssertionError';\n  this.actual = options.actual;\n  this.expected = options.expected;\n  this.operator = options.operator;\n  if (options.message) {\n    this.message = options.message;\n    this.generatedMessage = false;\n  } else {\n    this.message = getMessage(this);\n    this.generatedMessage = true;\n  }\n  var stackStartFunction = options.stackStartFunction || fail;\n  if (Error.captureStackTrace) {\n    Error.captureStackTrace(this, stackStartFunction);\n  } else {\n    // non v8 browsers so we can have a stacktrace\n    var err = new Error();\n    if (err.stack) {\n      var out = err.stack;\n\n      // try to strip useless frames\n      var fn_name = getName(stackStartFunction);\n      var idx = out.indexOf('\\n' + fn_name);\n      if (idx >= 0) {\n        // once we have located the function frame\n        // we need to strip out everything before it (and its line)\n        var next_line = out.indexOf('\\n', idx + 1);\n        out = out.substring(next_line + 1);\n      }\n\n      this.stack = out;\n    }\n  }\n};\n\n// assert.AssertionError instanceof Error\nutil.inherits(assert.AssertionError, Error);\n\nfunction truncate(s, n) {\n  if (typeof s === 'string') {\n    return s.length < n ? s : s.slice(0, n);\n  } else {\n    return s;\n  }\n}\nfunction inspect(something) {\n  if (functionsHaveNames || !util.isFunction(something)) {\n    return util.inspect(something);\n  }\n  var rawname = getName(something);\n  var name = rawname ? ': ' + rawname : '';\n  return '[Function' +  name + ']';\n}\nfunction getMessage(self) {\n  return truncate(inspect(self.actual), 128) + ' ' +\n         self.operator + ' ' +\n         truncate(inspect(self.expected), 128);\n}\n\n// At present only the three keys mentioned above are used and\n// understood by the spec. Implementations or sub modules can pass\n// other keys to the AssertionError's constructor - they will be\n// ignored.\n\n// 3. All of the following functions must throw an AssertionError\n// when a corresponding condition is not met, with a message that\n// may be undefined if not provided.  All assertion methods provide\n// both the actual and expected values to the assertion error for\n// display purposes.\n\nfunction fail(actual, expected, message, operator, stackStartFunction) {\n  throw new assert.AssertionError({\n    message: message,\n    actual: actual,\n    expected: expected,\n    operator: operator,\n    stackStartFunction: stackStartFunction\n  });\n}\n\n// EXTENSION! allows for well behaved errors defined elsewhere.\nassert.fail = fail;\n\n// 4. Pure assertion tests whether a value is truthy, as determined\n// by !!guard.\n// assert.ok(guard, message_opt);\n// This statement is equivalent to assert.equal(true, !!guard,\n// message_opt);. To test strictly for the value true, use\n// assert.strictEqual(true, guard, message_opt);.\n\nfunction ok(value, message) {\n  if (!value) fail(value, true, message, '==', assert.ok);\n}\nassert.ok = ok;\n\n// 5. The equality assertion tests shallow, coercive equality with\n// ==.\n// assert.equal(actual, expected, message_opt);\n\nassert.equal = function equal(actual, expected, message) {\n  if (actual != expected) fail(actual, expected, message, '==', assert.equal);\n};\n\n// 6. The non-equality assertion tests for whether two objects are not equal\n// with != assert.notEqual(actual, expected, message_opt);\n\nassert.notEqual = function notEqual(actual, expected, message) {\n  if (actual == expected) {\n    fail(actual, expected, message, '!=', assert.notEqual);\n  }\n};\n\n// 7. The equivalence assertion tests a deep equality relation.\n// assert.deepEqual(actual, expected, message_opt);\n\nassert.deepEqual = function deepEqual(actual, expected, message) {\n  if (!_deepEqual(actual, expected, false)) {\n    fail(actual, expected, message, 'deepEqual', assert.deepEqual);\n  }\n};\n\nassert.deepStrictEqual = function deepStrictEqual(actual, expected, message) {\n  if (!_deepEqual(actual, expected, true)) {\n    fail(actual, expected, message, 'deepStrictEqual', assert.deepStrictEqual);\n  }\n};\n\nfunction _deepEqual(actual, expected, strict, memos) {\n  // 7.1. All identical values are equivalent, as determined by ===.\n  if (actual === expected) {\n    return true;\n  } else if (isBuffer(actual) && isBuffer(expected)) {\n    return compare(actual, expected) === 0;\n\n  // 7.2. If the expected value is a Date object, the actual value is\n  // equivalent if it is also a Date object that refers to the same time.\n  } else if (util.isDate(actual) && util.isDate(expected)) {\n    return actual.getTime() === expected.getTime();\n\n  // 7.3 If the expected value is a RegExp object, the actual value is\n  // equivalent if it is also a RegExp object with the same source and\n  // properties (`global`, `multiline`, `lastIndex`, `ignoreCase`).\n  } else if (util.isRegExp(actual) && util.isRegExp(expected)) {\n    return actual.source === expected.source &&\n           actual.global === expected.global &&\n           actual.multiline === expected.multiline &&\n           actual.lastIndex === expected.lastIndex &&\n           actual.ignoreCase === expected.ignoreCase;\n\n  // 7.4. Other pairs that do not both pass typeof value == 'object',\n  // equivalence is determined by ==.\n  } else if ((actual === null || typeof actual !== 'object') &&\n             (expected === null || typeof expected !== 'object')) {\n    return strict ? actual === expected : actual == expected;\n\n  // If both values are instances of typed arrays, wrap their underlying\n  // ArrayBuffers in a Buffer each to increase performance\n  // This optimization requires the arrays to have the same type as checked by\n  // Object.prototype.toString (aka pToString). Never perform binary\n  // comparisons for Float*Arrays, though, since e.g. +0 === -0 but their\n  // bit patterns are not identical.\n  } else if (isView(actual) && isView(expected) &&\n             pToString(actual) === pToString(expected) &&\n             !(actual instanceof Float32Array ||\n               actual instanceof Float64Array)) {\n    return compare(new Uint8Array(actual.buffer),\n                   new Uint8Array(expected.buffer)) === 0;\n\n  // 7.5 For all other Object pairs, including Array objects, equivalence is\n  // determined by having the same number of owned properties (as verified\n  // with Object.prototype.hasOwnProperty.call), the same set of keys\n  // (although not necessarily the same order), equivalent values for every\n  // corresponding key, and an identical 'prototype' property. Note: this\n  // accounts for both named and indexed properties on Arrays.\n  } else if (isBuffer(actual) !== isBuffer(expected)) {\n    return false;\n  } else {\n    memos = memos || {actual: [], expected: []};\n\n    var actualIndex = memos.actual.indexOf(actual);\n    if (actualIndex !== -1) {\n      if (actualIndex === memos.expected.indexOf(expected)) {\n        return true;\n      }\n    }\n\n    memos.actual.push(actual);\n    memos.expected.push(expected);\n\n    return objEquiv(actual, expected, strict, memos);\n  }\n}\n\nfunction isArguments(object) {\n  return Object.prototype.toString.call(object) == '[object Arguments]';\n}\n\nfunction objEquiv(a, b, strict, actualVisitedObjects) {\n  if (a === null || a === undefined || b === null || b === undefined)\n    return false;\n  // if one is a primitive, the other must be same\n  if (util.isPrimitive(a) || util.isPrimitive(b))\n    return a === b;\n  if (strict && Object.getPrototypeOf(a) !== Object.getPrototypeOf(b))\n    return false;\n  var aIsArgs = isArguments(a);\n  var bIsArgs = isArguments(b);\n  if ((aIsArgs && !bIsArgs) || (!aIsArgs && bIsArgs))\n    return false;\n  if (aIsArgs) {\n    a = pSlice.call(a);\n    b = pSlice.call(b);\n    return _deepEqual(a, b, strict);\n  }\n  var ka = objectKeys(a);\n  var kb = objectKeys(b);\n  var key, i;\n  // having the same number of owned properties (keys incorporates\n  // hasOwnProperty)\n  if (ka.length !== kb.length)\n    return false;\n  //the same set of keys (although not necessarily the same order),\n  ka.sort();\n  kb.sort();\n  //~~~cheap key test\n  for (i = ka.length - 1; i >= 0; i--) {\n    if (ka[i] !== kb[i])\n      return false;\n  }\n  //equivalent values for every corresponding key, and\n  //~~~possibly expensive deep test\n  for (i = ka.length - 1; i >= 0; i--) {\n    key = ka[i];\n    if (!_deepEqual(a[key], b[key], strict, actualVisitedObjects))\n      return false;\n  }\n  return true;\n}\n\n// 8. The non-equivalence assertion tests for any deep inequality.\n// assert.notDeepEqual(actual, expected, message_opt);\n\nassert.notDeepEqual = function notDeepEqual(actual, expected, message) {\n  if (_deepEqual(actual, expected, false)) {\n    fail(actual, expected, message, 'notDeepEqual', assert.notDeepEqual);\n  }\n};\n\nassert.notDeepStrictEqual = notDeepStrictEqual;\nfunction notDeepStrictEqual(actual, expected, message) {\n  if (_deepEqual(actual, expected, true)) {\n    fail(actual, expected, message, 'notDeepStrictEqual', notDeepStrictEqual);\n  }\n}\n\n\n// 9. The strict equality assertion tests strict equality, as determined by ===.\n// assert.strictEqual(actual, expected, message_opt);\n\nassert.strictEqual = function strictEqual(actual, expected, message) {\n  if (actual !== expected) {\n    fail(actual, expected, message, '===', assert.strictEqual);\n  }\n};\n\n// 10. The strict non-equality assertion tests for strict inequality, as\n// determined by !==.  assert.notStrictEqual(actual, expected, message_opt);\n\nassert.notStrictEqual = function notStrictEqual(actual, expected, message) {\n  if (actual === expected) {\n    fail(actual, expected, message, '!==', assert.notStrictEqual);\n  }\n};\n\nfunction expectedException(actual, expected) {\n  if (!actual || !expected) {\n    return false;\n  }\n\n  if (Object.prototype.toString.call(expected) == '[object RegExp]') {\n    return expected.test(actual);\n  }\n\n  try {\n    if (actual instanceof expected) {\n      return true;\n    }\n  } catch (e) {\n    // Ignore.  The instanceof check doesn't work for arrow functions.\n  }\n\n  if (Error.isPrototypeOf(expected)) {\n    return false;\n  }\n\n  return expected.call({}, actual) === true;\n}\n\nfunction _tryBlock(block) {\n  var error;\n  try {\n    block();\n  } catch (e) {\n    error = e;\n  }\n  return error;\n}\n\nfunction _throws(shouldThrow, block, expected, message) {\n  var actual;\n\n  if (typeof block !== 'function') {\n    throw new TypeError('\"block\" argument must be a function');\n  }\n\n  if (typeof expected === 'string') {\n    message = expected;\n    expected = null;\n  }\n\n  actual = _tryBlock(block);\n\n  message = (expected && expected.name ? ' (' + expected.name + ').' : '.') +\n            (message ? ' ' + message : '.');\n\n  if (shouldThrow && !actual) {\n    fail(actual, expected, 'Missing expected exception' + message);\n  }\n\n  var userProvidedMessage = typeof message === 'string';\n  var isUnwantedException = !shouldThrow && util.isError(actual);\n  var isUnexpectedException = !shouldThrow && actual && !expected;\n\n  if ((isUnwantedException &&\n      userProvidedMessage &&\n      expectedException(actual, expected)) ||\n      isUnexpectedException) {\n    fail(actual, expected, 'Got unwanted exception' + message);\n  }\n\n  if ((shouldThrow && actual && expected &&\n      !expectedException(actual, expected)) || (!shouldThrow && actual)) {\n    throw actual;\n  }\n}\n\n// 11. Expected to throw an error:\n// assert.throws(block, Error_opt, message_opt);\n\nassert.throws = function(block, /*optional*/error, /*optional*/message) {\n  _throws(true, block, error, message);\n};\n\n// EXTENSION! This is annoying to write outside this module.\nassert.doesNotThrow = function(block, /*optional*/error, /*optional*/message) {\n  _throws(false, block, error, message);\n};\n\nassert.ifError = function(err) { if (err) throw err; };\n\nvar objectKeys = Object.keys || function (obj) {\n  var keys = [];\n  for (var key in obj) {\n    if (hasOwn.call(obj, key)) keys.push(key);\n  }\n  return keys;\n};\n","if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    ctor.prototype = Object.create(superCtor.prototype, {\n      constructor: {\n        value: ctor,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    var TempCtor = function () {}\n    TempCtor.prototype = superCtor.prototype\n    ctor.prototype = new TempCtor()\n    ctor.prototype.constructor = ctor\n  }\n}\n","module.exports = function isBuffer(arg) {\n  return arg && typeof arg === 'object'\n    && typeof arg.copy === 'function'\n    && typeof arg.fill === 'function'\n    && typeof arg.readUInt8 === 'function';\n}","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar formatRegExp = /%[sdj%]/g;\nexports.format = function(f) {\n  if (!isString(f)) {\n    var objects = [];\n    for (var i = 0; i < arguments.length; i++) {\n      objects.push(inspect(arguments[i]));\n    }\n    return objects.join(' ');\n  }\n\n  var i = 1;\n  var args = arguments;\n  var len = args.length;\n  var str = String(f).replace(formatRegExp, function(x) {\n    if (x === '%%') return '%';\n    if (i >= len) return x;\n    switch (x) {\n      case '%s': return String(args[i++]);\n      case '%d': return Number(args[i++]);\n      case '%j':\n        try {\n          return JSON.stringify(args[i++]);\n        } catch (_) {\n          return '[Circular]';\n        }\n      default:\n        return x;\n    }\n  });\n  for (var x = args[i]; i < len; x = args[++i]) {\n    if (isNull(x) || !isObject(x)) {\n      str += ' ' + x;\n    } else {\n      str += ' ' + inspect(x);\n    }\n  }\n  return str;\n};\n\n\n// Mark that a method should not be used.\n// Returns a modified function which warns once by default.\n// If --no-deprecation is set, then it is a no-op.\nexports.deprecate = function(fn, msg) {\n  // Allow for deprecating things in the process of starting up.\n  if (isUndefined(global.process)) {\n    return function() {\n      return exports.deprecate(fn, msg).apply(this, arguments);\n    };\n  }\n\n  if (process.noDeprecation === true) {\n    return fn;\n  }\n\n  var warned = false;\n  function deprecated() {\n    if (!warned) {\n      if (process.throwDeprecation) {\n        throw new Error(msg);\n      } else if (process.traceDeprecation) {\n        console.trace(msg);\n      } else {\n        console.error(msg);\n      }\n      warned = true;\n    }\n    return fn.apply(this, arguments);\n  }\n\n  return deprecated;\n};\n\n\nvar debugs = {};\nvar debugEnviron;\nexports.debuglog = function(set) {\n  if (isUndefined(debugEnviron))\n    debugEnviron = process.env.NODE_DEBUG || '';\n  set = set.toUpperCase();\n  if (!debugs[set]) {\n    if (new RegExp('\\\\b' + set + '\\\\b', 'i').test(debugEnviron)) {\n      var pid = process.pid;\n      debugs[set] = function() {\n        var msg = exports.format.apply(exports, arguments);\n        console.error('%s %d: %s', set, pid, msg);\n      };\n    } else {\n      debugs[set] = function() {};\n    }\n  }\n  return debugs[set];\n};\n\n\n/**\n * Echos the value of a value. Trys to print the value out\n * in the best way possible given the different types.\n *\n * @param {Object} obj The object to print out.\n * @param {Object} opts Optional options object that alters the output.\n */\n/* legacy: obj, showHidden, depth, colors*/\nfunction inspect(obj, opts) {\n  // default options\n  var ctx = {\n    seen: [],\n    stylize: stylizeNoColor\n  };\n  // legacy...\n  if (arguments.length >= 3) ctx.depth = arguments[2];\n  if (arguments.length >= 4) ctx.colors = arguments[3];\n  if (isBoolean(opts)) {\n    // legacy...\n    ctx.showHidden = opts;\n  } else if (opts) {\n    // got an \"options\" object\n    exports._extend(ctx, opts);\n  }\n  // set default options\n  if (isUndefined(ctx.showHidden)) ctx.showHidden = false;\n  if (isUndefined(ctx.depth)) ctx.depth = 2;\n  if (isUndefined(ctx.colors)) ctx.colors = false;\n  if (isUndefined(ctx.customInspect)) ctx.customInspect = true;\n  if (ctx.colors) ctx.stylize = stylizeWithColor;\n  return formatValue(ctx, obj, ctx.depth);\n}\nexports.inspect = inspect;\n\n\n// http://en.wikipedia.org/wiki/ANSI_escape_code#graphics\ninspect.colors = {\n  'bold' : [1, 22],\n  'italic' : [3, 23],\n  'underline' : [4, 24],\n  'inverse' : [7, 27],\n  'white' : [37, 39],\n  'grey' : [90, 39],\n  'black' : [30, 39],\n  'blue' : [34, 39],\n  'cyan' : [36, 39],\n  'green' : [32, 39],\n  'magenta' : [35, 39],\n  'red' : [31, 39],\n  'yellow' : [33, 39]\n};\n\n// Don't use 'blue' not visible on cmd.exe\ninspect.styles = {\n  'special': 'cyan',\n  'number': 'yellow',\n  'boolean': 'yellow',\n  'undefined': 'grey',\n  'null': 'bold',\n  'string': 'green',\n  'date': 'magenta',\n  // \"name\": intentionally not styling\n  'regexp': 'red'\n};\n\n\nfunction stylizeWithColor(str, styleType) {\n  var style = inspect.styles[styleType];\n\n  if (style) {\n    return '\\u001b[' + inspect.colors[style][0] + 'm' + str +\n           '\\u001b[' + inspect.colors[style][1] + 'm';\n  } else {\n    return str;\n  }\n}\n\n\nfunction stylizeNoColor(str, styleType) {\n  return str;\n}\n\n\nfunction arrayToHash(array) {\n  var hash = {};\n\n  array.forEach(function(val, idx) {\n    hash[val] = true;\n  });\n\n  return hash;\n}\n\n\nfunction formatValue(ctx, value, recurseTimes) {\n  // Provide a hook for user-specified inspect functions.\n  // Check that value is an object with an inspect function on it\n  if (ctx.customInspect &&\n      value &&\n      isFunction(value.inspect) &&\n      // Filter out the util module, it's inspect function is special\n      value.inspect !== exports.inspect &&\n      // Also filter out any prototype objects using the circular check.\n      !(value.constructor && value.constructor.prototype === value)) {\n    var ret = value.inspect(recurseTimes, ctx);\n    if (!isString(ret)) {\n      ret = formatValue(ctx, ret, recurseTimes);\n    }\n    return ret;\n  }\n\n  // Primitive types cannot have properties\n  var primitive = formatPrimitive(ctx, value);\n  if (primitive) {\n    return primitive;\n  }\n\n  // Look up the keys of the object.\n  var keys = Object.keys(value);\n  var visibleKeys = arrayToHash(keys);\n\n  if (ctx.showHidden) {\n    keys = Object.getOwnPropertyNames(value);\n  }\n\n  // IE doesn't make error fields non-enumerable\n  // http://msdn.microsoft.com/en-us/library/ie/dww52sbt(v=vs.94).aspx\n  if (isError(value)\n      && (keys.indexOf('message') >= 0 || keys.indexOf('description') >= 0)) {\n    return formatError(value);\n  }\n\n  // Some type of object without properties can be shortcutted.\n  if (keys.length === 0) {\n    if (isFunction(value)) {\n      var name = value.name ? ': ' + value.name : '';\n      return ctx.stylize('[Function' + name + ']', 'special');\n    }\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    }\n    if (isDate(value)) {\n      return ctx.stylize(Date.prototype.toString.call(value), 'date');\n    }\n    if (isError(value)) {\n      return formatError(value);\n    }\n  }\n\n  var base = '', array = false, braces = ['{', '}'];\n\n  // Make Array say that they are Array\n  if (isArray(value)) {\n    array = true;\n    braces = ['[', ']'];\n  }\n\n  // Make functions say that they are functions\n  if (isFunction(value)) {\n    var n = value.name ? ': ' + value.name : '';\n    base = ' [Function' + n + ']';\n  }\n\n  // Make RegExps say that they are RegExps\n  if (isRegExp(value)) {\n    base = ' ' + RegExp.prototype.toString.call(value);\n  }\n\n  // Make dates with properties first say the date\n  if (isDate(value)) {\n    base = ' ' + Date.prototype.toUTCString.call(value);\n  }\n\n  // Make error with message first say the error\n  if (isError(value)) {\n    base = ' ' + formatError(value);\n  }\n\n  if (keys.length === 0 && (!array || value.length == 0)) {\n    return braces[0] + base + braces[1];\n  }\n\n  if (recurseTimes < 0) {\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    } else {\n      return ctx.stylize('[Object]', 'special');\n    }\n  }\n\n  ctx.seen.push(value);\n\n  var output;\n  if (array) {\n    output = formatArray(ctx, value, recurseTimes, visibleKeys, keys);\n  } else {\n    output = keys.map(function(key) {\n      return formatProperty(ctx, value, recurseTimes, visibleKeys, key, array);\n    });\n  }\n\n  ctx.seen.pop();\n\n  return reduceToSingleString(output, base, braces);\n}\n\n\nfunction formatPrimitive(ctx, value) {\n  if (isUndefined(value))\n    return ctx.stylize('undefined', 'undefined');\n  if (isString(value)) {\n    var simple = '\\'' + JSON.stringify(value).replace(/^\"|\"$/g, '')\n                                             .replace(/'/g, \"\\\\'\")\n                                             .replace(/\\\\\"/g, '\"') + '\\'';\n    return ctx.stylize(simple, 'string');\n  }\n  if (isNumber(value))\n    return ctx.stylize('' + value, 'number');\n  if (isBoolean(value))\n    return ctx.stylize('' + value, 'boolean');\n  // For some reason typeof null is \"object\", so special case here.\n  if (isNull(value))\n    return ctx.stylize('null', 'null');\n}\n\n\nfunction formatError(value) {\n  return '[' + Error.prototype.toString.call(value) + ']';\n}\n\n\nfunction formatArray(ctx, value, recurseTimes, visibleKeys, keys) {\n  var output = [];\n  for (var i = 0, l = value.length; i < l; ++i) {\n    if (hasOwnProperty(value, String(i))) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          String(i), true));\n    } else {\n      output.push('');\n    }\n  }\n  keys.forEach(function(key) {\n    if (!key.match(/^\\d+$/)) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          key, true));\n    }\n  });\n  return output;\n}\n\n\nfunction formatProperty(ctx, value, recurseTimes, visibleKeys, key, array) {\n  var name, str, desc;\n  desc = Object.getOwnPropertyDescriptor(value, key) || { value: value[key] };\n  if (desc.get) {\n    if (desc.set) {\n      str = ctx.stylize('[Getter/Setter]', 'special');\n    } else {\n      str = ctx.stylize('[Getter]', 'special');\n    }\n  } else {\n    if (desc.set) {\n      str = ctx.stylize('[Setter]', 'special');\n    }\n  }\n  if (!hasOwnProperty(visibleKeys, key)) {\n    name = '[' + key + ']';\n  }\n  if (!str) {\n    if (ctx.seen.indexOf(desc.value) < 0) {\n      if (isNull(recurseTimes)) {\n        str = formatValue(ctx, desc.value, null);\n      } else {\n        str = formatValue(ctx, desc.value, recurseTimes - 1);\n      }\n      if (str.indexOf('\\n') > -1) {\n        if (array) {\n          str = str.split('\\n').map(function(line) {\n            return '  ' + line;\n          }).join('\\n').substr(2);\n        } else {\n          str = '\\n' + str.split('\\n').map(function(line) {\n            return '   ' + line;\n          }).join('\\n');\n        }\n      }\n    } else {\n      str = ctx.stylize('[Circular]', 'special');\n    }\n  }\n  if (isUndefined(name)) {\n    if (array && key.match(/^\\d+$/)) {\n      return str;\n    }\n    name = JSON.stringify('' + key);\n    if (name.match(/^\"([a-zA-Z_][a-zA-Z_0-9]*)\"$/)) {\n      name = name.substr(1, name.length - 2);\n      name = ctx.stylize(name, 'name');\n    } else {\n      name = name.replace(/'/g, \"\\\\'\")\n                 .replace(/\\\\\"/g, '\"')\n                 .replace(/(^\"|\"$)/g, \"'\");\n      name = ctx.stylize(name, 'string');\n    }\n  }\n\n  return name + ': ' + str;\n}\n\n\nfunction reduceToSingleString(output, base, braces) {\n  var numLinesEst = 0;\n  var length = output.reduce(function(prev, cur) {\n    numLinesEst++;\n    if (cur.indexOf('\\n') >= 0) numLinesEst++;\n    return prev + cur.replace(/\\u001b\\[\\d\\d?m/g, '').length + 1;\n  }, 0);\n\n  if (length > 60) {\n    return braces[0] +\n           (base === '' ? '' : base + '\\n ') +\n           ' ' +\n           output.join(',\\n  ') +\n           ' ' +\n           braces[1];\n  }\n\n  return braces[0] + base + ' ' + output.join(', ') + ' ' + braces[1];\n}\n\n\n// NOTE: These type checking functions intentionally don't use `instanceof`\n// because it is fragile and can be easily faked with `Object.create()`.\nfunction isArray(ar) {\n  return Array.isArray(ar);\n}\nexports.isArray = isArray;\n\nfunction isBoolean(arg) {\n  return typeof arg === 'boolean';\n}\nexports.isBoolean = isBoolean;\n\nfunction isNull(arg) {\n  return arg === null;\n}\nexports.isNull = isNull;\n\nfunction isNullOrUndefined(arg) {\n  return arg == null;\n}\nexports.isNullOrUndefined = isNullOrUndefined;\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\nexports.isNumber = isNumber;\n\nfunction isString(arg) {\n  return typeof arg === 'string';\n}\nexports.isString = isString;\n\nfunction isSymbol(arg) {\n  return typeof arg === 'symbol';\n}\nexports.isSymbol = isSymbol;\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\nexports.isUndefined = isUndefined;\n\nfunction isRegExp(re) {\n  return isObject(re) && objectToString(re) === '[object RegExp]';\n}\nexports.isRegExp = isRegExp;\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\nexports.isObject = isObject;\n\nfunction isDate(d) {\n  return isObject(d) && objectToString(d) === '[object Date]';\n}\nexports.isDate = isDate;\n\nfunction isError(e) {\n  return isObject(e) &&\n      (objectToString(e) === '[object Error]' || e instanceof Error);\n}\nexports.isError = isError;\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\nexports.isFunction = isFunction;\n\nfunction isPrimitive(arg) {\n  return arg === null ||\n         typeof arg === 'boolean' ||\n         typeof arg === 'number' ||\n         typeof arg === 'string' ||\n         typeof arg === 'symbol' ||  // ES6 symbol\n         typeof arg === 'undefined';\n}\nexports.isPrimitive = isPrimitive;\n\nexports.isBuffer = require('./support/isBuffer');\n\nfunction objectToString(o) {\n  return Object.prototype.toString.call(o);\n}\n\n\nfunction pad(n) {\n  return n < 10 ? '0' + n.toString(10) : n.toString(10);\n}\n\n\nvar months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep',\n              'Oct', 'Nov', 'Dec'];\n\n// 26 Feb 16:19:34\nfunction timestamp() {\n  var d = new Date();\n  var time = [pad(d.getHours()),\n              pad(d.getMinutes()),\n              pad(d.getSeconds())].join(':');\n  return [d.getDate(), months[d.getMonth()], time].join(' ');\n}\n\n\n// log is just a thin wrapper to console.log that prepends a timestamp\nexports.log = function() {\n  console.log('%s - %s', timestamp(), exports.format.apply(exports, arguments));\n};\n\n\n/**\n * Inherit the prototype methods from one constructor into another.\n *\n * The Function.prototype.inherits from lang.js rewritten as a standalone\n * function (not on Function.prototype). NOTE: If this file is to be loaded\n * during bootstrapping this function needs to be rewritten using some native\n * functions as prototype setup using normal JavaScript does not work as\n * expected during bootstrapping (see mirror.js in r114903).\n *\n * @param {function} ctor Constructor function which needs to inherit the\n *     prototype.\n * @param {function} superCtor Constructor function to inherit prototype from.\n */\nexports.inherits = require('inherits');\n\nexports._extend = function(origin, add) {\n  // Don't do anything if add isn't an object\n  if (!add || !isObject(add)) return origin;\n\n  var keys = Object.keys(add);\n  var i = keys.length;\n  while (i--) {\n    origin[keys[i]] = add[keys[i]];\n  }\n  return origin;\n};\n\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","import * as assert from \"assert\";\nimport { DosCommandInterface } from \"../js-dos-ts/js-dos-ci\";\nimport { doThen } from \"./do\";\n\n// Compare\n// =======\n// Compare image from url, and screenshot from DosBox\n\nexport function compareAndExit(imageUrl: string, ci: DosCommandInterface, done: () => void) {\n    compare(imageUrl, ci, (wrong) => {\n        assert.equal(0, wrong);\n        ci.exit();\n        done();\n    });\n}\n\nconst compare = (imageUrl: string, ci: DosCommandInterface, callback: (wrong: number) => void) => {\n    doThen(ci.screenshot(), (actualUrl: string) => {\n        const img = new Image();\n        img.onload = () => {\n            assert(img.width === ci.width(), \"Invalid width: \" + ci.width() + \", should be \" + img.width);\n            assert(img.height === ci.height(), \"Invalid height: \" + ci.height() + \", should be \" + img.height);\n\n            const canvas = document.createElement(\"canvas\");\n            canvas.width = img.width;\n            canvas.height = img.height;\n            const ctx = canvas.getContext(\"2d\");\n            ctx.drawImage(img, 0, 0);\n            const expected = ctx.getImageData(0, 0, img.width, img.height).data;\n\n            const actualImage = new Image();\n            actualImage.onload = () => {\n                /*\n                document.body.appendChild(img); // for comparisons\n                var div = document.createElement('div');\n                div.innerHTML = '^=expected, v=actual';\n                document.body.appendChild(div);\n                document.body.appendChild(actualImage); // to grab it for creating the test reference\n                */\n\n                const actualCanvas = document.createElement(\"canvas\");\n                actualCanvas.width = actualImage.width;\n                actualCanvas.height = actualImage.height;\n                const actualCtx = actualCanvas.getContext(\"2d\");\n                actualCtx.drawImage(actualImage, 0, 0);\n                const actual = actualCtx.getImageData(0, 0, actualImage.width, actualImage.height).data;\n\n                let total = 0;\n                const width = img.width;\n                const height = img.height;\n                for (let x = 0; x < width; x++) {\n                    for (let y = 0; y < height; y++) {\n                        total += Math.abs(expected[y * width * 4 + x * 4 + 0] - actual[y * width * 4 + x * 4 + 0]);\n                        total += Math.abs(expected[y * width * 4 + x * 4 + 1] - actual[y * width * 4 + x * 4 + 1]);\n                        total += Math.abs(expected[y * width * 4 + x * 4 + 2] - actual[y * width * 4 + x * 4 + 2]);\n                    }\n                }\n\n                // floor, to allow some margin of error for antialiasing\n                const wrong = Math.floor(total / (img.width * img.height * 3));\n                callback(wrong);\n            };\n            actualImage.src = actualUrl;\n        };\n        img.src = imageUrl;\n    });\n};\n","import assert = require(\"assert\");\nimport { DosMainFn, DosReadyPromise } from \"../js-dos-ts/js-dos\";\nimport { DosFS } from \"../js-dos-ts/js-dos-fs\";\n\n// Do\n// ==\n// We use this functions to avoid problem of throwing,\n// exceptions inside promise.\n// Mocha can't handle exceptions if they are throwed in promise\n\nexport function doThen<T>(promise: Promise<T>, fn: (v: T) => void) {\n    promise.then((v: T) => {\n        const topFn = () => {\n            fn(v);\n        };\n\n        setTimeout(topFn, 1);\n    });\n}\n\nexport function doCatch<T>(promise: Promise<T>, fn: (v: string) => void) {\n    promise.catch((v: string) => {\n        const topFn = () => {\n            fn(v);\n        };\n\n        setTimeout(topFn, 1);\n    });\n}\n\nexport function doNext<T>(promise: Promise<T>, fn: (v: T) => void) {\n    doThen(promise, fn);\n    doCatch(promise, (msg: string) => assert.fail(msg));\n}\n\nexport function doReady(promise: DosReadyPromise, fn: (fs: DosFS, main: DosMainFn) => void) {\n    doThen(promise, (runtime) => {\n        fn(runtime.fs, runtime.main);\n    });\n    doCatch(promise, (msg: string) => assert.fail(msg));\n}\n","/* tslint:disable:max-line-length */\n/* tslint:disable:no-console */\n\nimport * as assert from \"assert\";\nimport Dos from \"../js-dos-ts/js-dos\";\nimport { ICache } from \"../js-dos-ts/js-dos-cache\";\nimport CacheDb from \"../js-dos-ts/js-dos-cache-db\";\nimport CacheNoop from \"../js-dos-ts/js-dos-cache-noop\";\nimport { DosCommandInterface } from \"../js-dos-ts/js-dos-ci\";\nimport { Host } from \"../js-dos-ts/js-dos-host\";\nimport { DosModule } from \"../js-dos-ts/js-dos-module\";\nimport { DosOptions } from \"../js-dos-ts/js-dos-options\";\nimport { compareAndExit } from \"./compare\";\nimport { doCatch, doNext, doReady, doThen } from \"./do\";\n\nconst wdosboxUrl: string = (window as any).wdosboxUrl;\nsuite(\"js-dos-host\");\n\ntest(\"loader should fallback to js if wasm is not supported\", (done) => {\n    const oldValue = Host.wasmSupported;\n    Host.wasmSupported = false;\n    Host.resolveDosBox(\"wrongurl.js\", new CacheNoop(), {\n        onerror: (message: string) => {\n            Host.wasmSupported = oldValue;\n            assert.equal(\"Can\\'t download mem file, code: 404, message: connection problem, url: rongurl.js.mem\", message);\n            done();\n        },\n    } as DosModule);\n});\n\ntest(\"loader should notify about error, if it can't download wdosbox\", (done) => {\n    Host.resolveDosBox(\"wrongurl.js\", new CacheNoop(), {\n        onerror: (message: string) => {\n            assert.equal(\"Can't download wasm, code: 404, message: connection problem, url: wrongurl.wasm.js\", message);\n            done();\n        },\n    } as DosModule);\n});\n\ntest(\"loader should show progress loading and use cache\", (done) => {\n    let isGET = false;\n    let isPUT = false;\n    class TestCache implements ICache {\n        public put(key: string, data: any, onflush: () => void) {\n            isPUT = isPUT || (key === wdosboxUrl.replace(\".js\", \".wasm.js\") && data instanceof ArrayBuffer && (data as ArrayBuffer).byteLength > 0);\n            onflush();\n        }\n\n        public get(key: string, ondata: (data: any) => void, onerror: (msg: string) => void) {\n            isGET = isGET || key === wdosboxUrl.replace(\".js\", \".wasm.js\");\n            onerror(\"not in cache\");\n        }\n\n        public forEach(each: (key: string, value: any) => void, onend: () => void) {\n            onend();\n        }\n    }\n\n    let lastLoaded = -1;\n    Host.resolveDosBox(wdosboxUrl, new TestCache(), {\n        onprogress: (stage: string, total: number, loaded: number) => {\n            console.log(stage, total, loaded);\n            assert.equal(true, loaded <= total, \"onprgoress: \" + loaded + \"<=\" + total);\n            assert.equal(true, lastLoaded <= loaded, \"endprogress: \" + lastLoaded + \"<=\" + loaded);\n            lastLoaded = loaded;\n        },\n        ondosbox: (dosbox: any, instantiateWasm: any) => {\n            assert.ok(isGET);\n            assert.ok(isPUT);\n            done();\n        },\n        onerror: (message: string) => {\n            assert.fail();\n        },\n    } as DosModule);\n});\n\ntest(\"loader should never load twice wdosbox\", (done) => {\n    Host.resolveDosBox(wdosboxUrl, new CacheNoop(), {\n        onprogress: (stage: string, total: number, loaded: number) => {\n            assert.fail();\n        },\n        ondosbox: (dosbox: any, instantiateWasm: any) => {\n            done();\n        },\n        onerror: (message: string) => {\n            assert.fail();\n        },\n    } as DosModule);\n});\n\ntest(\"loader should fire event when wdosbox is loaded\", (done) => {\n    Host.resolveDosBox(wdosboxUrl, new CacheNoop(), {\n        ondosbox: (dosbox: any, instantiateWasm: any) => {\n            assert.ok(dosbox);\n            done();\n        },\n        onerror: (message: string) => {\n            assert.fail();\n        },\n    } as DosModule);\n});\n\nsuite(\"js-dos\");\n\ntest(\"js-dos can't start without canvas (listener style)\", (done) => {\n    Dos(null, {\n        wdosboxUrl,\n        onerror: (message: string) => {\n            assert.equal(\"canvas field is required, but not set!\", message);\n            done();\n        },\n    } as DosOptions);\n});\n\ntest(\"js-dos can't start without canvas (promise style)\", (done) => {\n    const dos = Dos(null, {\n        wdosboxUrl,\n    } as DosOptions);\n    doCatch(dos, (message) => {\n        assert.equal(\"canvas field is required, but not set!\", message);\n        done();\n    });\n    doThen(dos, () => {\n        assert.fail();\n    });\n});\n\ntest(\"js-dos can't start without canvas (ready style)\", (done) => {\n    const dos = Dos(null, {\n        wdosboxUrl,\n    } as DosOptions);\n    const promise = dos.ready((fs, main) => {\n        const fn = () => assert.fail();\n        setTimeout(fn, 1);\n    });\n    doCatch(promise, (message) => {\n        assert.equal(\"canvas field is required, but not set!\", message);\n        done();\n    });\n});\n\ntest(\"js-dos should start with canvas\", (done) => {\n    const dos = Dos(document.getElementById(\"canvas\") as HTMLCanvasElement, {\n        wdosboxUrl,\n    });\n    doReady(dos, (fs, main) => {\n        doNext(main([]), (ci) => {\n            ci.exit();\n            done();\n        });\n    });\n});\n\ntest(\"js-dos can take screenshot of canvas\", (done) => {\n    const dos = Dos(document.getElementById(\"canvas\") as HTMLCanvasElement, {\n        wdosboxUrl,\n    });\n    doReady(dos, (fs, main) => {\n        doNext(main([]), (ci) => {\n            compareAndExit(\"init.png\", ci, done);\n        });\n    });\n});\n\nsuite(\"js-dos-fs\");\n\ntest(\"js-dos-fs createFile error handling\", (done) => {\n    const dos = Dos(document.getElementById(\"canvas\") as HTMLCanvasElement, {\n        wdosboxUrl,\n        onerror: (message) => {\n            assert.equal(message, \"Can't create file '', because file name is empty\");\n            done();\n        },\n    });\n\n    doReady(dos, (fs, main) => {\n        fs.createFile(\"\", \"\");\n    });\n});\n\ntest(\"js-dos-fs createFile error handling 2\", (done) => {\n    const dos = Dos(document.getElementById(\"canvas\") as HTMLCanvasElement, {\n        wdosboxUrl,\n        onerror: (message) => {\n            assert.equal(message, \"Can't create file '/home/', because file name is empty\");\n            done();\n        },\n    });\n\n    doReady(dos, (fs, main) => {\n        fs.createFile(\"/home/\", \"\");\n    });\n});\n\ntest(\"js-dos-fs can create file\", (done) => {\n    const dos = Dos(document.getElementById(\"canvas\") as HTMLCanvasElement, {\n        wdosboxUrl,\n        onerror: (message) => {\n            assert.fail();\n        },\n    });\n\n    doReady(dos, (fs, main) => {\n        fs.createFile(\"/wiki/musk\", wikiElonMusk);\n        doNext(main(), (ci) => {\n            doNext(ci.shell(\"type wiki\\\\musk\"), () => {\n                compareAndExit(\"elonmusk.png\", ci, done);\n            });\n        });\n    });\n});\n\ntest(\"js-dos-fs can create file (windows path)\", (done) => {\n    const dos = Dos(document.getElementById(\"canvas\") as HTMLCanvasElement, {\n        wdosboxUrl,\n        onerror: (message) => {\n            assert.fail();\n        },\n    });\n\n    doReady(dos, (fs, main) => {\n        fs.createFile(\"C:\\\\wiki\\\\musk\", wikiElonMusk);\n        doNext(main(), (ci) => {\n            doNext(ci.shell(\"type wiki\\\\musk\"), () => {\n                compareAndExit(\"elonmusk.png\", ci, done);\n            });\n        });\n    });\n});\n\ntest(\"js-dos-fs clearing IDBFS db\", (done) => {\n    const request = indexedDB.deleteDatabase(\"/test\");\n\n    request.onerror = (event) => {\n        console.error(event);\n        assert.fail();\n    };\n\n    request.onsuccess = (event) => {\n        done();\n    };\n});\n\ntest(\"js-dos-fs can mount archive on persistent point [empty db]\", (done) => {\n    let isOnProgress = false;\n    const dos = Dos(document.getElementById(\"canvas\") as HTMLCanvasElement, {\n        wdosboxUrl,\n        onerror: (message) => {\n            assert.fail();\n        },\n        onprogress: (stage: string, total: number, loaded: number) => {\n            isOnProgress = true;\n        },\n    });\n\n    doReady(dos, (fs, main) => {\n        doNext(fs.extract(\"digger.zip\", \"/test\"), () => {\n            doNext(main(), (ci) => {\n                doNext(ci.shell(\"dir test\"), () => {\n                    assert.ok(isOnProgress);\n                    compareAndExit(\"pesistent-mount.png\", ci, done);\n                });\n            });\n        });\n    });\n});\n\ntest(\"js-dos-fs can mount archive on persistent point [existent db]\", (done) => {\n    const dos = Dos(document.getElementById(\"canvas\") as HTMLCanvasElement, {\n        wdosboxUrl,\n        onerror: (message) => {\n            assert.fail();\n        },\n        onprogress: (stage: string, total: number, loaded: number) => {\n            assert.fail();\n        },\n    });\n\n    doReady(dos, (fs, main) => {\n        doNext(fs.extract(\"digger.zip\", \"/test\"), () => {\n            doNext(main(), (ci) => {\n                doNext(ci.shell(\"dir test\"), () => {\n                    compareAndExit(\"pesistent-mount.png\", ci, done);\n                });\n            });\n        });\n    });\n});\n\nsuite(\"js-dos\");\n\ntest(\"js-dos should provide user level dosbox.conf\", (done) => {\n    const dos = Dos(document.getElementById(\"canvas\") as HTMLCanvasElement, {\n        wdosboxUrl,\n        onerror: (message) => {\n            assert.fail();\n        },\n    });\n\n    doReady(dos, (fs, main) => {\n        fs.createFile(\"dosbox.conf\", `\n        [autoexec]\n        mount c .\n        c:\n        cd HOME\n        cd WEB_USER\n        cd DOSBOX~1\n        type dosbox~1.con\n        `);\n\n        doNext(main([\"-conf\", \"dosbox.conf\"]), (ci) => {\n            compareAndExit(\"jsdos-conf.png\", ci, done);\n        });\n    });\n});\n\ntest(\"js-dos can create and read dosbox.conf\", (done) => {\n    const dos = Dos(document.getElementById(\"canvas\") as HTMLCanvasElement, {\n        wdosboxUrl,\n        onerror: (message) => {\n            assert.fail();\n        },\n    });\n\n    doReady(dos, (fs, main) => {\n        fs.createFile(\"dosbox.conf\", `\n            [autoexec]\n            mount c .\n            c:\n            type dosbox~1.con\n        `);\n        doNext(main([\"-conf\", \"dosbox.conf\"]), (ci) => {\n            compareAndExit(\"dosboxconf.png\", ci, done);\n        });\n    });\n});\n\ntest(\"js-dos can run digger.zip\", (done) => {\n    const dos = Dos(document.getElementById(\"canvas\") as HTMLCanvasElement, {\n        wdosboxUrl,\n    });\n\n    doReady(dos, (fs, main) => {\n        doNext(fs.extract(\"digger.zip\"), () => {\n            doNext(main([\"DIGGER.COM\"]), (ci) => {\n                const fn = () => {\n                    compareAndExit(\"digger.png\", ci, done);\n                    // saveImage(ci);\n                };\n\n                setTimeout(fn, 5000);\n            });\n        });\n    });\n});\n\ntest(\"js-dos can simulate key events\", (done) => {\n    const dos = Dos(document.getElementById(\"canvas\") as HTMLCanvasElement, {\n        wdosboxUrl,\n    });\n\n    doReady(dos, (fs, main) => {\n        doNext(fs.extract(\"digger.zip\"), () => {\n            doNext(main([\"DIGGER.COM\"]), (ci) => {\n                ci.simulateKeyPress(37); // left arrow\n                const fn = () => {\n                    compareAndExit(\"digger-end.png\", ci, done);\n                };\n\n                setTimeout(fn, 5000);\n            });\n        });\n    });\n});\n\nconst saveImage = (ci: DosCommandInterface) => {\n    ci.screenshot().then((data) => {\n        const w = window.open(\"about:blank\", \"image from canvas\");\n        w.document.write(\"<img src='\" + data + \"' alt='from canvas'/>\");\n    });\n};\n\nconst wikiElonMusk = `\nElon Reeve Musk FRS (/iln/; born June 28, 1971) is a\ntechnology entrepreneur and engineer.[10][11][12]\nHe holds South African, Canadian, and U.S. citizenship\nand is the founder, CEO, and lead designer of SpaceX;\n[13] co-founder, CEO, and product architect of Tesla, Inc.;\n[14] co-founder and CEO of Neuralink; and co-founder of PayPal.\nIn December 2016, he was ranked 21st on the Forbes list of\nThe World's Most Powerful People.[15] As of October 2018,\nhe has a net worth of $22.8 billion and is listed by Forbes\nas the 54th-richest person in the world.[16]\nBorn and raised in Pretoria, South Africa, Musk moved to\nCanada when he was 17 to attend Queen's University.\nHe transferred to the University of Pennsylvania two years\nlater, where he received an economics degree from\nthe Wharton School and a degree in physics from the College\nof Arts and Sciences. He began a Ph.D.\nin applied physics and material sciences at Stanford University\nin 1995 but dropped out after two days to pursue\nan entrepreneurial career. He subsequently co-founded Zip2, a\nweb software company, which was acquired by Compaq\nfor $340 million in 1999. Musk then founded X.com, an online bank.\nIt merged with Confinity in 2000 and later that\nyear became PayPal, which was bought by eBay for $1.5 billion\nin October 2002.[17][18][19][20]\n`;\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJqcy1kb3MtdHMvanMtZG9zLWJ1aWxkLnRzIiwianMtZG9zLXRzL2pzLWRvcy1jYWNoZS1kYi50cyIsImpzLWRvcy10cy9qcy1kb3MtY2FjaGUtbm9vcC50cyIsImpzLWRvcy10cy9qcy1kb3MtY2FjaGUudHMiLCJqcy1kb3MtdHMvanMtZG9zLWNpLnRzIiwianMtZG9zLXRzL2pzLWRvcy1jb25mLnRzIiwianMtZG9zLXRzL2pzLWRvcy1kb20udHMiLCJqcy1kb3MtdHMvanMtZG9zLWZzLnRzIiwianMtZG9zLXRzL2pzLWRvcy1ob3N0LnRzIiwianMtZG9zLXRzL2pzLWRvcy1tb2R1bGUudHMiLCJqcy1kb3MtdHMvanMtZG9zLW9wdGlvbnMudHMiLCJqcy1kb3MtdHMvanMtZG9zLXVpLnRzIiwianMtZG9zLXRzL2pzLWRvcy14aHIudHMiLCJqcy1kb3MtdHMvanMtZG9zLnRzIiwibm9kZV9tb2R1bGVzL2Fzc2VydC9hc3NlcnQuanMiLCJub2RlX21vZHVsZXMvYXNzZXJ0L25vZGVfbW9kdWxlcy9pbmhlcml0cy9pbmhlcml0c19icm93c2VyLmpzIiwibm9kZV9tb2R1bGVzL2Fzc2VydC9ub2RlX21vZHVsZXMvdXRpbC9zdXBwb3J0L2lzQnVmZmVyQnJvd3Nlci5qcyIsIm5vZGVfbW9kdWxlcy9hc3NlcnQvbm9kZV9tb2R1bGVzL3V0aWwvdXRpbC5qcyIsIm5vZGVfbW9kdWxlcy9wcm9jZXNzL2Jyb3dzZXIuanMiLCJ0ZXN0L2NvbXBhcmUudHMiLCJ0ZXN0L2RvLnRzIiwidGVzdC90ZXN0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOztBQ0FBO0FBQ0E7QUFDQTs7O0FBRWEsUUFBQSxLQUFBLEdBQVE7QUFDakIsYUFBUyw0Q0FEUTtBQUVqQixlQUFXLDBDQUZNO0FBR2pCLGdCQUFhLE1BSEk7QUFJakIsaUJBQWEsa0NBSkk7QUFLakIsY0FBVSxPQUxPO0FBTWpCLFlBQVM7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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FDMWVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN2QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FDMWtCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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QW9CLEVBQXBCLEVBRDRCLENBQ0g7QUFDekIsb0JBQU0sS0FBSyxTQUFMLEVBQUssR0FBQTtBQUNQLDhCQUFBLGNBQUEsQ0FBZSxnQkFBZixFQUFpQyxFQUFqQyxFQUFxQyxJQUFyQztBQUNILGlCQUZEO0FBSUEsMkJBQVcsRUFBWCxFQUFlLElBQWY7QUFDSCxhQVBEO0FBUUgsU0FURDtBQVVILEtBWEQ7QUFZSCxDQWpCRDtBQW1CQSxJQUFNLFlBQVksU0FBWixTQUFZLENBQUMsRUFBRCxFQUF3QjtBQUN0QyxPQUFHLFVBQUgsR0FBZ0IsSUFBaEIsQ0FBcUIsVUFBQyxJQUFELEVBQUs7QUFDdEIsWUFBTSxJQUFJLE9BQU8sSUFBUCxDQUFZLGFBQVosRUFBMkIsbUJBQTNCLENBQVY7QUFDQSxVQUFFLFFBQUYsQ0FBVyxLQUFYLENBQWlCLGVBQWUsSUFBZixHQUFzQix1QkFBdkM7QUFDSCxLQUhEO0FBSUgsQ0FMRDtBQU9BLElBQU0sZUFBZSw2MENBQXJCIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwiLy8gQXV0b2dlbmVyYXRlZFxuLy8gLS0tLS0tLS0tLS0tLVxuLy8gZ3VscGZpbGUuanMgLS0+IGdlbmVyYXRlQnVpbGRJbmZvXG5cbmV4cG9ydCBjb25zdCBCdWlsZCA9IHtcbiAgICB2ZXJzaW9uOiBcIjYuMjIuNDEgKDIyM2ViZjJkMTg5M2NkNWZjOTMxMTQ5YWRhMzc3NjQyKVwiLFxuICAgIGpzVmVyc2lvbjogXCJkYjZhNWRhOWRiOTM4MjljMjI2NWZjMzJmZDYxYzM4YTg0ZmY3NWQ0XCIsXG4gICAgd2FzbUpzU2l6ZTogIDE5OTY2MCxcbiAgICB3YXNtVmVyc2lvbjogXCJhYjFlNWRmZDBhNWFhMzVhMGJhODA2ZDVlMmM4YjNlYlwiLFxuICAgIHdhc21TaXplOiAxODA5MTM1LFxuICAgIGpzU2l6ZTogIDYzNTI3NzksXG59O1xuIiwiaW1wb3J0IHsgSUNhY2hlIH0gZnJvbSBcIi4vanMtZG9zLWNhY2hlXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENhY2hlRGIgaW1wbGVtZW50cyBJQ2FjaGUge1xuXG4gICAgcHVibGljIHZlcnNpb246IHN0cmluZztcbiAgICBwcml2YXRlIHN0b3JlTmFtZTogc3RyaW5nID0gXCJmaWxlc1wiO1xuICAgIHByaXZhdGUgaW5kZXhlZERCOiBJREJGYWN0b3J5O1xuICAgIHByaXZhdGUgZGI6IElEQkRhdGFiYXNlIHwgbnVsbCA9IG51bGw7XG5cbiAgICBjb25zdHJ1Y3Rvcih2ZXJzaW9uOiBzdHJpbmcsIG9ucmVhZHk6IChjYWNoZTogSUNhY2hlKSA9PiB2b2lkLCBvbmVycm9yOiAobXNnOiBzdHJpbmcpID0+IHZvaWQpIHtcbiAgICAgICAgdGhpcy52ZXJzaW9uID0gdmVyc2lvbjtcbiAgICAgICAgdGhpcy5pbmRleGVkREIgPSB3aW5kb3cuaW5kZXhlZERCIHx8ICh3aW5kb3cgYXMgYW55KS5tb3pJbmRleGVkREJcbiAgICAgICAgICAgIHx8ICh3aW5kb3cgYXMgYW55KS53ZWJraXRJbmRleGVkREIgfHwgKHdpbmRvdyBhcyBhbnkpLm1zSW5kZXhlZERCO1xuXG4gICAgICAgIGlmICghdGhpcy5pbmRleGVkREIpIHtcbiAgICAgICAgICAgIG9uZXJyb3IoXCJJbmRleGVkIGRiIGlzIG5vdCBzdXBwb3J0ZWQgb24gdGhpcyBob3N0XCIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgb3BlblJlcXVlc3QgPSB0aGlzLmluZGV4ZWREQi5vcGVuKFwianMtZG9zLWNhY2hlIChcIiArIHZlcnNpb24gKyBcIilcIiwgMSk7XG4gICAgICAgIG9wZW5SZXF1ZXN0Lm9uZXJyb3IgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIG9uZXJyb3IoXCJDYW4ndCBvcGVuIGNhY2hlIGRhdGFiYXNlXCIpO1xuICAgICAgICB9O1xuICAgICAgICBvcGVuUmVxdWVzdC5vbnN1Y2Nlc3MgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZGIgPSBvcGVuUmVxdWVzdC5yZXN1bHQ7XG4gICAgICAgICAgICBvbnJlYWR5KHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBvcGVuUmVxdWVzdC5vbnVwZ3JhZGVuZWVkZWQgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kYiA9IG9wZW5SZXF1ZXN0LnJlc3VsdDtcbiAgICAgICAgICAgICAgICB0aGlzLmRiLm9uZXJyb3IgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgb25lcnJvcihcIkNhbid0IHVwZ3JhZGUgY2FjaGUgZGF0YWJhc2VcIik7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIHRoaXMuZGIuY3JlYXRlT2JqZWN0U3RvcmUodGhpcy5zdG9yZU5hbWUpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIG9uZXJyb3IoXCJDYW4ndCB1cGdyYWRlIGNhY2hlIGRhdGFiYXNlXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHB1YmxpYyBwdXQoa2V5OiBzdHJpbmcsIGRhdGE6IGFueSwgb25mbHVzaDogKCkgPT4gdm9pZCkge1xuICAgICAgICBpZiAodGhpcy5kYiA9PT0gbnVsbCkge1xuICAgICAgICAgICAgb25mbHVzaCgpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgdHJhbnNhY3Rpb24gPSB0aGlzLmRiLnRyYW5zYWN0aW9uKHRoaXMuc3RvcmVOYW1lLCBcInJlYWR3cml0ZVwiKTtcbiAgICAgICAgdHJhbnNhY3Rpb24ub25jb21wbGV0ZSA9ICgpID0+IG9uZmx1c2goKTtcbiAgICAgICAgdHJhbnNhY3Rpb24ub2JqZWN0U3RvcmUodGhpcy5zdG9yZU5hbWUpLnB1dChkYXRhLCBrZXkpO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXQoa2V5OiBzdHJpbmcsIG9uZGF0YTogKGRhdGE6IGFueSkgPT4gdm9pZCwgb25lcnJvcjogKG1zZzogc3RyaW5nKSA9PiB2b2lkKSB7XG4gICAgICAgIGlmICh0aGlzLmRiID09PSBudWxsKSB7XG4gICAgICAgICAgICBvbmVycm9yKFwiZGIgaXMgbm90IGluaXRhbGl6ZWRcIik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB0cmFuc2FjdGlvbiA9IHRoaXMuZGIudHJhbnNhY3Rpb24odGhpcy5zdG9yZU5hbWUsIFwicmVhZG9ubHlcIik7XG4gICAgICAgIGNvbnN0IHJlcXVlc3QgPSB0cmFuc2FjdGlvbi5vYmplY3RTdG9yZSh0aGlzLnN0b3JlTmFtZSkuZ2V0KGtleSk7XG4gICAgICAgIHJlcXVlc3Qub25lcnJvciA9ICgpID0+IG9uZXJyb3IoXCJDYW4ndCByZWFkIHZhbHVlIGZvciBrZXkgJ1wiICsga2V5ICsgXCInXCIpO1xuICAgICAgICByZXF1ZXN0Lm9uc3VjY2VzcyA9ICgpID0+IHtcbiAgICAgICAgICAgIGlmIChyZXF1ZXN0LnJlc3VsdCkge1xuICAgICAgICAgICAgICAgIG9uZGF0YShyZXF1ZXN0LnJlc3VsdCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG9uZXJyb3IoXCJSZXN1bHQgaXMgZW1wdHkgZm9yIGtleSAnXCIgKyBrZXkgKyBcIicsIHJlc3VsdDogXCIgKyByZXF1ZXN0LnJlc3VsdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcHVibGljIGZvckVhY2goZWFjaDogKGtleTogc3RyaW5nLCB2YWx1ZTogYW55KSA9PiB2b2lkLCBvbmVuZDogKCkgPT4gdm9pZCkge1xuICAgICAgICBpZiAodGhpcy5kYiA9PT0gbnVsbCkge1xuICAgICAgICAgICAgb25lbmQoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHRyYW5zYWN0aW9uID0gdGhpcy5kYi50cmFuc2FjdGlvbih0aGlzLnN0b3JlTmFtZSwgXCJyZWFkb25seVwiKTtcbiAgICAgICAgY29uc3QgcmVxdWVzdCA9IHRyYW5zYWN0aW9uLm9iamVjdFN0b3JlKHRoaXMuc3RvcmVOYW1lKS5vcGVuQ3Vyc29yKCk7XG4gICAgICAgIHJlcXVlc3Qub25lcnJvciA9ICgpID0+IG9uZW5kKCk7XG4gICAgICAgIHJlcXVlc3Qub25zdWNjZXNzID0gKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjdXJzb3IgPSAoZXZlbnQudGFyZ2V0IGFzIGFueSkucmVzdWx0IGFzIElEQkN1cnNvcldpdGhWYWx1ZTtcbiAgICAgICAgICAgIGlmIChjdXJzb3IpIHtcbiAgICAgICAgICAgICAgICBlYWNoKGN1cnNvci5rZXkudG9TdHJpbmcoKSwgY3Vyc29yLnZhbHVlKTtcbiAgICAgICAgICAgICAgICBjdXJzb3IuY29udGludWUoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgb25lbmQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBJQ2FjaGUgfSBmcm9tIFwiLi9qcy1kb3MtY2FjaGVcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FjaGVOb29wIGltcGxlbWVudHMgSUNhY2hlIHtcbiAgICBwdWJsaWMgcHV0KGtleTogc3RyaW5nLCBkYXRhOiBhbnksIG9uZmx1c2g6ICgpID0+IHZvaWQpIHtcbiAgICAgICAgLy8gbm90aGluZ1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXQoa2V5OiBzdHJpbmcsIG9uZGF0YTogKGRhdGE6IGFueSkgPT4gdm9pZCwgb25lcnJvcjogKG1zZzogc3RyaW5nKSA9PiB2b2lkKSB7XG4gICAgICAgIG9uZXJyb3IoXCJDYWNoZSBpcyBub3Qgc3VwcG9ydGVkIG9uIHRoaXMgaG9zdFwiKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZm9yRWFjaChlYWNoOiAoa2V5OiBzdHJpbmcsIHZhbHVlOiBhbnkpID0+IHZvaWQsIG9uZW5kOiAoKSA9PiB2b2lkKSB7XG4gICAgICAgIG9uZW5kKCk7XG4gICAgfVxufVxuIiwiaW1wb3J0IENhY2hlRGIgZnJvbSBcIi4vanMtZG9zLWNhY2hlLWRiXCI7XG5pbXBvcnQgQ2FjaGVOb29wIGZyb20gXCIuL2pzLWRvcy1jYWNoZS1ub29wXCI7XG5pbXBvcnQgeyBEb3NNb2R1bGUgfSBmcm9tIFwiLi9qcy1kb3MtbW9kdWxlXCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUNhY2hlIHtcbiAgICBwdXQ6IChrZXk6IHN0cmluZywgZGF0YTogYW55LCBvbmZsdXNoOiAoKSA9PiB2b2lkKSA9PiB2b2lkO1xuICAgIGdldDogKGtleTogc3RyaW5nLCBvbmRhdGE6IChkYXRhOiBhbnkpID0+IHZvaWQsIG9uZXJyb3I6IChtc2c6IHN0cmluZykgPT4gdm9pZCkgPT4gdm9pZDtcbiAgICBmb3JFYWNoOiAoZWFjaDogKGtleTogc3RyaW5nLCB2YWx1ZTogYW55KSA9PiB2b2lkLCBvbmVuZDogKCkgPT4gdm9pZCkgPT4gdm9pZDtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gb3BlbkNhY2hlKG1vZHVsZTogRG9zTW9kdWxlLCBvbnJlYWR5OiAoY2FjaGU6IElDYWNoZSkgPT4gdm9pZCkge1xuICAgIG5ldyBDYWNoZURiKG1vZHVsZS52ZXJzaW9uLCBvbnJlYWR5LCAobXNnOiBzdHJpbmcpID0+IHtcbiAgICAgICAgaWYgKG1vZHVsZS5sb2cgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgbW9kdWxlLmxvZyhcIkVSUiEgQ2FuJ3QgaW5pdGFsaXplIGNhY2hlLCBjYXVzZTogXCIgKyBtc2cpO1xuICAgICAgICB9XG4gICAgICAgIG9ucmVhZHkobmV3IENhY2hlTm9vcCgpKTtcbiAgICB9KTtcbn1cbiIsIi8vICMgRG9zQ29tbWFuZEludGVyZmFjZVxuLy8gSXMgYWJzdHJhY3Rpb24gdGhhdCBhbGxvd3MgeW91IHRvIGNvbnRyb2wgcnVubmVkIGluc3RhbmNlIG9mIGpzLWRvc1xuaW1wb3J0IHsgRG9zTW9kdWxlIH0gZnJvbSBcIi4vanMtZG9zLW1vZHVsZVwiO1xuXG5leHBvcnQgY2xhc3MgRG9zQ29tbWFuZEludGVyZmFjZSB7XG4gICAgcHVibGljIGRvczogRG9zTW9kdWxlO1xuICAgIHByaXZhdGUgZW06IGFueTsgLy8gdHlwZW9mIE1vZHVsZTtcbiAgICBwcml2YXRlIGFwaTogTG93TGV2ZWxBcGk7XG4gICAgcHJpdmF0ZSBvbnJlYWR5OiAoY2k6IERvc0NvbW1hbmRJbnRlcmZhY2UpID0+IHZvaWQ7XG5cbiAgICBwcml2YXRlIHNoZWxsSW5wdXRRdWV1ZTogc3RyaW5nW10gPSBbXTtcbiAgICBwcml2YXRlIHNoZWxsSW5wdXRDbGllbnRzOiBBcnJheTwoKSA9PiB2b2lkPiA9IFtdO1xuXG4gICAgY29uc3RydWN0b3IoZG9zOiBEb3NNb2R1bGUsIG9ucmVhZHk6IChjaTogRG9zQ29tbWFuZEludGVyZmFjZSkgPT4gdm9pZCkge1xuICAgICAgICB0aGlzLmRvcyA9IGRvcztcbiAgICAgICAgdGhpcy5lbSA9IChkb3MgYXMgYW55KTtcbiAgICAgICAgdGhpcy5hcGkgPSAoZG9zIGFzIGFueSk7XG4gICAgICAgIHRoaXMuYXBpLnBpbmcgPSAobXNnOiBzdHJpbmcsIC4uLmFyZ3M6IGFueVtdKSA9PiB7XG4gICAgICAgICAgICB0aGlzLm9ucGluZyhtc2csIGFyZ3MpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLm9ucmVhZHkgPSBvbnJlYWR5O1xuICAgIH1cblxuICAgIC8vICogYHdpZHRoKClgIC0gcmV0dXJuIGRvc2JveCB3aW5kb3cgd2lkdGggaW4gcGl4ZWxzXG4gICAgcHVibGljIHdpZHRoKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kb3MuY2FudmFzLndpZHRoO1xuICAgIH1cblxuICAgIC8vICogYGhlaWdodCgpYCAtIHJldHVybiBkb3Nib3ggd2luZG93IGhlaWdodCBpbiBwaXhlbHNcbiAgICBwdWJsaWMgaGVpZ2h0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kb3MuY2FudmFzLmhlaWdodDtcbiAgICB9XG5cbiAgICAvLyAqIGBmdWxsc2NyZWVuKClgIC0gZW50ZXJzIGZ1bGxzY3JlZW4gbW9kZVxuICAgIC8vIFRoaXMgZnVuY3Rpb24gY2FuIGJlIGNhbGxlZCBhbnl3aGVyZSwgYnV0IGZvciB3ZWIgc2VjdXJpdHkgcmVhc29ucyBpdHMgYXNzb2NpYXRlZCByZXF1ZXN0IGNhbiBvbmx5IGJlIHJhaXNlZFxuICAgIC8vIGluc2lkZSB0aGUgZXZlbnQgaGFuZGxlciBmb3IgYSB1c2VyLWdlbmVyYXRlZCBldmVudCAoZm9yIGV4YW1wbGUgYSBrZXksIG1vdXNlIG9yIHRvdWNoIHByZXNzL3JlbGVhc2UpLlxuICAgIHB1YmxpYyBmdWxsc2NyZWVuKCkge1xuICAgICAgICB0aGlzLmRvcy5jYW52YXMucmVxdWVzdEZ1bGxzY3JlZW4oKVxuICAgIH1cblxuICAgIC8vICogYHNoZWxsKFtjbWQxLCBjbWQyLCAuLi5dKWAgLSBleGVjdXRlcyBwYXNzZWQgY29tbWFuZHNcbiAgICAvLyBpbiBkb3Nib3ggc2hlbGwgaWYgaXQncyBydW5uZWQsIHJldHVybnMgUHJvbWlzZSB0aGF0XG4gICAgLy8gcmVzb2x2ZXMgd2hlbiBjb21tYW5kcyBzZXF1ZW5jZSBpcyBleGVjdXRlZFxuICAgIHB1YmxpYyBzaGVsbCguLi5jbWQ6IHN0cmluZ1tdKSB7XG4gICAgICAgIGlmIChjbWQubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5zaGVsbElucHV0Q2xpZW50cy5wdXNoKHJlc29sdmUpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBuZXh0IG9mIGNtZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2hlbGxJbnB1dFF1ZXVlLnB1c2gobmV4dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnJlcXVlc3RTaGVsbElucHV0KCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vICogYHNjcmVlbnNob3QoKWAgLSBnZXQgc2NyZW5zaG90IG9mIGNhbnZhcyBhcyBJbWFnZURhdGFcbiAgICBwdWJsaWMgc2NyZWVuc2hvdCgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmFwaS5zZW5kKFwic2NyZWVuc2hvdFwiLCBcIlwiLCAoZGF0YSkgPT4ge1xuICAgICAgICAgICAgICAgIHJlc29sdmUoZGF0YSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gKiBgZXhpdCgpYCAtIGltbWVkaWF0ZWx5IGV4aXQgZnJvbSBydW50aW1lXG4gICAgcHVibGljIGV4aXQoKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGlzLmRvcy50ZXJtaW5hdGUoKTtcbiAgICAgICAgICAgIHRoaXMuYXBpLnNlbmQoXCJleGl0XCIpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuZG9zLmVycm9yKFwiUnVudGltZSBpcyBzdGlsbCBhbGl2ZSFcIik7XG4gICAgICAgIHJldHVybiAtMTtcbiAgICB9XG5cbiAgICAvLyAqIGBzaW11bGF0ZUtleUV2ZW50KGtleUNvZGUsIHByZXNzZWQpYCAtIGFsbG93cyB0byBzaW11bGF0ZSBrZXkgcHJlc3MgT1IgcmVsZWFzZSBvbiBqcy1kb3MgY2FudmFzXG4gICAgcHVibGljIHNpbXVsYXRlS2V5RXZlbnQoa2V5Q29kZTogbnVtYmVyLCBwcmVzc2VkOiBib29sZWFuKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IG5hbWUgPSBwcmVzc2VkID8gXCJrZXlkb3duXCIgOiBcImtleXVwXCI7XG4gICAgICAgIGNvbnN0IGV2ZW50ID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoXCJLZXlib2FyZEV2ZW50XCIpIGFzIGFueTtcbiAgICAgICAgY29uc3QgZ2V0dGVyOiBhbnkgPSB7XG4gICAgICAgICAgICBnZXQoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMua2V5Q29kZVZhbDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gQ2hyb21pdW0gSGFja1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXZlbnQsIFwia2V5Q29kZVwiLCBnZXR0ZXIpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXZlbnQsIFwid2hpY2hcIiwgZ2V0dGVyKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV2ZW50LCBcImNoYXJDb2RlXCIsIGdldHRlcik7XG5cbiAgICAgICAgZXZlbnQuaW5pdEtleWJvYXJkRXZlbnRcbiAgICAgICAgPyBldmVudC5pbml0S2V5Ym9hcmRFdmVudChuYW1lLCB0cnVlLCB0cnVlLCBkb2N1bWVudC5kZWZhdWx0VmlldywgZmFsc2UsIGZhbHNlLCBmYWxzZSwgZmFsc2UsIGtleUNvZGUsIGtleUNvZGUpXG4gICAgICAgIDogZXZlbnQuaW5pdEtleUV2ZW50KG5hbWUsIHRydWUsIHRydWUsIGRvY3VtZW50LmRlZmF1bHRWaWV3LCBmYWxzZSwgZmFsc2UsIGZhbHNlLCBmYWxzZSwga2V5Q29kZSwgMCk7XG5cbiAgICAgICAgZXZlbnQua2V5Q29kZVZhbCA9IGtleUNvZGU7XG4gICAgICAgIHRoaXMuZG9zLmNhbnZhcyAmJiB0aGlzLmRvcy5jYW52YXMuZGlzcGF0Y2hFdmVudChldmVudCk7XG4gICAgfVxuXG4gICAgLy8gKiBgc2ltdWxhdGVLZXlQcmVzcyhrZXlDb2RlKWAgLSBhbGxvd3MgdG8gc2ltdWxhdGUga2V5IHByZXNzIEFORCByZWxlYXNlIG9uIGpzLWRvcyBjYW52YXNcbiAgICBwdWJsaWMgc2ltdWxhdGVLZXlQcmVzcyhrZXlDb2RlOiBudW1iZXIpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5zaW11bGF0ZUtleUV2ZW50KGtleUNvZGUsIHRydWUpO1xuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHRoaXMuc2ltdWxhdGVLZXlFdmVudChrZXlDb2RlLCBmYWxzZSksIDEwMCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzZW5kS2V5UHJlc3MoY29kZTogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMuYXBpLnNlbmQoXCJzZGxfa2V5X2V2ZW50XCIsIGNvZGUgKyBcIlwiKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlcXVlc3RTaGVsbElucHV0KCkge1xuICAgICAgICB0aGlzLnNlbmRLZXlQcmVzcygxMyk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBvbnBpbmcobXNnOiBzdHJpbmcsIGFyZ3M6IGFueVtdKSB7XG4gICAgICAgIHN3aXRjaCAobXNnKSB7XG4gICAgICAgICAgICBjYXNlIFwicmVhZHlcIjpcbiAgICAgICAgICAgICAgICB0aGlzLm9ucmVhZHkodGhpcyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiZnJhbWVcIjpcbiAgICAgICAgICAgICAgICB0aGlzLm9uZnJhbWUoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJzaGVsbF9pbnB1dFwiOlxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNoZWxsSW5wdXRRdWV1ZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGNvbnN0IGJ1ZmZlcjogbnVtYmVyID0gYXJnc1swXTtcbiAgICAgICAgICAgICAgICBjb25zdCBtYXhMZW5ndGg6IG51bWJlciA9IGFyZ3NbMV07XG5cbiAgICAgICAgICAgICAgICBjb25zdCBjbWQgPSB0aGlzLnNoZWxsSW5wdXRRdWV1ZS5zaGlmdCgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNtZExlbmd0aCA9IHRoaXMuZW0ubGVuZ3RoQnl0ZXNVVEY4KGNtZCkgKyAxO1xuXG4gICAgICAgICAgICAgICAgaWYgKGNtZExlbmd0aCA+IG1heExlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5kb3Mub25lcnJvciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRvcy5vbmVycm9yKFwiQ2FuJ3QgZXhlY3V0ZSBjbWQgJ1wiICsgY21kICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIicsIGJlY2F1c2UgaXQncyBiaWdnZXIgdGhlbiBtYXggY21kIGxlbmd0aCBcIiArIG1heExlbmd0aCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRoaXMuZW0uc3RyaW5nVG9VVEY4KGNtZCwgYnVmZmVyLCBjbWRMZW5ndGgpO1xuXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2hlbGxJbnB1dFF1ZXVlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHJlc29sdmUgb2YgdGhpcy5zaGVsbElucHV0Q2xpZW50cykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hlbGxJbnB1dENsaWVudHMgPSBbXTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlcXVlc3RTaGVsbElucHV0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIC8qIGRvIG5vdGhpbmcgKi9cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgb25mcmFtZSgpIHtcbiAgICAgICAgdGhpcy5kb3MudGljaygpO1xuICAgIH1cbn1cblxuaW50ZXJmYWNlIExvd0xldmVsQXBpIHtcbiAgICBzZW5kOiAoZXZlbnQ6IHN0cmluZywgbXNnPzogYW55LCBjYWxsYmFjaz86IChtc2c6IHN0cmluZykgPT4gdm9pZCkgPT4gdm9pZDtcbiAgICBwaW5nOiAobXNnOiBzdHJpbmcpID0+IHZvaWQ7XG59XG4iLCJpbXBvcnQgeyBEb3NCb3hDb25maWcsIERvc0JveENvbmZpZ0RlZmF1bHRzIH0gZnJvbSBcIi4vanMtZG9zLW9wdGlvbnNcIjtcblxuLy8gIyBqcy1kb3MgZGVmYXVsdCBjb25maWdcbi8vIFRoaXMgaXMgZGVmYXVsdCBjb25maWcgZm9yIGRvc2JveCB0aGF0IGFwcGxpZXMgZm9yIGFsbCBydW5zLlxuXG4vLyBJdCdzIGNvbmZpZ3VyYWJsZSB0aHJvdWdoIFtvcHRpb25zXShodHRwczovL2pzLWRvcy5jb20vNi4yMi9kb2NzL2FwaS9nZW5lcmF0ZS5odG1sP3BhZ2U9anMtZG9zLW9wdGlvbnMpXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBnZXRKc0Rvc0NvbmZpZyhjb25maWc6IERvc0JveENvbmZpZyk6IHN0cmluZyB7XG4gICAgbGV0IGNvbmYgPSBqc2Rvc2NvbmY7XG4gICAgZnVuY3Rpb24gdXBkYXRlKHBsYWNlaG9sZGVyOiBzdHJpbmcpIHtcbiAgICAgICAgY29uZiA9IGNvbmYucmVwbGFjZShcIiVcIiArIHBsYWNlaG9sZGVyICsgXCIlXCIsXG4gICAgICAgICAgICAoKGNvbmZpZyBhcyBhbnkpW3BsYWNlaG9sZGVyXSB8fCAoRG9zQm94Q29uZmlnRGVmYXVsdHMgYXMgYW55KVtwbGFjZWhvbGRlcl0pICsgXCJcIik7XG4gICAgfVxuICAgIE9iamVjdC5rZXlzKERvc0JveENvbmZpZ0RlZmF1bHRzKS5mb3JFYWNoKChuYW1lKSA9PiB1cGRhdGUobmFtZSkpO1xuICAgIHJldHVybiBjb25mO1xufVxuXG4vKiB0c2xpbnQ6ZGlzYWJsZTptYXgtbGluZS1sZW5ndGggKi9cbmNvbnN0IGpzZG9zY29uZiA9IGBcbiMgVGhpcyBpcyB0aGUgY29uZmlndXJhdGlvbmZpbGUgZm9yIERPU0JveCAwLjc0LiAoUGxlYXNlIHVzZSB0aGUgbGF0ZXN0IHZlcnNpb24gb2YgRE9TQm94KVxuIyBMaW5lcyBzdGFydGluZyB3aXRoIGEgIyBhcmUgY29tbWVudGxpbmVzIGFuZCBhcmUgaWdub3JlZCBieSBET1NCb3guXG4jIFRoZXkgYXJlIHVzZWQgdG8gKGJyaWVmbHkpIGRvY3VtZW50IHRoZSBlZmZlY3Qgb2YgZWFjaCBvcHRpb24uXG5cbltzZGxdXG4jICAgICAgIGZ1bGxzY3JlZW46IFN0YXJ0IGRvc2JveCBkaXJlY3RseSBpbiBmdWxsc2NyZWVuLiAoUHJlc3MgQUxULUVudGVyIHRvIGdvIGJhY2spXG4jICAgICAgIGZ1bGxkb3VibGU6IFVzZSBkb3VibGUgYnVmZmVyaW5nIGluIGZ1bGxzY3JlZW4uIEl0IGNhbiByZWR1Y2Ugc2NyZWVuIGZsaWNrZXJpbmcsIGJ1dCBpdCBjYW4gYWxzbyByZXN1bHQgaW4gYSBzbG93IERPU0JveC5cbiMgICBmdWxscmVzb2x1dGlvbjogV2hhdCByZXNvbHV0aW9uIHRvIHVzZSBmb3IgZnVsbHNjcmVlbjogb3JpZ2luYWwgb3IgZml4ZWQgc2l6ZSAoZS5nLiAxMDI0eDc2OCkuXG4jICAgICAgICAgICAgICAgICAgICAgVXNpbmcgeW91ciBtb25pdG9yJ3MgbmF0aXZlIHJlc29sdXRpb24gd2l0aCBhc3BlY3Q9dHJ1ZSBtaWdodCBnaXZlIHRoZSBiZXN0IHJlc3VsdHMuXG4jICAgICAgICAgICAgICAgICAgICAgSWYgeW91IGVuZCB1cCB3aXRoIHNtYWxsIHdpbmRvdyBvbiBhIGxhcmdlIHNjcmVlbiwgdHJ5IGFuIG91dHB1dCBkaWZmZXJlbnQgZnJvbSBzdXJmYWNlLlxuIyB3aW5kb3dyZXNvbHV0aW9uOiBTY2FsZSB0aGUgd2luZG93IHRvIHRoaXMgc2l6ZSBJRiB0aGUgb3V0cHV0IGRldmljZSBzdXBwb3J0cyBoYXJkd2FyZSBzY2FsaW5nLlxuIyAgICAgICAgICAgICAgICAgICAgIChvdXRwdXQ9c3VyZmFjZSBkb2VzIG5vdCEpXG4jICAgICAgICAgICBvdXRwdXQ6IFdoYXQgdmlkZW8gc3lzdGVtIHRvIHVzZSBmb3Igb3V0cHV0LlxuIyAgICAgICAgICAgICAgICAgICBQb3NzaWJsZSB2YWx1ZXM6IHN1cmZhY2UsIG92ZXJsYXksIG9wZW5nbCwgb3BlbmdsbmIuXG4jICAgICAgICAgYXV0b2xvY2s6IE1vdXNlIHdpbGwgYXV0b21hdGljYWxseSBsb2NrLCBpZiB5b3UgY2xpY2sgb24gdGhlIHNjcmVlbi4gKFByZXNzIENUUkwtRjEwIHRvIHVubG9jaylcbiMgICAgICBzZW5zaXRpdml0eTogTW91c2Ugc2Vuc2l0aXZpdHkuXG4jICAgICAgd2FpdG9uZXJyb3I6IFdhaXQgYmVmb3JlIGNsb3NpbmcgdGhlIGNvbnNvbGUgaWYgZG9zYm94IGhhcyBhbiBlcnJvci5cbiMgICAgICAgICBwcmlvcml0eTogUHJpb3JpdHkgbGV2ZWxzIGZvciBkb3Nib3guIFNlY29uZCBlbnRyeSBiZWhpbmQgdGhlIGNvbW1hIGlzIGZvciB3aGVuIGRvc2JveCBpcyBub3QgZm9jdXNlZC9taW5pbWl6ZWQuXG4jICAgICAgICAgICAgICAgICAgICAgcGF1c2UgaXMgb25seSB2YWxpZCBmb3IgdGhlIHNlY29uZCBlbnRyeS5cbiMgICAgICAgICAgICAgICAgICAgUG9zc2libGUgdmFsdWVzOiBsb3dlc3QsIGxvd2VyLCBub3JtYWwsIGhpZ2hlciwgaGlnaGVzdCwgcGF1c2UuXG4jICAgICAgIG1hcHBlcmZpbGU6IEZpbGUgdXNlZCB0byBsb2FkL3NhdmUgdGhlIGtleS9ldmVudCBtYXBwaW5ncyBmcm9tLiBSZXNldG1hcHBlciBvbmx5IHdvcmtzIHdpdGggdGhlIGRlZmF1bCB2YWx1ZS5cbiMgICAgIHVzZXNjYW5jb2RlczogQXZvaWQgdXNhZ2Ugb2Ygc3lta2V5cywgbWlnaHQgbm90IHdvcmsgb24gYWxsIG9wZXJhdGluZyBzeXN0ZW1zLlxuXG5mdWxsc2NyZWVuPWZhbHNlXG5mdWxsZG91YmxlPWZhbHNlXG5mdWxscmVzb2x1dGlvbj1vcmlnaW5hbFxud2luZG93cmVzb2x1dGlvbj1vcmlnaW5hbFxub3V0cHV0PXN1cmZhY2VcbmF1dG9sb2NrPSVhdXRvbG9jayVcbnNlbnNpdGl2aXR5PTEwMFxud2FpdG9uZXJyb3I9dHJ1ZVxucHJpb3JpdHk9aGlnaGVyLG5vcm1hbFxubWFwcGVyZmlsZT1tYXBwZXItanNkb3MubWFwXG51c2VzY2FuY29kZXM9dHJ1ZVxudnN5bmM9ZmFsc2VcblxuW2Rvc2JveF1cbiMgbGFuZ3VhZ2U6IFNlbGVjdCBhbm90aGVyIGxhbmd1YWdlIGZpbGUuXG4jICBtYWNoaW5lOiBUaGUgdHlwZSBvZiBtYWNoaW5lIHRyaWVzIHRvIGVtdWxhdGUuXG4jICAgICAgICAgICBQb3NzaWJsZSB2YWx1ZXM6IGhlcmN1bGVzLCBjZ2EsIHRhbmR5LCBwY2pyLCBlZ2EsIHZnYW9ubHksIHN2Z2FfczMsIHN2Z2FfZXQzMDAwLCBzdmdhX2V0NDAwMCwgc3ZnYV9wYXJhZGlzZSwgdmVzYV9ub2xmYiwgdmVzYV9vbGR2YmUuXG4jIGNhcHR1cmVzOiBEaXJlY3Rvcnkgd2hlcmUgdGhpbmdzIGxpa2Ugd2F2ZSwgbWlkaSwgc2NyZWVuc2hvdCBnZXQgY2FwdHVyZWQuXG4jICBtZW1zaXplOiBBbW91bnQgb2YgbWVtb3J5IERPU0JveCBoYXMgaW4gbWVnYWJ5dGVzLlxuIyAgICAgICAgICAgICBUaGlzIHZhbHVlIGlzIGJlc3QgbGVmdCBhdCBpdHMgZGVmYXVsdCB0byBhdm9pZCBwcm9ibGVtcyB3aXRoIHNvbWUgZ2FtZXMsXG4jICAgICAgICAgICAgIHRob3VnaCBmZXcgZ2FtZXMgbWlnaHQgcmVxdWlyZSBhIGhpZ2hlciB2YWx1ZS5cbiMgICAgICAgICAgICAgVGhlcmUgaXMgZ2VuZXJhbGx5IG5vIHNwZWVkIGFkdmFudGFnZSB3aGVuIHJhaXNpbmcgdGhpcyB2YWx1ZS5cblxubGFuZ3VhZ2U9XG5tYWNoaW5lPXN2Z2FfczNcbmNhcHR1cmVzPWNhcHR1cmVcbm1lbXNpemU9MTZcblxuW3JlbmRlcl1cbiMgZnJhbWVza2lwOiBIb3cgbWFueSBmcmFtZXMgRE9TQm94IHNraXBzIGJlZm9yZSBkcmF3aW5nIG9uZS5cbiMgICAgYXNwZWN0OiBEbyBhc3BlY3QgY29ycmVjdGlvbiwgaWYgeW91ciBvdXRwdXQgbWV0aG9kIGRvZXNuJ3Qgc3VwcG9ydCBzY2FsaW5nIHRoaXMgY2FuIHNsb3cgdGhpbmdzIGRvd24hLlxuIyAgICBzY2FsZXI6IFNjYWxlciB1c2VkIHRvIGVubGFyZ2UvZW5oYW5jZSBsb3cgcmVzb2x1dGlvbiBtb2Rlcy5cbiMgICAgICAgICAgICAgIElmICdmb3JjZWQnIGlzIGFwcGVuZGVkLCB0aGVuIHRoZSBzY2FsZXIgd2lsbCBiZSB1c2VkIGV2ZW4gaWYgdGhlIHJlc3VsdCBtaWdodCBub3QgYmUgZGVzaXJlZC5cbiMgICAgICAgICAgICBQb3NzaWJsZSB2YWx1ZXM6IG5vbmUsIG5vcm1hbDJ4LCBub3JtYWwzeCwgYWR2bWFtZTJ4LCBhZHZtYW1lM3gsIGFkdmludGVycDJ4LCBhZHZpbnRlcnAzeCwgaHEyeCwgaHEzeCwgMnhzYWksIHN1cGVyMnhzYWksIHN1cGVyZWFnbGUsIHR2MngsIHR2M3gsIHJnYjJ4LCByZ2IzeCwgc2NhbjJ4LCBzY2FuM3guXG5cbmZyYW1lc2tpcD0wXG5hc3BlY3Q9ZmFsc2VcbnNjYWxlcj1ub25lXG5cbltjcHVdXG4jICAgICAgY29yZTogQ1BVIENvcmUgdXNlZCBpbiBlbXVsYXRpb24uIGF1dG8gd2lsbCBzd2l0Y2ggdG8gZHluYW1pYyBpZiBhdmFpbGFibGUgYW5kIGFwcHJvcHJpYXRlLlxuIyAgICAgICAgICAgIFBvc3NpYmxlIHZhbHVlczogYXV0bywgZHluYW1pYywgbm9ybWFsLCBzaW1wbGUuXG4jICAgY3B1dHlwZTogQ1BVIFR5cGUgdXNlZCBpbiBlbXVsYXRpb24uIGF1dG8gaXMgdGhlIGZhc3Rlc3QgY2hvaWNlLlxuIyAgICAgICAgICAgIFBvc3NpYmxlIHZhbHVlczogYXV0bywgMzg2LCAzODZfc2xvdywgNDg2X3Nsb3csIHBlbnRpdW1fc2xvdywgMzg2X3ByZWZldGNoLlxuIyAgICBjeWNsZXM6IEFtb3VudCBvZiBpbnN0cnVjdGlvbnMgRE9TQm94IHRyaWVzIHRvIGVtdWxhdGUgZWFjaCBtaWxsaXNlY29uZC5cbiMgICAgICAgICAgICBTZXR0aW5nIHRoaXMgdmFsdWUgdG9vIGhpZ2ggcmVzdWx0cyBpbiBzb3VuZCBkcm9wb3V0cyBhbmQgbGFncy5cbiMgICAgICAgICAgICBDeWNsZXMgY2FuIGJlIHNldCBpbiAzIHdheXM6XG4jICAgICAgICAgICAgICAnYXV0bycgICAgICAgICAgdHJpZXMgdG8gZ3Vlc3Mgd2hhdCBhIGdhbWUgbmVlZHMuXG4jICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSXQgdXN1YWxseSB3b3JrcywgYnV0IGNhbiBmYWlsIGZvciBjZXJ0YWluIGdhbWVzLlxuIyAgICAgICAgICAgICAgJ2ZpeGVkICNudW1iZXInIHdpbGwgc2V0IGEgZml4ZWQgYW1vdW50IG9mIGN5Y2xlcy4gVGhpcyBpcyB3aGF0IHlvdSB1c3VhbGx5IG5lZWQgaWYgJ2F1dG8nIGZhaWxzLlxuIyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChFeGFtcGxlOiBmaXhlZCA0MDAwKS5cbiMgICAgICAgICAgICAgICdtYXgnICAgICAgICAgICB3aWxsIGFsbG9jYXRlIGFzIG11Y2ggY3ljbGVzIGFzIHlvdXIgY29tcHV0ZXIgaXMgYWJsZSB0byBoYW5kbGUuXG4jXG4jICAgICAgICAgICAgUG9zc2libGUgdmFsdWVzOiBhdXRvLCBmaXhlZCwgbWF4LlxuIyAgIGN5Y2xldXA6IEFtb3VudCBvZiBjeWNsZXMgdG8gZGVjcmVhc2UvaW5jcmVhc2Ugd2l0aCBrZXljb21iby4oQ1RSTC1GMTEvQ1RSTC1GMTIpXG4jIGN5Y2xlZG93bjogU2V0dGluZyBpdCBsb3dlciB0aGFuIDEwMCB3aWxsIGJlIGEgcGVyY2VudGFnZS5cblxuY29yZT1hdXRvXG5jcHV0eXBlPWF1dG9cbmN5Y2xlcz0lY3ljbGVzJVxuY3ljbGV1cD0xMFxuY3ljbGVkb3duPTIwXG5cblttaXhlcl1cbiMgICBub3NvdW5kOiBFbmFibGUgc2lsZW50IG1vZGUsIHNvdW5kIGlzIHN0aWxsIGVtdWxhdGVkIHRob3VnaC5cbiMgICAgICByYXRlOiBNaXhlciBzYW1wbGUgcmF0ZSwgc2V0dGluZyBhbnkgZGV2aWNlJ3MgcmF0ZSBoaWdoZXIgdGhhbiB0aGlzIHdpbGwgcHJvYmFibHkgbG93ZXIgdGhlaXIgc291bmQgcXVhbGl0eS5cbiMgICAgICAgICAgICBQb3NzaWJsZSB2YWx1ZXM6IDQ0MTAwLCA0ODAwMCwgMzIwMDAsIDIyMDUwLCAxNjAwMCwgMTEwMjUsIDgwMDAsIDQ5NzE2LlxuIyBibG9ja3NpemU6IE1peGVyIGJsb2NrIHNpemUsIGxhcmdlciBibG9ja3MgbWlnaHQgaGVscCBzb3VuZCBzdHV0dGVyaW5nIGJ1dCBzb3VuZCB3aWxsIGFsc28gYmUgbW9yZSBsYWdnZWQuXG4jICAgICAgICAgICAgUG9zc2libGUgdmFsdWVzOiAxMDI0LCAyMDQ4LCA0MDk2LCA4MTkyLCA1MTIsIDI1Ni5cbiMgcHJlYnVmZmVyOiBIb3cgbWFueSBtaWxsaXNlY29uZHMgb2YgZGF0YSB0byBrZWVwIG9uIHRvcCBvZiB0aGUgYmxvY2tzaXplLlxuXG5ub3NvdW5kPWZhbHNlXG5yYXRlPTQ0MTAwXG5ibG9ja3NpemU9MTAyNFxucHJlYnVmZmVyPTIwXG5cblttaWRpXVxuIyAgICAgbXB1NDAxOiBUeXBlIG9mIE1QVS00MDEgdG8gZW11bGF0ZS5cbiMgICAgICAgICAgICAgUG9zc2libGUgdmFsdWVzOiBpbnRlbGxpZ2VudCwgdWFydCwgbm9uZS5cbiMgbWlkaWRldmljZTogRGV2aWNlIHRoYXQgd2lsbCByZWNlaXZlIHRoZSBNSURJIGRhdGEgZnJvbSBNUFUtNDAxLlxuIyAgICAgICAgICAgICBQb3NzaWJsZSB2YWx1ZXM6IGRlZmF1bHQsIHdpbjMyLCBhbHNhLCBvc3MsIGNvcmVhdWRpbywgY29yZW1pZGksIG5vbmUuXG4jIG1pZGljb25maWc6IFNwZWNpYWwgY29uZmlndXJhdGlvbiBvcHRpb25zIGZvciB0aGUgZGV2aWNlIGRyaXZlci4gVGhpcyBpcyB1c3VhbGx5IHRoZSBpZCBvZiB0aGUgZGV2aWNlIHlvdSB3YW50IHRvIHVzZS5cbiMgICAgICAgICAgICAgICBTZWUgdGhlIFJFQURNRS9NYW51YWwgZm9yIG1vcmUgZGV0YWlscy5cblxubXB1NDAxPWludGVsbGlnZW50XG5taWRpZGV2aWNlPWRlZmF1bHRcbm1pZGljb25maWc9XG5cbltzYmxhc3Rlcl1cbiMgIHNidHlwZTogVHlwZSBvZiBTb3VuZGJsYXN0ZXIgdG8gZW11bGF0ZS4gZ2IgaXMgR2FtZWJsYXN0ZXIuXG4jICAgICAgICAgIFBvc3NpYmxlIHZhbHVlczogc2IxLCBzYjIsIHNicHJvMSwgc2Jwcm8yLCBzYjE2LCBnYiwgbm9uZS5cbiMgIHNiYmFzZTogVGhlIElPIGFkZHJlc3Mgb2YgdGhlIHNvdW5kYmxhc3Rlci5cbiMgICAgICAgICAgUG9zc2libGUgdmFsdWVzOiAyMjAsIDI0MCwgMjYwLCAyODAsIDJhMCwgMmMwLCAyZTAsIDMwMC5cbiMgICAgIGlycTogVGhlIElSUSBudW1iZXIgb2YgdGhlIHNvdW5kYmxhc3Rlci5cbiMgICAgICAgICAgUG9zc2libGUgdmFsdWVzOiA3LCA1LCAzLCA5LCAxMCwgMTEsIDEyLlxuIyAgICAgZG1hOiBUaGUgRE1BIG51bWJlciBvZiB0aGUgc291bmRibGFzdGVyLlxuIyAgICAgICAgICBQb3NzaWJsZSB2YWx1ZXM6IDEsIDUsIDAsIDMsIDYsIDcuXG4jICAgIGhkbWE6IFRoZSBIaWdoIERNQSBudW1iZXIgb2YgdGhlIHNvdW5kYmxhc3Rlci5cbiMgICAgICAgICAgUG9zc2libGUgdmFsdWVzOiAxLCA1LCAwLCAzLCA2LCA3LlxuIyBzYm1peGVyOiBBbGxvdyB0aGUgc291bmRibGFzdGVyIG1peGVyIHRvIG1vZGlmeSB0aGUgRE9TQm94IG1peGVyLlxuIyBvcGxtb2RlOiBUeXBlIG9mIE9QTCBlbXVsYXRpb24uIE9uICdhdXRvJyB0aGUgbW9kZSBpcyBkZXRlcm1pbmVkIGJ5IHNibGFzdGVyIHR5cGUuIEFsbCBPUEwgbW9kZXMgYXJlIEFkbGliLWNvbXBhdGlibGUsIGV4Y2VwdCBmb3IgJ2NtcycuXG4jICAgICAgICAgIFBvc3NpYmxlIHZhbHVlczogYXV0bywgY21zLCBvcGwyLCBkdWFsb3BsMiwgb3BsMywgbm9uZS5cbiMgIG9wbGVtdTogUHJvdmlkZXIgZm9yIHRoZSBPUEwgZW11bGF0aW9uLiBjb21wYXQgbWlnaHQgcHJvdmlkZSBiZXR0ZXIgcXVhbGl0eSAoc2VlIG9wbHJhdGUgYXMgd2VsbCkuXG4jICAgICAgICAgIFBvc3NpYmxlIHZhbHVlczogZGVmYXVsdCwgY29tcGF0LCBmYXN0LlxuIyBvcGxyYXRlOiBTYW1wbGUgcmF0ZSBvZiBPUEwgbXVzaWMgZW11bGF0aW9uLiBVc2UgNDk3MTYgZm9yIGhpZ2hlc3QgcXVhbGl0eSAoc2V0IHRoZSBtaXhlciByYXRlIGFjY29yZGluZ2x5KS5cbiMgICAgICAgICAgUG9zc2libGUgdmFsdWVzOiA0NDEwMCwgNDk3MTYsIDQ4MDAwLCAzMjAwMCwgMjIwNTAsIDE2MDAwLCAxMTAyNSwgODAwMC5cblxuc2J0eXBlPXNiMTZcbnNiYmFzZT0yMjBcbmlycT03XG5kbWE9MVxuaGRtYT01XG5zYm1peGVyPXRydWVcbm9wbG1vZGU9YXV0b1xub3BsZW11PWRlZmF1bHRcbm9wbHJhdGU9NDQxMDBcblxuW2d1c11cbiMgICAgICBndXM6IEVuYWJsZSB0aGUgR3JhdmlzIFVsdHJhc291bmQgZW11bGF0aW9uLlxuIyAgZ3VzcmF0ZTogU2FtcGxlIHJhdGUgb2YgVWx0cmFzb3VuZCBlbXVsYXRpb24uXG4jICAgICAgICAgICBQb3NzaWJsZSB2YWx1ZXM6IDQ0MTAwLCA0ODAwMCwgMzIwMDAsIDIyMDUwLCAxNjAwMCwgMTEwMjUsIDgwMDAsIDQ5NzE2LlxuIyAgZ3VzYmFzZTogVGhlIElPIGJhc2UgYWRkcmVzcyBvZiB0aGUgR3JhdmlzIFVsdHJhc291bmQuXG4jICAgICAgICAgICBQb3NzaWJsZSB2YWx1ZXM6IDI0MCwgMjIwLCAyNjAsIDI4MCwgMmEwLCAyYzAsIDJlMCwgMzAwLlxuIyAgIGd1c2lycTogVGhlIElSUSBudW1iZXIgb2YgdGhlIEdyYXZpcyBVbHRyYXNvdW5kLlxuIyAgICAgICAgICAgUG9zc2libGUgdmFsdWVzOiA1LCAzLCA3LCA5LCAxMCwgMTEsIDEyLlxuIyAgIGd1c2RtYTogVGhlIERNQSBjaGFubmVsIG9mIHRoZSBHcmF2aXMgVWx0cmFzb3VuZC5cbiMgICAgICAgICAgIFBvc3NpYmxlIHZhbHVlczogMywgMCwgMSwgNSwgNiwgNy5cbiMgdWx0cmFkaXI6IFBhdGggdG8gVWx0cmFzb3VuZCBkaXJlY3RvcnkuIEluIHRoaXMgZGlyZWN0b3J5XG4jICAgICAgICAgICB0aGVyZSBzaG91bGQgYmUgYSBNSURJIGRpcmVjdG9yeSB0aGF0IGNvbnRhaW5zXG4jICAgICAgICAgICB0aGUgcGF0Y2ggZmlsZXMgZm9yIEdVUyBwbGF5YmFjay4gUGF0Y2ggc2V0cyB1c2VkXG4jICAgICAgICAgICB3aXRoIFRpbWlkaXR5IHNob3VsZCB3b3JrIGZpbmUuXG5cbmd1cz1mYWxzZVxuZ3VzcmF0ZT00NDEwMFxuZ3VzYmFzZT0yNDBcbmd1c2lycT01XG5ndXNkbWE9M1xudWx0cmFkaXI9QzpcXFVMVFJBU05EXG5cbltzcGVha2VyXVxuIyBwY3NwZWFrZXI6IEVuYWJsZSBQQy1TcGVha2VyIGVtdWxhdGlvbi5cbiMgICAgcGNyYXRlOiBTYW1wbGUgcmF0ZSBvZiB0aGUgUEMtU3BlYWtlciBzb3VuZCBnZW5lcmF0aW9uLlxuIyAgICAgICAgICAgIFBvc3NpYmxlIHZhbHVlczogNDQxMDAsIDQ4MDAwLCAzMjAwMCwgMjIwNTAsIDE2MDAwLCAxMTAyNSwgODAwMCwgNDk3MTYuXG4jICAgICB0YW5keTogRW5hYmxlIFRhbmR5IFNvdW5kIFN5c3RlbSBlbXVsYXRpb24uIEZvciAnYXV0bycsIGVtdWxhdGlvbiBpcyBwcmVzZW50IG9ubHkgaWYgbWFjaGluZSBpcyBzZXQgdG8gJ3RhbmR5Jy5cbiMgICAgICAgICAgICBQb3NzaWJsZSB2YWx1ZXM6IGF1dG8sIG9uLCBvZmYuXG4jIHRhbmR5cmF0ZTogU2FtcGxlIHJhdGUgb2YgdGhlIFRhbmR5IDMtVm9pY2UgZ2VuZXJhdGlvbi5cbiMgICAgICAgICAgICBQb3NzaWJsZSB2YWx1ZXM6IDQ0MTAwLCA0ODAwMCwgMzIwMDAsIDIyMDUwLCAxNjAwMCwgMTEwMjUsIDgwMDAsIDQ5NzE2LlxuIyAgICBkaXNuZXk6IEVuYWJsZSBEaXNuZXkgU291bmQgU291cmNlIGVtdWxhdGlvbi4gKENvdm94IFZvaWNlIE1hc3RlciBhbmQgU3BlZWNoIFRoaW5nIGNvbXBhdGlibGUpLlxuXG5wY3NwZWFrZXI9dHJ1ZVxucGNyYXRlPTQ0MTAwXG50YW5keT1hdXRvXG50YW5keXJhdGU9NDQxMDBcbmRpc25leT10cnVlXG5cbltqb3lzdGlja11cbiMgam95c3RpY2t0eXBlOiBUeXBlIG9mIGpveXN0aWNrIHRvIGVtdWxhdGU6IGF1dG8gKGRlZmF1bHQpLCBub25lLFxuIyAgICAgICAgICAgICAgIDJheGlzIChzdXBwb3J0cyB0d28gam95c3RpY2tzKSxcbiMgICAgICAgICAgICAgICA0YXhpcyAoc3VwcG9ydHMgb25lIGpveXN0aWNrLCBmaXJzdCBqb3lzdGljayB1c2VkKSxcbiMgICAgICAgICAgICAgICA0YXhpc18yIChzdXBwb3J0cyBvbmUgam95c3RpY2ssIHNlY29uZCBqb3lzdGljayB1c2VkKSxcbiMgICAgICAgICAgICAgICBmY3MgKFRocnVzdG1hc3RlciksIGNoIChDSCBGbGlnaHRzdGljaykuXG4jICAgICAgICAgICAgICAgbm9uZSBkaXNhYmxlcyBqb3lzdGljayBlbXVsYXRpb24uXG4jICAgICAgICAgICAgICAgYXV0byBjaG9vc2VzIGVtdWxhdGlvbiBkZXBlbmRpbmcgb24gcmVhbCBqb3lzdGljayhzKS5cbiMgICAgICAgICAgICAgICAoUmVtZW1iZXIgdG8gcmVzZXQgZG9zYm94J3MgbWFwcGVyZmlsZSBpZiB5b3Ugc2F2ZWQgaXQgZWFybGllcilcbiMgICAgICAgICAgICAgICBQb3NzaWJsZSB2YWx1ZXM6IGF1dG8sIDJheGlzLCA0YXhpcywgNGF4aXNfMiwgZmNzLCBjaCwgbm9uZS5cbiMgICAgICAgIHRpbWVkOiBlbmFibGUgdGltZWQgaW50ZXJ2YWxzIGZvciBheGlzLiBFeHBlcmltZW50IHdpdGggdGhpcyBvcHRpb24sIGlmIHlvdXIgam95c3RpY2sgZHJpZnRzIChhd2F5KS5cbiMgICAgIGF1dG9maXJlOiBjb250aW51b3VzbHkgZmlyZXMgYXMgbG9uZyBhcyB5b3Uga2VlcCB0aGUgYnV0dG9uIHByZXNzZWQuXG4jICAgICAgIHN3YXAzNDogc3dhcCB0aGUgM3JkIGFuZCB0aGUgNHRoIGF4aXMuIGNhbiBiZSB1c2VmdWwgZm9yIGNlcnRhaW4gam95c3RpY2tzLlxuIyAgIGJ1dHRvbndyYXA6IGVuYWJsZSBidXR0b24gd3JhcHBpbmcgYXQgdGhlIG51bWJlciBvZiBlbXVsYXRlZCBidXR0b25zLlxuXG5qb3lzdGlja3R5cGU9YXV0b1xudGltZWQ9dHJ1ZVxuYXV0b2ZpcmU9ZmFsc2VcbnN3YXAzND1mYWxzZVxuYnV0dG9ud3JhcD1mYWxzZVxuXG5bc2VyaWFsXVxuIyBzZXJpYWwxOiBzZXQgdHlwZSBvZiBkZXZpY2UgY29ubmVjdGVkIHRvIGNvbSBwb3J0LlxuIyAgICAgICAgICBDYW4gYmUgZGlzYWJsZWQsIGR1bW15LCBtb2RlbSwgbnVsbG1vZGVtLCBkaXJlY3RzZXJpYWwuXG4jICAgICAgICAgIEFkZGl0aW9uYWwgcGFyYW1ldGVycyBtdXN0IGJlIGluIHRoZSBzYW1lIGxpbmUgaW4gdGhlIGZvcm0gb2ZcbiMgICAgICAgICAgcGFyYW1ldGVyOnZhbHVlLiBQYXJhbWV0ZXIgZm9yIGFsbCB0eXBlcyBpcyBpcnEgKG9wdGlvbmFsKS5cbiMgICAgICAgICAgZm9yIGRpcmVjdHNlcmlhbDogcmVhbHBvcnQgKHJlcXVpcmVkKSwgcnhkZWxheSAob3B0aW9uYWwpLlxuIyAgICAgICAgICAgICAgICAgICAgICAgICAgIChyZWFscG9ydDpDT00xIHJlYWxwb3J0OnR0eVMwKS5cbiMgICAgICAgICAgZm9yIG1vZGVtOiBsaXN0ZW5wb3J0IChvcHRpb25hbCkuXG4jICAgICAgICAgIGZvciBudWxsbW9kZW06IHNlcnZlciwgcnhkZWxheSwgdHhkZWxheSwgdGVsbmV0LCB1c2VkdHIsXG4jICAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zcGFyZW50LCBwb3J0LCBpbmhzb2NrZXQgKGFsbCBvcHRpb25hbCkuXG4jICAgICAgICAgIEV4YW1wbGU6IHNlcmlhbDE9bW9kZW0gbGlzdGVucG9ydDo1MDAwXG4jICAgICAgICAgIFBvc3NpYmxlIHZhbHVlczogZHVtbXksIGRpc2FibGVkLCBtb2RlbSwgbnVsbG1vZGVtLCBkaXJlY3RzZXJpYWwuXG4jIHNlcmlhbDI6IHNlZSBzZXJpYWwxXG4jICAgICAgICAgIFBvc3NpYmxlIHZhbHVlczogZHVtbXksIGRpc2FibGVkLCBtb2RlbSwgbnVsbG1vZGVtLCBkaXJlY3RzZXJpYWwuXG4jIHNlcmlhbDM6IHNlZSBzZXJpYWwxXG4jICAgICAgICAgIFBvc3NpYmxlIHZhbHVlczogZHVtbXksIGRpc2FibGVkLCBtb2RlbSwgbnVsbG1vZGVtLCBkaXJlY3RzZXJpYWwuXG4jIHNlcmlhbDQ6IHNlZSBzZXJpYWwxXG4jICAgICAgICAgIFBvc3NpYmxlIHZhbHVlczogZHVtbXksIGRpc2FibGVkLCBtb2RlbSwgbnVsbG1vZGVtLCBkaXJlY3RzZXJpYWwuXG5cbnNlcmlhbDE9ZHVtbXlcbnNlcmlhbDI9ZHVtbXlcbnNlcmlhbDM9ZGlzYWJsZWRcbnNlcmlhbDQ9ZGlzYWJsZWRcblxuW2Rvc11cbiMgICAgICAgICAgICB4bXM6IEVuYWJsZSBYTVMgc3VwcG9ydC5cbiMgICAgICAgICAgICBlbXM6IEVuYWJsZSBFTVMgc3VwcG9ydC5cbiMgICAgICAgICAgICB1bWI6IEVuYWJsZSBVTUIgc3VwcG9ydC5cbiMga2V5Ym9hcmRsYXlvdXQ6IExhbmd1YWdlIGNvZGUgb2YgdGhlIGtleWJvYXJkIGxheW91dCAob3Igbm9uZSkuXG5cbnhtcz10cnVlXG5lbXM9dHJ1ZVxudW1iPXRydWVcbmtleWJvYXJkbGF5b3V0PWF1dG9cblxuW2lweF1cbiMgaXB4OiBFbmFibGUgaXB4IG92ZXIgVURQL0lQIGVtdWxhdGlvbi5cblxuaXB4PWZhbHNlXG5cblthdXRvZXhlY11cbiMgTGluZXMgaW4gdGhpcyBzZWN0aW9uIHdpbGwgYmUgcnVuIGF0IHN0YXJ0dXAuXG4jIFlvdSBjYW4gcHV0IHlvdXIgTU9VTlQgbGluZXMgaGVyZS5cblxuIyBodHRwczovL2pzLWRvcy5jb21cbiMg4paI4paA4paA4paA4paA4paA4paIIOKWiCAg4paE4paE4paE4paA4paA4paIIOKWiOKWgOKWgOKWgOKWgOKWgOKWiFxuIyDilogg4paI4paI4paIIOKWiCDilojilojiloQg4paIIOKWgCDiloQg4paIIOKWiOKWiOKWiCDilohcbiMg4paIIOKWgOKWgOKWgCDilogg4paE4paI4paIIOKWgCDiloDiloDilogg4paIIOKWgOKWgOKWgCDilohcbiMg4paA4paA4paA4paA4paA4paA4paAIOKWgCDilojiloTiloDiloTiloAg4paIIOKWgOKWgOKWgOKWgOKWgOKWgOKWgFxuIyDilojiloDiloTiloTilojiloDiloDiloTiloQg4paAIOKWgOKWiOKWhOKWhOKWhOKWhCDiloDiloTilojiloDilojiloBcbiMg4paI4paAIOKWgCDiloDiloDiloQg4paI4paAIOKWhCDiloTiloDiloDiloDiloQg4paI4paA4paI4paEXG4jIOKWhCDiloTiloQg4paI4paA4paA4paEIOKWhOKWgOKWhOKWgOKWgOKWiCAg4paA4paA4paE4paA4paA4paI4paAXG4jICAg4paE4paA4paA4paI4paA4paAIOKWiOKWgOKWiOKWgOKWiOKWgOKWgOKWhCDiloDilojilojiloDilojiloRcbiMg4paA4paA4paAIOKWgCDiloAg4paI4paE4paIIOKWgOKWiOKWhOKWhOKWiOKWgOKWgOKWgOKWiOKWgOKWgFxuIyDilojiloDiloDiloDiloDiloDilogg4paE4paE4paEIOKWhCDiloQg4paIIOKWgCDilojiloTiloTiloTiloRcbiMg4paIIOKWiOKWiOKWiCDilogg4paA4paI4paA4paA4paE4paA4paA4paE4paI4paI4paI4paI4paA4paA4paI4paE4paIXG4jIOKWiCDiloDiloDiloAg4paIIOKWhOKWgOKWgOKWiOKWgOKWiOKWgOKWhCDiloDiloDiloTiloTilojiloTiloggXG4jIOKWgOKWgOKWgOKWgOKWgOKWgOKWgCDiloAgICDiloDiloAg4paAICDiloAgICDiloDiloDiloBcbmA7XG4iLCIvLyAjIERvc0RvbVxuLy8gU2ltcGxlIEFQSSB0byB3b3JrIHdpdGggRE9NXG5cbi8vICMjIyBhcHBseUNzcyAtIGFkZCBuZXcgY3NzIHN0eWxlIGlmIG5vIGh0bWwgZWxlbWVudCB3aXRoIGlkIGV4aXN0c1xuZXhwb3J0IGZ1bmN0aW9uIGFwcGx5Q3NzKGlkOiBzdHJpbmcsIGNzczogc3RyaW5nKSB7XG4gICAgaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKSA9PT0gbnVsbCkge1xuICAgICAgICBjb25zdCBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKSBhcyBIVE1MU3R5bGVFbGVtZW50O1xuICAgICAgICBzdHlsZS5pZCA9IGlkO1xuICAgICAgICBzdHlsZS5pbm5lckhUTUwgPSBjc3M7XG4gICAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc3R5bGUpO1xuICAgIH1cbn1cblxuLy8gIyMjIGNyZWF0ZURpdiAtIHR5cGVzYWZlIHNob3J0Y3V0IGZvciBjcmVhdGluZyBIVE1MRGl2RWxlbWVudFxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZURpdihjbGFzc05hbWU/OiBzdHJpbmcpOiBIVE1MRGl2RWxlbWVudCB7XG4gICAgY29uc3QgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpIGFzIEhUTUxEaXZFbGVtZW50O1xuICAgIGlmIChjbGFzc05hbWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBlbC5jbGFzc05hbWUgPSBjbGFzc05hbWU7XG4gICAgfVxuICAgIHJldHVybiBlbDtcbn1cbiIsIi8vICMgRG9zRlNcbi8vIEFQSSBmb3Igd29ya2luZyB3aXRoIGZpbGUgc3lzdGVtIG9mIGRvc2JveFxuXG5pbXBvcnQgQ2FjaGVOb29wIGZyb20gXCIuL2pzLWRvcy1jYWNoZS1ub29wXCI7XG5pbXBvcnQgeyBEb3NNb2R1bGUgfSBmcm9tIFwiLi9qcy1kb3MtbW9kdWxlXCI7XG5pbXBvcnQgeyBYaHIgfSBmcm9tIFwiLi9qcy1kb3MteGhyXCI7XG5cbmV4cG9ydCBjbGFzcyBEb3NGUyB7XG4gICAgcHJpdmF0ZSBkb3M6IERvc01vZHVsZTtcbiAgICBwcml2YXRlIGVtOiBhbnk7IC8vIHR5cGVvZiBNb2R1bGU7XG4gICAgcHJpdmF0ZSBmczogYW55O1xuICAgIHByaXZhdGUgc3luY2luZ1Byb21pc2U6IFByb21pc2U8dm9pZD4gfCBudWxsID0gbnVsbDtcbiAgICBwcml2YXRlIGxhc3RTeW5jVGltZSA9IDA7XG5cbiAgICBjb25zdHJ1Y3Rvcihkb3M6IERvc01vZHVsZSkge1xuICAgICAgICB0aGlzLmRvcyA9IGRvcztcbiAgICAgICAgdGhpcy5lbSA9IGRvcyBhcyBhbnk7XG4gICAgICAgIHRoaXMuZnMgPSAoZG9zIGFzIGFueSkuRlM7XG5cbiAgICAgICAgLy8gU3luYyBmcyB0byBpbmRleGVkIGRiIHBlcmlvZGljYWxseVxuICAgICAgICB0aGlzLmRvcy5yZWdpc3RlclRpY2tMaXN0ZW5lcigoKSA9PiB7XG4gICAgICAgICAgICBpZiAoRGF0ZS5ub3coKSAtIHRoaXMubGFzdFN5bmNUaW1lIDwgNTAwMCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMubGFzdFN5bmNUaW1lID0gRGF0ZS5ub3coKTtcbiAgICAgICAgICAgIHRoaXMuc3luY0ZzKCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmRvcy5yZWdpc3RlclBhdXNlTGlzdGVuZXIoKCkgPT4gdGhpcy5zeW5jRnMoKSk7XG4gICAgICAgIHRoaXMuZG9zLnJlZ2lzdGVyVGVybWluYXRlTGlzdGVuZXIoKCkgPT4gdGhpcy5zeW5jRnMoKSk7XG4gICAgfVxuXG4gICAgcHVibGljIGNoZGlyKHBhdGg6IHN0cmluZykge1xuICAgICAgICB0aGlzLmZzLmNoZGlyKHBhdGgpO1xuICAgIH1cblxuICAgIC8vICMjIyBleHRyYWN0XG4gICAgcHVibGljIGV4dHJhY3QodXJsOiBzdHJpbmcsIHBlcnNpc3RlbnRNb3VudDogc3RyaW5nID0gXCIvXCIsIHR5cGU6IHN0cmluZyA9IFwiemlwXCIpIHtcbiAgICAgICAgLy8gZG93bmxvYWQgYXJjaGl2ZSBieSBnaXZlbiB1cmwgYW5kIHRoZW4gZXh0cmFjdCBpdCBpbiBjd2QgKGN3ZCB3aWxsIGJlIG1vdW50ZWQgYXMgQzopXG4gICAgICAgIC8vXG4gICAgICAgIC8vICogYHVybGAgLSB1cmwgZm9yIGRvd25sb2FkaW5nIGFyY2hpdmVcbiAgICAgICAgLy8gKiBgcGVyc2lzdGVudE1vdW50YCAtIGlzIGEgcGF0aCB0byBtb3VudCBhcmNoaXZlIGNvbnRlbnRzLCBieSBkZWZhdWx0IG1vdW50IHBvaW50IGlzICcvJyB3aGljaFxuICAgICAgICAvLyBpcyBhIE1FTUZTIHRoYXQgaXMgbGl2ZSBvbmx5IGluIG9uZSBzc2VzaW9uLiBJdCBtZWFucyB0aGF0IGFmdGVyIHJlc3RhcnQgYWxsIHByb2dyZXNzIHdpbGwgYmUgZXJhc2VkLlxuICAgICAgICAvLyBJZiB5b3Ugc2V0IHNvbWUgcGF0aCAoYW55KSwgdGhlbiB0aGlzIHBhdGggd2lsbCBiZSBzdG9yZWQgYWNyb3NzIHNlc3Npb25zIGluIGluZGV4ZWQgZGIuIEl0IG1lYW5zXG4gICAgICAgIC8vIHRoYXQgcHJvZ3Jlc3Mgd2lsbCBiZSB0aGVyZSBhZnRlciBicm93c2VyIHJlc3RhcnQuXG4gICAgICAgIC8vICogYHR5cGVgIC0gYXJjaGl2ZSB0eXBlICoqb25seSB6aXAgaXMgc3VwcG9ydGVkKipcbiAgICAgICAgLy9cbiAgICAgICAgLy8gdGhpcyBtZXRob2Qgd2lsbCByZXR1cm4gYFByb21pc2U8dm9pZD5gLCB0aGF0IHdpbGwgYmUgcmVzb2x2ZWRcbiAgICAgICAgLy8gb24gc3VjY2VzcyB3aXRoIGVtcHR5IG9iamVjdCBvciByZWplY3RlZFxuXG4gICAgICAgIHBlcnNpc3RlbnRNb3VudCA9IHRoaXMubm9ybWFsaXplUGF0aChwZXJzaXN0ZW50TW91bnQpO1xuXG4gICAgICAgIGNvbnN0IHBhcnRzID0gcGVyc2lzdGVudE1vdW50LnNwbGl0KFwiL1wiKTtcbiAgICAgICAgdGhpcy5jcmVhdGVQYXRoKHBhcnRzLCAwLCBwYXJ0cy5sZW5ndGgpO1xuICAgICAgICB0aGlzLmNoZGlyKHBlcnNpc3RlbnRNb3VudCk7XG5cbiAgICAgICAgY29uc3QgZXh0cmFjdEFyY2hpdmVJbkN3ZCA9ICgpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZTx2b2lkPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGUgIT09IFwiemlwXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KFwiT25seSBaSVAgYXJjaGl2ZSBpcyBzdXBwb3J0ZWRcIik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBuZXcgWGhyKHVybCwge1xuICAgICAgICAgICAgICAgICAgICBjYWNoZTogbmV3IENhY2hlTm9vcCgpLFxuICAgICAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IFwiYXJyYXlidWZmZXJcIixcbiAgICAgICAgICAgICAgICAgICAgZmFpbDogKG1zZykgPT4gcmVqZWN0KG1zZyksXG4gICAgICAgICAgICAgICAgICAgIHByb2dyZXNzOiAodG90YWwsIGxvYWRlZCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZG9zLm9ucHJvZ3Jlc3MgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZG9zLm9ucHJvZ3Jlc3MoXCJEb3dubG9hZGluZyBcIiArIHVybCwgdG90YWwsIGxvYWRlZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IChkYXRhOiBBcnJheUJ1ZmZlcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYnl0ZXMgPSBuZXcgVWludDhBcnJheShkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGJ1ZmZlciA9IHRoaXMuZW0uX21hbGxvYyhieXRlcy5sZW5ndGgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbS5IRUFQVTguc2V0KGJ5dGVzLCBidWZmZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmV0Y29kZSA9IHRoaXMuZW0uX2V4dHJhY3RfemlwKGJ1ZmZlciwgYnl0ZXMubGVuZ3RoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW0uX2ZyZWUoYnVmZmVyKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJldGNvZGUgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLndyaXRlT2socGVyc2lzdGVudE1vdW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN5bmNGcygpLnRoZW4ocmVzb2x2ZSkuY2F0Y2gocmVqZWN0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KFwiQ2FuJ3QgZXh0cmFjdCB6aXAsIHJldGNvZGUgXCIgKyByZXRjb2RlICsgXCIsIHNlZSBtb3JlIGluZm8gaW4gbG9nc1wiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChwZXJzaXN0ZW50TW91bnQgPT09IFwiL1wiIHx8IHBlcnNpc3RlbnRNb3VudC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBleHRyYWN0QXJjaGl2ZUluQ3dkKCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2U8dm9pZD4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMubGFzdFN5bmNUaW1lID4gMCkge1xuICAgICAgICAgICAgICAgIHJlamVjdChcIkNhbid0IGNyZWF0ZSBwZXJzaXN0ZW50IG1vdW50IHBvaW50LCBhZnRlciBzeW5jaW5nIHByb2Nlc3Mgc3RhcnRzXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5mcy5tb3VudCh0aGlzLmZzLmZpbGVzeXN0ZW1zLklEQkZTLCB7fSwgcGVyc2lzdGVudE1vdW50KTtcbiAgICAgICAgICAgIHRoaXMuZnMuc3luY2ZzKHRydWUsIChlcnI6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KFwiQ2FuJ3QgcmVzdG9yZSBGUyBmcm9tIGluZGV4ZWQgZGIsIGNhdXNlOiBcIiArIGVycik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMucmVhZE9rKHBlcnNpc3RlbnRNb3VudCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kb3Mud2FybihcIkluZGV4ZWQgZGIgY29udGFpbnMgYnJva2VuIEZTLCByZXNldHRpbmcuLi5cIik7XG4gICAgICAgICAgICAgICAgICAgIGV4dHJhY3RBcmNoaXZlSW5Dd2QoKS50aGVuKHJlc29sdmUpLmNhdGNoKHJlamVjdCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gIyMjIGNyZWF0ZUZpbGVcbiAgICBwdWJsaWMgY3JlYXRlRmlsZShmaWxlOiBzdHJpbmcsIGJvZHk6IEFycmF5QnVmZmVyIHwgVWludDhBcnJheSB8IHN0cmluZykge1xuICAgICAgICAvLyBbc3luY2hyb25vdXNdIGFsbG93IHRvIGNyZWF0ZSBmaWxlIGluIEZTLCB5b3UgY2FuIHBhc3MgYWJzb2x1dGUgcGF0aC5cbiAgICAgICAgLy8gQWxsIGRpcmVjdG9yaWVzIHdpbGwgYmUgY3JlYXRlZFxuICAgICAgICAvL1xuICAgICAgICAvLyBib2R5IGNhbiBiZSBzdHJpbmcgb3IgQXJyYXlCdWZmZXIgb3IgVWludDhBcnJheVxuXG4gICAgICAgIGlmIChib2R5IGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHtcbiAgICAgICAgICAgIGJvZHkgPSBuZXcgVWludDhBcnJheShib2R5KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHdpbmRvd3Mgc3R5bGUgcGF0aCBhcmUgYWxzbyB2YWxpZCwgYnV0ICoqZHJpdmUgbGV0dGVyIGlzIGlnbm9yZWQqKlxuICAgICAgICAvLyBpZiB5b3UgcGFzcyBvbmx5IGZpbGVuYW1lLCB0aGVuIGZpbGUgd2lsbCBiZSB3cml0ZWQgaW4gcm9vdCBcIi9cIiBkaXJlY3RvcnlcbiAgICAgICAgZmlsZSA9IGZpbGUucmVwbGFjZShuZXcgUmVnRXhwKFwiXlthLXpBLXpdKzpcIiksIFwiXCIpIC5yZXBsYWNlKG5ldyBSZWdFeHAoXCJcXFxcXFxcXFwiLCBcImdcIiksIFwiL1wiKTtcbiAgICAgICAgY29uc3QgcGFydHMgPSBmaWxlLnNwbGl0KFwiL1wiKTtcblxuICAgICAgICBpZiAocGFydHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5kb3Mub25lcnJvciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kb3Mub25lcnJvcihcIkNhbid0IGNyZWF0ZSBmaWxlICdcIiArIGZpbGUgKyBcIicsIGJlY2F1c2UgaXQncyBub3QgdmFsaWQgZmlsZSBwYXRoXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZmlsZW5hbWUgPSBwYXJ0c1twYXJ0cy5sZW5ndGggLSAxXS50cmltKCk7XG5cbiAgICAgICAgaWYgKGZpbGVuYW1lLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuZG9zLm9uZXJyb3IgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZG9zLm9uZXJyb3IoXCJDYW4ndCBjcmVhdGUgZmlsZSAnXCIgKyBmaWxlICsgXCInLCBiZWNhdXNlIGZpbGUgbmFtZSBpcyBlbXB0eVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qIGkgPCBwYXJ0cy5sZW5ndGggLSAxLCBiZWNhdXNlIGxhc3QgcGFydCBpcyBmaWxlIG5hbWUgKi9cbiAgICAgICAgY29uc3QgcGF0aCA9IHRoaXMuY3JlYXRlUGF0aChwYXJ0cywgMCwgcGFydHMubGVuZ3RoIC0gMSk7XG4gICAgICAgIHRoaXMuZnMuY3JlYXRlRGF0YUZpbGUocGF0aCwgZmlsZW5hbWUsIGJvZHksIHRydWUsIHRydWUsIHRydWUpO1xuICAgIH1cblxuICAgIHByaXZhdGUgY3JlYXRlUGF0aChwYXJ0czogc3RyaW5nW10sIGJlZ2luOiBudW1iZXIsIGVuZDogbnVtYmVyKSB7XG4gICAgICAgIGxldCBwYXRoID0gXCJcIjtcbiAgICAgICAgZm9yIChsZXQgaSA9IGJlZ2luOyBpIDwgZW5kOyArK2kpIHtcbiAgICAgICAgICAgIGNvbnN0IHBhcnQgPSBwYXJ0c1tpXS50cmltKCk7XG4gICAgICAgICAgICBpZiAocGFydC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5mcy5jcmVhdGVQYXRoKHBhdGgsIHBhcnQsIHRydWUsIHRydWUpO1xuICAgICAgICAgICAgcGF0aCA9IHBhdGggKyBcIi9cIiArIHBhcnQ7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcGF0aDtcbiAgICB9XG5cbiAgICBwcml2YXRlIHN5bmNGcygpIHtcbiAgICAgICAgaWYgKHRoaXMuc3luY2luZ1Byb21pc2UpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN5bmNpbmdQcm9taXNlO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5zeW5jaW5nUHJvbWlzZSA9IG5ldyBQcm9taXNlPHZvaWQ+KChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHN0YXJ0ZWRBdCA9IERhdGUubm93KCk7XG4gICAgICAgICAgICB0aGlzLmZzLnN5bmNmcyhmYWxzZSwgKGVycjogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRvcy5lcnJvcihcIkNhbid0IHN5bmMgRlMgdG8gaW5kZXhlZCBkYiwgY2F1c2U6IFwiICsgZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuc3luY2luZ1Byb21pc2UgPSBudWxsO1xuICAgICAgICAgICAgICAgIHRoaXMubGFzdFN5bmNUaW1lID0gRGF0ZS5ub3coKTtcbiAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuc3luY2luZ1Byb21pc2U7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBub3JtYWxpemVQYXRoKHBhdGg6IHN0cmluZykge1xuICAgICAgICBpZiAocGF0aC5sZW5ndGggPT09IDAgfHwgcGF0aFswXSAhPT0gXCIvXCIpIHtcbiAgICAgICAgICAgIHBhdGggPSBcIi9cIiArIHBhdGg7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocGF0aC5sZW5ndGggPiAxICYmIHBhdGguZW5kc1dpdGgoXCIvXCIpKSB7XG4gICAgICAgICAgICBwYXRoID0gcGF0aC5zdWJzdHIoMCwgcGF0aC5sZW5ndGggLSAxKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBwYXRoO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVhZE9rKHBhdGg6IHN0cmluZykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcmVhZGVkID0gdGhpcy5mcy5yZWFkRmlsZShwYXRoICsgXCIvc3RhdGUuZnNcIik7XG4gICAgICAgICAgICByZXR1cm4gcmVhZGVkWzBdID09PSA3OSAmJiByZWFkZWRbMV0gPT09IDcwO1xuICAgICAgICB9IGNhdGNoIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgd3JpdGVPayhwYXRoOiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5jcmVhdGVGaWxlKHBhdGggKyBcIi9zdGF0ZS5mc1wiLCBuZXcgVWludDhBcnJheShbNzksIDcwXSkpOyAvLyBPa1xuICAgIH1cblxufVxuIiwiLy8gIyBEb3NIb3N0XG4vLyBUaGlzIGNsYXNzIGlzIHVzZWQgdG8gZGV0ZWN0IGFuZCBwcm92aWRlIGluZm9ybWF0aW9uIGFib3V0XG4vLyBmZWF0dXJlcyB0aGF0IHN1cHBvcnRlZCBpbiBjdXJyZW50IGVudmlyb25tZW50XG5cbi8qIHRzbGludDpkaXNhYmxlOm1lbWJlci1vcmRlcmluZyAqL1xuaW1wb3J0IHsgQnVpbGQgfSBmcm9tIFwiLi9qcy1kb3MtYnVpbGRcIjtcbmltcG9ydCB7IElDYWNoZSB9IGZyb20gXCIuL2pzLWRvcy1jYWNoZVwiO1xuaW1wb3J0IHsgRG9zTW9kdWxlIH0gZnJvbSBcIi4vanMtZG9zLW1vZHVsZVwiO1xuaW1wb3J0IHsgWGhyIH0gZnJvbSBcIi4vanMtZG9zLXhoclwiO1xuXG5jbGFzcyBEb3NIb3N0IHtcblxuICAgIHB1YmxpYyB3YXNtU3VwcG9ydGVkID0gZmFsc2U7XG4gICAgcHVibGljIGdsb2JhbCA9IHdpbmRvdyBhcyBhbnk7XG5cbiAgICBwcml2YXRlIHdkb3Nib3hQcm9taXNlOiBQcm9taXNlPGFueT4gfCBudWxsID0gbnVsbDtcblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmdsb2JhbC5leHBvcnRzID0ge307XG5cbiAgICAgICAgLy8gIyMjIFdlYkFzc2VtYmx5XG4gICAgICAgIC8vIEhvc3QgYWJsZSB0byBkZXRlY3QgaXMgV2ViQXNzZW1ibHkgc3VwcG9ydGVkIG9yIG5vdCxcbiAgICAgICAgLy8gdGhpcyBpbmZvcm1hdGlvbiBpcyBzdG9yZWQgaW4gYEhvc3Qud2FzbVN1cHBvcnRlZGAgdmFyaWFibGVcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgV2ViQXNzZW1ibHkgPT09IFwib2JqZWN0XCIgJiZcbiAgICAgICAgICAgICAgICB0eXBlb2YgV2ViQXNzZW1ibHkuaW5zdGFudGlhdGUgPT09IFwiZnVuY3Rpb25cIiAmJlxuICAgICAgICAgICAgICAgIHR5cGVvZiBXZWJBc3NlbWJseS5jb21waWxlID09PSBcImZ1bmN0aW9uXCIpIHtcblxuICAgICAgICAgICAgICAgIGNvbnN0IHdtb2R1bGUgPSBuZXcgV2ViQXNzZW1ibHkuTW9kdWxlKFVpbnQ4QXJyYXkub2YoMHgwLCAweDYxLCAweDczLCAweDZkLCAweDAxLCAweDAwLCAweDAwLCAweDAwKSk7XG4gICAgICAgICAgICAgICAgaWYgKHdtb2R1bGUgaW5zdGFuY2VvZiBXZWJBc3NlbWJseS5Nb2R1bGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy53YXNtU3VwcG9ydGVkID0gbmV3IFdlYkFzc2VtYmx5Lkluc3RhbmNlKHdtb2R1bGUpIGluc3RhbmNlb2YgV2ViQXNzZW1ibHkuSW5zdGFuY2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgLyogZG8gbm90aGluZyBXZWJBc3NlbWJseSBpcyBub3Qgc3VwcG9ydGVkICovXG4gICAgICAgIH1cblxuICAgICAgICAvLyAjIyMgcG9seWZpbGxcbiAgICAgICAgLy8gSG9zdCBhbHNvIHByb3ZpZGVzIGxpbWl0ZWQgc2V0IG9mIHBvbHlmaWxscyB0byBzdXBwb3J0IGxlZ2FjeSBicm93c2Vyc1xuICAgICAgICB0aGlzLnBvbHlmaWxsKCk7XG4gICAgfVxuXG4gICAgLy8gQ3VycmVudGx5IHBvbHlmaWxsIGNvbnRhaW5zIGltcGxlbWVudGF0aW9ucyBmb3I6XG4gICAgLy8gYE1hdGguaW11bGAsIGBNYXRoLmZyb3VuZGAsIGBNYXRoLmNsejMyYCwgYE1hdGgudHJ1bmNgXG4gICAgLyogdHNsaW50OmRpc2FibGU6bm8tYml0d2lzZSAqL1xuICAgIC8qIHRzbGludDpkaXNhYmxlOm9ubHktYXJyb3ctZnVuY3Rpb25zICovXG4gICAgcHJpdmF0ZSBwb2x5ZmlsbCgpIHtcbiAgICAgICAgaWYgKCFNYXRoLmltdWwgfHwgTWF0aC5pbXVsKDB4ZmZmZmZmZmYsIDUpICE9PSAtNSkge1xuICAgICAgICAgICAgTWF0aC5pbXVsID0gZnVuY3Rpb24gaW11bChhOiBhbnksIGI6IGFueSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGFoID0gYSA+Pj4gMTY7XG4gICAgICAgICAgICAgICAgY29uc3QgYWwgPSBhICYgMHhmZmZmO1xuICAgICAgICAgICAgICAgIGNvbnN0IGJoID0gYiA+Pj4gMTY7XG4gICAgICAgICAgICAgICAgY29uc3QgYmwgPSBiICYgMHhmZmZmO1xuICAgICAgICAgICAgICAgIHJldHVybiAoYWwgKiBibCArICgoYWggKiBibCArIGFsICogYmgpIDw8IDE2KSkgfCAwO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBNYXRoLmltdWwgPSBNYXRoLmltdWw7XG5cbiAgICAgICAgaWYgKCFNYXRoLmZyb3VuZCkge1xuICAgICAgICAgICAgTWF0aC5mcm91bmQgPSBmdW5jdGlvbih4KSB7IHJldHVybiB4OyB9O1xuICAgICAgICB9XG4gICAgICAgIE1hdGguZnJvdW5kID0gTWF0aC5mcm91bmQ7XG5cbiAgICAgICAgaWYgKCFNYXRoLmNsejMyKSB7XG4gICAgICAgICAgICBNYXRoLmNsejMyID0gZnVuY3Rpb24oeCkge1xuICAgICAgICAgICAgICAgIHggPSB4ID4+PiAwO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMzI7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoeCAmICgxIDw8ICgzMSAtIGkpKSkgeyByZXR1cm4gaTsgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gMzI7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIE1hdGguY2x6MzIgPSBNYXRoLmNsejMyO1xuXG4gICAgICAgIGlmICghTWF0aC50cnVuYykge1xuICAgICAgICAgICAgTWF0aC50cnVuYyA9IGZ1bmN0aW9uKHgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geCA8IDAgPyBNYXRoLmNlaWwoeCkgOiBNYXRoLmZsb29yKHgpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBNYXRoLnRydW5jID0gTWF0aC50cnVuYztcbiAgICB9XG5cbiAgICAvLyAjIyMgcmVzb2x2ZURvc0JveFxuICAgIC8vIGByZXNvbHZlRG9zQm94YCBpcyBhbm90aGVyIGltcG9ydGFudCB0YXNrIG9mIERvc0hvc3RcbiAgICBwdWJsaWMgcmVzb2x2ZURvc0JveCh1cmw6IHN0cmluZywgY2FjaGU6IElDYWNoZSwgbW9kdWxlOiBEb3NNb2R1bGUpIHtcbiAgICAgICAgLy8gV2hlbiBkb3Nib3ggaXMgcmVzb2x2ZWQsIFdET1NCT1ggbW9kdWxlIGlzIHNldCB0b1xuICAgICAgICAvLyBnbG9iYWwgdmFyaWFibGUgYGV4cG9ydHMuV0RPU0JPWGAuIFRoaXMgdmFyaWFibGUgaXNcbiAgICAgICAgLy8gdXNlZCB0byBwcmV2ZW50IG5leHQgbG9hZHMgb2Ygc2FtZSBkb3Nib3ggbW9kdWxlLlxuICAgICAgICBpZiAodGhpcy5nbG9iYWwuZXhwb3J0cy5XRE9TQk9YKSB7XG4gICAgICAgICAgICBtb2R1bGUub25kb3Nib3godGhpcy5nbG9iYWwuZXhwb3J0cy5XRE9TQk9YLCB0aGlzLmdsb2JhbC5leHBvcnRzLmluc3RhbnRpYXRlV2FzbSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy53ZG9zYm94UHJvbWlzZSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy53ZG9zYm94UHJvbWlzZSA9IHRoaXMuY29tcGlsZURvc0JveCh1cmwsIGNhY2hlLCBtb2R1bGUpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy53ZG9zYm94UHJvbWlzZS50aGVuKChpbnN0YW5jZTogYW55KSA9PiB7XG4gICAgICAgICAgICAvKiBsZWF2ZSBwcm9taXNlIHNjb3BlICovXG4gICAgICAgICAgICBjb25zdCBmbiA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLndkb3Nib3hQcm9taXNlID0gbnVsbDtcbiAgICAgICAgICAgICAgICBtb2R1bGUub25kb3Nib3godGhpcy5nbG9iYWwuZXhwb3J0cy5XRE9TQk9YLCB0aGlzLmdsb2JhbC5leHBvcnRzLmluc3RhbnRpYXRlV2FzbSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgc2V0VGltZW91dChmbiwgMSk7XG4gICAgICAgIH0sIChtZXNzYWdlOiBzdHJpbmcpID0+IHtcbiAgICAgICAgICAgIC8qIGxlYXZlIHByb21pc2Ugc2NvcGUgKi9cbiAgICAgICAgICAgIGNvbnN0IGZuID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMud2Rvc2JveFByb21pc2UgPSBudWxsO1xuICAgICAgICAgICAgICAgIGlmIChtb2R1bGUub25lcnJvciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIG1vZHVsZS5vbmVycm9yKG1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZuLCAxKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gSWYgZG9zYm94IGlzIG5vdCB5ZXQgcmVzb2x2ZWQsIHRoZW46XG4gICAgcHJpdmF0ZSBjb21waWxlRG9zQm94KHVybDogc3RyaW5nLCBjYWNoZTogSUNhY2hlLCBtb2R1bGU6IERvc01vZHVsZSkge1xuICAgICAgICBjb25zdCBmcm9tSW5kZXggPSB1cmwubGFzdEluZGV4T2YoXCIvXCIpO1xuICAgICAgICBjb25zdCB3SW5kZXggPSB1cmwuaW5kZXhPZihcIndcIiwgZnJvbUluZGV4KTtcbiAgICAgICAgY29uc3QgaXNXYXNtVXJsID0gd0luZGV4ID09PSBmcm9tSW5kZXggKyAxICYmIHdJbmRleCA+PSAwO1xuXG4gICAgICAgIGlmICh0aGlzLndhc21TdXBwb3J0ZWQgJiYgaXNXYXNtVXJsKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb21waWxlV2FzbURvc0JveCh1cmwsIGNhY2hlLCBtb2R1bGUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKG1vZHVsZS5sb2cpIHtcbiAgICAgICAgICAgICAgICBtb2R1bGUubG9nKFwiW1dBUk5dIFVzaW5nIGpzIHZlcnNpb24gb2YgZG9zYm94LCBwZXJmb21hbmNlIGNhbiBiZSBsb3dlciB0aGVuIGV4cGVjdGVkXCIpO1xuICAgICAgICAgICAgICAgIG1vZHVsZS5sb2coXCJbREVCVUddIFdhc20gc3VwcG9ydGVkOiBcIiArIHRoaXMud2FzbVN1cHBvcnRlZCArIFwiLCB1cmw6IFwiICsgdXJsKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gZmFsbGJhY2sgdG8ganMgdmVyc2lvbiBpZiB3YXNtIG5vdCBzdXBwb3J0ZWRcbiAgICAgICAgICAgIGlmIChpc1dhc21VcmwpIHtcbiAgICAgICAgICAgICAgICB1cmwgPSB1cmwuc3Vic3RyKDAsIHdJbmRleCkgKyB1cmwuc3Vic3RyKHdJbmRleCArIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29tcGlsZUpzRG9zQm94KHVybCwgY2FjaGUsIG1vZHVsZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGNvbXBpbGVKc0Rvc0JveCh1cmw6IHN0cmluZywgY2FjaGU6IElDYWNoZSwgbW9kdWxlOiBEb3NNb2R1bGUpOiBQcm9taXNlPGFueT4ge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgYnVpbGRUb3RhbCA9IEJ1aWxkLmpzU2l6ZTtcbiAgICAgICAgICAgIGNvbnN0IG1lbVVybCA9IHVybC5yZXBsYWNlKFwiLmpzXCIsIFwiLmpzLm1lbVwiKTtcblxuICAgICAgICAgICAgLy8gKiBIb3N0IGRvd25sb2FkIGBkb3Nib3hganMgKyBtZW0gZmlsZVxuICAgICAgICAgICAgbmV3IFhocihtZW1VcmwsIHtcbiAgICAgICAgICAgICAgICBjYWNoZSxcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IFwiYXJyYXlidWZmZXJcIixcbiAgICAgICAgICAgICAgICBmYWlsOiAodXJsOiBzdHJpbmcsIHN0YXR1czogbnVtYmVyLCBtZXNzYWdlOiBzdHJpbmcpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KFwiQ2FuJ3QgZG93bmxvYWQgbWVtIGZpbGUsIGNvZGU6IFwiICsgc3RhdHVzICtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiLCBtZXNzYWdlOiBcIiArIG1lc3NhZ2UgKyBcIiwgdXJsOiBcIiArIHVybCk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiAobWVtUmVzcG9uc2U6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBuZXcgWGhyKHVybCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzczogKHRvdGFsLCBsb2FkZWQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobW9kdWxlLm9ucHJvZ3Jlc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kdWxlLm9ucHJvZ3Jlc3MoXCJSZXNvbHZpbmcgRG9zQm94XCIsIGJ1aWxkVG90YWwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNYXRoLm1pbihidWlsZFRvdGFsLCBsb2FkZWQpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgZmFpbDogKHVybDogc3RyaW5nLCBzdGF0dXM6IG51bWJlciwgbWVzc2FnZTogc3RyaW5nKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KFwiQ2FuJ3QgZG93bmxvYWQgd2Rvc2JveC5qcywgY29kZTogXCIgKyBzdGF0dXMgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIiwgbWVzc2FnZTogXCIgKyBtZXNzYWdlICsgXCIsIHVybDogXCIgKyB1cmwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IChyZXNwb25zZTogc3RyaW5nKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1vZHVsZS5vbnByb2dyZXNzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kdWxlLm9ucHJvZ3Jlc3MoXCJSZXNvbHZpbmcgRG9zQm94XCIsIGJ1aWxkVG90YWwsIGJ1aWxkVG90YWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlICs9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogdHNsaW50OmRpc2FibGU6bm8tZXZhbCAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmFsLmNhbGwodGhpcywgcmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIHRzbGludDplbmFibGU6bm8tZXZhbCAqL1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgd2Rvc2JveCA9IHRoaXMuZ2xvYmFsLmV4cG9ydHMuV0RPU0JPWDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdsb2JhbC5leHBvcnRzLldET1NCT1ggPSAoTW9kdWxlOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTW9kdWxlLm1lbW9yeUluaXRpYWxpemVyUmVxdWVzdCA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1czogMjAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2U6IG1lbVJlc3BvbnNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IHdkb3Nib3goTW9kdWxlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUodGhpcy5nbG9iYWwuZXhwb3J0cy5XRE9TQk9YKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGNvbXBpbGVXYXNtRG9zQm94KHVybDogc3RyaW5nLCBjYWNoZTogSUNhY2hlLCBtb2R1bGU6IERvc01vZHVsZSk6IFByb21pc2U8YW55PiB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBidWlsZFRvdGFsID0gQnVpbGQud2FzbVNpemUgKyBCdWlsZC53YXNtSnNTaXplO1xuICAgICAgICAgICAgY29uc3Qgd2FzbVVybCA9IHVybC5yZXBsYWNlKFwiLmpzXCIsIFwiLndhc20uanNcIik7XG5cbiAgICAgICAgICAgIC8vICogSG9zdCBkb3dubG9hZHMgYHdkb3Nib3hgIGFzbSArIGpzIHNjcmlwdHNcbiAgICAgICAgICAgIG5ldyBYaHIod2FzbVVybCwge1xuICAgICAgICAgICAgICAgIGNhY2hlLFxuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogXCJhcnJheWJ1ZmZlclwiLFxuICAgICAgICAgICAgICAgIHByb2dyZXNzOiAodG90YWwsIGxvYWRlZCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAobW9kdWxlLm9ucHJvZ3Jlc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZHVsZS5vbnByb2dyZXNzKFwiUmVzb2x2aW5nIERvc0JveFwiLCBidWlsZFRvdGFsLCBNYXRoLm1pbihCdWlsZC53YXNtU2l6ZSwgbG9hZGVkKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGZhaWw6ICh1cmw6IHN0cmluZywgc3RhdHVzOiBudW1iZXIsIG1lc3NhZ2U6IHN0cmluZykgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZWplY3QoXCJDYW4ndCBkb3dubG9hZCB3YXNtLCBjb2RlOiBcIiArIHN0YXR1cyArXG4gICAgICAgICAgICAgICAgICAgICAgICBcIiwgbWVzc2FnZTogXCIgKyBtZXNzYWdlICsgXCIsIHVybDogXCIgKyB1cmwpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgc3VjY2VzczogKHJlc3BvbnNlOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gKiBDb21waWxlIGRvc2JveCB3YXNtIG1vZHVsZVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwcm9taXNlID0gV2ViQXNzZW1ibHkuY29tcGlsZShyZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG9ucmVqZWN0ID0gKHJlYXNvbjogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QocmVhc29uICsgXCJcIik7XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIHByb21pc2UuY2F0Y2gob25yZWplY3QpO1xuICAgICAgICAgICAgICAgICAgICBwcm9taXNlLnRoZW4oKHdhc21Nb2R1bGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2xvYmFsLmV4cG9ydHMuaW5zdGFudGlhdGVXYXNtID0gKGluZm86IGFueSwgcmVjZWl2ZUluc3RhbmNlOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmZvLmVudi5nbG9iYWxzY2FsbCA9ICguLi5hcmdzOiBhbnlbXSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobW9kdWxlLm9uZ2xvYmFscykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kdWxlLm9uZ2xvYmFscy5hcHBseShudWxsLCBhcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gKiAgSW5zdGFuaWF0ZSBpdCBmb3IgZWFjaCBuZXcgZG9zYm94IHJ1bnRpbWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gV2ViQXNzZW1ibHkuaW5zdGFudGlhdGUod2FzbU1vZHVsZSwgaW5mbylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKG9ucmVqZWN0KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbigoaW5zdGFuY2UpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlY2VpdmVJbnN0YW5jZShpbnN0YW5jZSwgd2FzbU1vZHVsZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IFhocih1cmwsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWNoZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzczogKHRvdGFsLCBsb2FkZWQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1vZHVsZS5vbnByb2dyZXNzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2R1bGUub25wcm9ncmVzcyhcIlJlc29sdmluZyBEb3NCb3hcIiwgYnVpbGRUb3RhbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNYXRoLm1pbihidWlsZFRvdGFsLCBCdWlsZC53YXNtU2l6ZSArIGxvYWRlZCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYWlsOiAodXJsOiBzdHJpbmcsIHN0YXR1czogbnVtYmVyLCBtZXNzYWdlOiBzdHJpbmcpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KFwiQ2FuJ3QgZG93bmxvYWQgd2Rvc2JveC5qcywgY29kZTogXCIgKyBzdGF0dXMgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCIsIG1lc3NhZ2U6IFwiICsgbWVzc2FnZSArIFwiLCB1cmw6IFwiICsgdXJsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IChyZXNwb25zZTogc3RyaW5nKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtb2R1bGUub25wcm9ncmVzcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2R1bGUub25wcm9ncmVzcyhcIlJlc29sdmluZyBEb3NCb3hcIiwgYnVpbGRUb3RhbCwgYnVpbGRUb3RhbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZSArPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiB0c2xpbnQ6ZGlzYWJsZTpuby1ldmFsICovXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2YWwuY2FsbCh3aW5kb3csIHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogdHNsaW50OmVuYWJsZTpuby1ldmFsICovXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUodGhpcy5nbG9iYWwuZXhwb3J0cy5XRE9TQk9YKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG59XG5cbmV4cG9ydCBjb25zdCBIb3N0ID0gbmV3IERvc0hvc3QoKTtcbiIsIi8vICMgRG9zTW9kdWxlXG4vLyBEb3NNb2R1bGUgaXMgW2Vtc2NyaXB0ZW4gbW9kdWxlIG9iamVjdF0oaHR0cHM6Ly9rcmlwa2VuLmdpdGh1Yi5pby9lbXNjcmlwdGVuLXNpdGUvZG9jcy9hcGlfcmVmZXJlbmNlL21vZHVsZS5odG1sKSxcbi8vIHdpdGggYWRkaXRpb25hbCBmdW5jdGlvbmFsaXR5XG5pbXBvcnQgeyBEb3NSdW50aW1lIH0gZnJvbSBcIi4vanMtZG9zXCI7XG5pbXBvcnQgeyBCdWlsZCB9IGZyb20gXCIuL2pzLWRvcy1idWlsZFwiO1xuaW1wb3J0IHsgRG9zQ29tbWFuZEludGVyZmFjZSB9IGZyb20gXCIuL2pzLWRvcy1jaVwiO1xuaW1wb3J0IGdldEpzRG9zQ29uZmlnIGZyb20gXCIuL2pzLWRvcy1jb25mXCI7XG5pbXBvcnQgeyBEb3NGUyB9IGZyb20gXCIuL2pzLWRvcy1mc1wiO1xuaW1wb3J0IHsgRG9zT3B0aW9ucyB9IGZyb20gXCIuL2pzLWRvcy1vcHRpb25zXCI7XG5pbXBvcnQgeyBEb3NVaSB9IGZyb20gXCIuL2pzLWRvcy11aVwiO1xuXG5leHBvcnQgY2xhc3MgRG9zTW9kdWxlIGV4dGVuZHMgRG9zT3B0aW9ucyB7XG4gICAgcHVibGljIGlzVmFsaWQ6IGJvb2xlYW4gPSBmYWxzZTtcbiAgICBwdWJsaWMgY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudDtcbiAgICBwdWJsaWMgdmVyc2lvbiA9IEJ1aWxkLnZlcnNpb247XG4gICAgcHVibGljIG9uZ2xvYmFscz86ICguLi5hcmdzOiBhbnlbXSkgPT4gdm9pZDtcblxuICAgIHByaXZhdGUgY2k6IFByb21pc2U8RG9zQ29tbWFuZEludGVyZmFjZT4gfCBudWxsID0gbnVsbDtcbiAgICBwcml2YXRlIGluc3RhbmNlOiBhbnk7XG4gICAgcHJpdmF0ZSBmczogRG9zRlMgfCBudWxsID0gbnVsbDtcbiAgICBwcml2YXRlIHVpOiBEb3NVaSB8IG51bGwgPSBudWxsO1xuICAgIHByaXZhdGUgb25yZWFkeTogKHJ1bnRpbWU6IERvc1J1bnRpbWUpID0+IHZvaWQ7XG5cbiAgICBwcml2YXRlIHRpY2tMaXN0ZW5lcnM6IEFycmF5PCAoKSA9PiB2b2lkID4gPSBbXTtcbiAgICBwcml2YXRlIHBhdXNlTGlzdGVuZXJzOiBBcnJheTwgKCkgPT4gdm9pZCA+ID0gW107XG4gICAgcHJpdmF0ZSByZXN1bWVMaXN0ZW5lcnM6IEFycmF5PCAoKSA9PiB2b2lkID4gPSBbXTtcbiAgICBwcml2YXRlIHRlcm1pbmF0ZUxpc3RlbmVyczogQXJyYXk8ICgpID0+IHZvaWQgPiA9IFtdO1xuXG4gICAgY29uc3RydWN0b3IoY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudCwgb25yZWFkeTogKHJ1bnRpbWU6IERvc1J1bnRpbWUpID0+IHZvaWQpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5jYW52YXMgPSBjYW52YXM7XG4gICAgICAgIHRoaXMub25yZWFkeSA9IG9ucmVhZHk7XG5cbiAgICAgICAgdGhpcy5yZWdpc3RlckRlZmF1bHRMaXN0ZW5lcnMoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlZ2lzdGVyRGVmYXVsdExpc3RlbmVycygpIHtcbiAgICAgICAgbGV0IGhpZGRlbjogc3RyaW5nO1xuICAgICAgICBsZXQgdmlzaWJpbGl0eUNoYW5nZTogc3RyaW5nO1xuXG4gICAgICAgIGlmICh0eXBlb2YgZG9jdW1lbnQuaGlkZGVuICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICBoaWRkZW4gPSBcImhpZGRlblwiO1xuICAgICAgICAgICAgdmlzaWJpbGl0eUNoYW5nZSA9IFwidmlzaWJpbGl0eWNoYW5nZVwiO1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiAoZG9jdW1lbnQgYXMgYW55KS5tb3pIaWRkZW4gIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgIGhpZGRlbiA9IFwibW96SGlkZGVuXCI7XG4gICAgICAgICAgICB2aXNpYmlsaXR5Q2hhbmdlID0gXCJtb3p2aXNpYmlsaXR5Y2hhbmdlXCI7XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIChkb2N1bWVudCBhcyBhbnkpLm1zSGlkZGVuICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICBoaWRkZW4gPSBcIm1zSGlkZGVuXCI7XG4gICAgICAgICAgICB2aXNpYmlsaXR5Q2hhbmdlID0gXCJtc3Zpc2liaWxpdHljaGFuZ2VcIjtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgKGRvY3VtZW50IGFzIGFueSkud2Via2l0SGlkZGVuICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICBoaWRkZW4gPSBcIndlYmtpdEhpZGRlblwiO1xuICAgICAgICAgICAgdmlzaWJpbGl0eUNoYW5nZSA9IFwid2Via2l0dmlzaWJpbGl0eWNoYW5nZVwiO1xuICAgICAgICB9XG5cbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInZpc2liaWxpdHlDaGFuZ2VcIiwgKCkgPT4ge1xuICAgICAgICAgICAgKGRvY3VtZW50IGFzIGFueSlbaGlkZGVuXSA/IHRoaXMucGF1c2UoKSA6IHRoaXMucmVzdW1lKCk7XG4gICAgICAgIH0sIGZhbHNlKTtcblxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImJlZm9yZXVubG9hZFwiLCAoKSA9PiB7XG4gICAgICAgICAgIHRoaXMudGVybWluYXRlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vICMjIyBsb2dnaW5nXG4gICAgLy8gRG9zTW9kdWxlIGltcGxlbWVudHMgc2ltcGx5IGxvZ2dpbmcgZmVhdHVyZXM6XG4gICAgLy8gYGRlYnVnYCwgYGluZm9gLCBgd2FybmAsIGBlcnJvcmAgbWV0aG9kc1xuICAgIHB1YmxpYyBkZWJ1ZyhtZXNzYWdlOiBzdHJpbmcpIHtcbiAgICAgICAgaWYgKHRoaXMubG9nICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMubG9nKFwiW0RFQlVHXSBcIiArIG1lc3NhZ2UpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIGluZm8obWVzc2FnZTogc3RyaW5nKSB7XG4gICAgICAgIGlmICh0aGlzLmxvZyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLmxvZyhcIltJTkZPXSBcIiArIG1lc3NhZ2UpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIHdhcm4obWVzc2FnZTogc3RyaW5nKSB7XG4gICAgICAgIGlmICh0aGlzLmxvZyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLmxvZyhcIltXQVJOXSBcIiArIG1lc3NhZ2UpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIGVycm9yKG1lc3NhZ2U6IHN0cmluZykge1xuICAgICAgICBpZiAodGhpcy5sb2cgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5sb2coXCJbRVJST1JdIFwiICsgbWVzc2FnZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyAjIyMgb25kb3Nib3hcbiAgICBwdWJsaWMgb25kb3Nib3goZG9zYm94OiBhbnksIGluc3RhbnRpYXRlV2FzbTogYW55KSB7XG4gICAgICAgIHRoaXMuaW5mbyhcIkRvc0JveCByZXNvbHZlZFwiKTtcbiAgICAgICAgKHRoaXMgYXMgYW55KS5pbnN0YW50aWF0ZVdhc20gPSBpbnN0YW50aWF0ZVdhc207XG4gICAgICAgIHRoaXMuaW5zdGFuY2UgPSBuZXcgZG9zYm94KHRoaXMpO1xuICAgIH1cblxuICAgIC8vIE1ldGhvZCBgb25kb3Nib3hgIGlzIGNhbGxlZCB3aGVuXG4gICAgLy8gW0hvc3RdKGh0dHBzOi8vanMtZG9zLmNvbS82LjIyL2RvY3MvYXBpL2dlbmVyYXRlLmh0bWw/cGFnZT1qcy1kb3MtaG9zdCkgaXMgcmVzb2x2ZWQuXG4gICAgLy8gVGhpcyBtZXRob2QgaW5zdGFuaWF0ZSB3YXNtIGRvc2JveCBtb2R1bGUgd2l0aCBgdGhpc2AgYXMgZW1zY3JpcHRlblxuICAgIC8vIG1vZHVsZSBvYmplY3QuIEl0IG1lYW5zIHRoYXQgZW1zY3JpcHRlbiB3aWxsIGNhbGxcbiAgICAvLyBgdGhpcy5vblJ1bnRpbWVJbml0aWFsaXplZGAgd2hlbiBydW50aW1lIHdpbGwgYmUgcmVhZHlcblxuICAgIHB1YmxpYyByZXNvbHZlKCkge1xuICAgICAgICBpZiAoIXRoaXMud2Rvc2JveFVybCkge1xuICAgICAgICAgICAgdGhpcy53ZG9zYm94VXJsID0gXCJ3ZG9zYm94LmpzXCI7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXRoaXMubG9nKSB7XG4gICAgICAgICAgICAvKiB0c2xpbnQ6ZGlzYWJsZTpuby1jb25zb2xlICovXG4gICAgICAgICAgICB0aGlzLmxvZyA9IChtZXNzYWdlOiBzdHJpbmcpID0+IGNvbnNvbGUubG9nKG1lc3NhZ2UpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF0aGlzLmNhbnZhcykge1xuICAgICAgICAgICAgaWYgKHRoaXMub25lcnJvciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vbmVycm9yKFwiY2FudmFzIGZpZWxkIGlzIHJlcXVpcmVkLCBidXQgbm90IHNldCFcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXRoaXMub25wcm9ncmVzcykge1xuICAgICAgICAgICAgdGhpcy51aSA9IG5ldyBEb3NVaSh0aGlzKTtcbiAgICAgICAgICAgIHRoaXMub25wcm9ncmVzcyA9IChzdGFnZSwgdG90YWwsIGxvYWRlZCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnVpICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudWkub25wcm9ncmVzcyhzdGFnZSwgdG90YWwsIGxvYWRlZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vICMjIyBzZGwgZGVmYXVsdHNcbiAgICAgICAgLy8gRG9zTW9kdWxlIG92ZXJyaWRlcyBkZWZhdWx0cyBmb3IgZW1zY3JpcHRlbiBTREwgd3JhcHBlclxuICAgICAgICAvLyBmb3IgbWF4aW11bSBwZXJmb3JtYW5jZVxuICAgICAgICAodGhpcyBhcyBhbnkpLlNETCA9IHtcbiAgICAgICAgICAgIGRlZmF1bHRzOiB7XG4gICAgICAgICAgICAgICAgd2lkaHQ6IDMyMCxcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDIwMCxcbiAgICAgICAgICAgICAgICBjb3B5T25Mb2NrOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBkaXNjYXJkT25Mb2NrOiB0cnVlLFxuICAgICAgICAgICAgICAgIG9wYXF1ZUZyb250QnVmZmVyOiBmYWxzZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5pc1ZhbGlkID0gdHJ1ZTtcbiAgICB9XG5cbiAgICAvLyAjIyMgb25SdW50aW1lSW5pdGlhbGl6ZWRcbiAgICBwdWJsaWMgb25SdW50aW1lSW5pdGlhbGl6ZWQoKSB7XG4gICAgICAgIGNvbnN0IG1haW5GbiA9IChhcmdzPzogc3RyaW5nW10pID0+IHtcbiAgICAgICAgICAgIC8vIFdoZW4gZW1zY3JpcHRlbiBydW50aW1lIGlzIGluaXRpYWxpemVkIGFuZCBtYWluXG4gICAgICAgICAgICAvLyBmdW5jdGlvbiBpcyBjYWxsZWQ6XG4gICAgICAgICAgICAvL1xuICAgICAgICAgICAgLy8gKiBEb3NNb2R1bGUgZGV0YWNoIFthdXRvIHVpXShodHRwczovL2pzLWRvcy5jb20vNi4yMi9kb2NzL2FwaS9nZW5lcmF0ZS5odG1sP3BhZ2U9anMtZG9zLXVpKVxuICAgICAgICAgICAgaWYgKHRoaXMudWkgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVpLmRldGFjaCgpO1xuICAgICAgICAgICAgICAgIHRoaXMudWkgPSBudWxsO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIWFyZ3MpIHtcbiAgICAgICAgICAgICAgICBhcmdzID0gW107XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0aGlzLmZzID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlPERvc0NvbW1hbmRJbnRlcmZhY2U+KChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KFwiSWxsZWdhbFN0YXRlOiBmcyBpcyBudWxsXCIpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLmZzLmNoZGlyKFwiL1wiKTtcblxuICAgICAgICAgICAgLy8gKiBXcml0ZSBkZWZhdWx0IFtkb3Nib3guY29uZl0oaHR0cHM6Ly9qcy1kb3MuY29tLzYuMjIvZG9jcy9hcGkvZ2VuZXJhdGUuaHRtbD9wYWdlPWpzLWRvcy1jb25mKVxuICAgICAgICAgICAgLy8gZmlsZSB0byB1c2VyIGRpcmVjdG9yeVxuICAgICAgICAgICAgdGhpcy5mcy5jcmVhdGVGaWxlKFwiL2hvbWUvd2ViX3VzZXIvLmRvc2JveC9kb3Nib3gtanNkb3MuY29uZlwiLCBnZXRKc0Rvc0NvbmZpZyh0aGlzKSk7XG4gICAgICAgICAgICAvLyAqIE1vdW50IGVtc2NyaXB0ZW4gRlMgYXMgZHJpdmUgYzpcbiAgICAgICAgICAgIGFyZ3MudW5zaGlmdChcIi11c2VyY29uZlwiLCBcIi1jXCIsIFwibW91bnQgYyAuXCIsIFwiLWNcIiwgXCJjOlwiKTtcbiAgICAgICAgICAgIC8vICogUnVuIGRvc2JveCB3aXRoIHBhc3NlZCBhcmd1bWVudHMgYW5kIHJlc29sdmVcbiAgICAgICAgICAgIC8vIFtEb3NDb21tYW5kSW50ZXJmYWNlXShodHRwczovL2pzLWRvcy5jb20vNi4yMi9kb2NzL2FwaS9nZW5lcmF0ZS5odG1sP3BhZ2U9anMtZG9zLWNpKVxuICAgICAgICAgICAgKHRoaXMgYXMgYW55KS5jYWxsTWFpbihhcmdzKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZTxEb3NDb21tYW5kSW50ZXJmYWNlPigocmVzb2x2ZSkgPT4ge1xuICAgICAgICAgICAgICAgIG5ldyBEb3NDb21tYW5kSW50ZXJmYWNlKHRoaXMsIChjaTogRG9zQ29tbWFuZEludGVyZmFjZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGNpKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmZzID0gbmV3IERvc0ZTKHRoaXMpO1xuICAgICAgICB0aGlzLm9ucmVhZHkoe1xuICAgICAgICAgICAgZnM6IHRoaXMuZnMsXG4gICAgICAgICAgICBtYWluOiBtYWluRm4sXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vICMjIyByZWdpc3RlclRpY2tMaXN0ZW5lclxuICAgIC8vIHJlZ2lzdHJlZCB0aWNrIGxpc3RlbmVyIGl0IHdpbGwgYmUgY2FsbGVkIGVhY2ggZnJhbWVcbiAgICBwdWJsaWMgcmVnaXN0ZXJUaWNrTGlzdGVuZXIobGlzdGVuZXI6ICgpID0+IHZvaWQpIHtcbiAgICAgICAgdGhpcy50aWNrTGlzdGVuZXJzLnB1c2gobGlzdGVuZXIpO1xuICAgIH1cblxuICAgIC8vICMjIyByZWdpc3RlclBhdXNlTGlzdGVuZXJcbiAgICAvLyByZWdpc3RyZWQgdGljayBsaXN0ZW5lciBpdCB3aWxsIGJlIGNhbGxlZCBlYWNoIGZyYW1lXG4gICAgcHVibGljIHJlZ2lzdGVyUGF1c2VMaXN0ZW5lcihsaXN0ZW5lcjogKCkgPT4gdm9pZCkge1xuICAgICAgICB0aGlzLnBhdXNlTGlzdGVuZXJzLnB1c2gobGlzdGVuZXIpO1xuICAgIH1cblxuICAgIC8vICMjIyByZWdpc3RlclJlc3VtZUxpc3RlbmVyXG4gICAgLy8gcmVnaXN0cmVkIHRpY2sgbGlzdGVuZXIgaXQgd2lsbCBiZSBjYWxsZWQgZWFjaCBmcmFtZVxuICAgIHB1YmxpYyByZWdpc3RlclJlc3VtZUxpc3RlbmVyKGxpc3RlbmVyOiAoKSA9PiB2b2lkKSB7XG4gICAgICAgIHRoaXMucmVzdW1lTGlzdGVuZXJzLnB1c2gobGlzdGVuZXIpO1xuICAgIH1cblxuICAgIC8vICMjIyByZWdpc3RlclRlcm1pbmF0ZUxpc3RlbmVyXG4gICAgLy8gcmVnaXN0cmVkIHRpY2sgbGlzdGVuZXIgaXQgd2lsbCBiZSBjYWxsZWQgZWFjaCBmcmFtZVxuICAgIHB1YmxpYyByZWdpc3RlclRlcm1pbmF0ZUxpc3RlbmVyKGxpc3RlbmVyOiAoKSA9PiB2b2lkKSB7XG4gICAgICAgIHRoaXMudGVybWluYXRlTGlzdGVuZXJzLnB1c2gobGlzdGVuZXIpO1xuICAgIH1cblxuICAgIC8vICMjIyB0aWNrXG4gICAgLy8gdGljayBpcyBjYWxsZWQgaW50ZXJuYWxseSBlYWNoIGZyYW1lLCBubyBuZWVkIHRvIGNhbGxcbiAgICAvLyBpdCBtYW51YWxseVxuICAgIHB1YmxpYyB0aWNrKCkge1xuICAgICAgICBmb3IgKGNvbnN0IGwgb2YgdGhpcy50aWNrTGlzdGVuZXJzKSB7XG4gICAgICAgICAgICBsKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyAjIyMgcGF1c2VcbiAgICAvLyBwYXVzZSBpcyBjYWxsZWQgd2hlbiBkb3Nib3ggdGFiIGJlY2FtZSBpbmFjdGl2ZVxuICAgIHB1YmxpYyBwYXVzZSgpIHtcbiAgICAgICAgZm9yIChjb25zdCBsIG9mIHRoaXMucGF1c2VMaXN0ZW5lcnMpIHtcbiAgICAgICAgICAgIGwoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vICMjIyB0aWNrXG4gICAgLy8gcmVzdW1lIGlzIGNhbGxlZCB3aGVuIGRvc2JveCB0YWIgYmVjYW1lIGFjdGl2ZVxuICAgIHB1YmxpYyByZXN1bWUoKSB7XG4gICAgICAgIGZvciAoY29uc3QgbCBvZiB0aGlzLnJlc3VtZUxpc3RlbmVycykge1xuICAgICAgICAgICAgbCgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gIyMjIHRpY2tcbiAgICAvLyB0ZXJtaW5hdGUgaXMgY2FsbGVkIHdoZW4gZG9zYm94IHRhYiBpcyBjbG9zZWRcbiAgICBwdWJsaWMgdGVybWluYXRlKCkge1xuICAgICAgICBmb3IgKGNvbnN0IGwgb2YgdGhpcy50ZXJtaW5hdGVMaXN0ZW5lcnMpIHtcbiAgICAgICAgICAgIGwoKTtcbiAgICAgICAgfVxuICAgIH1cblxufVxuIiwiLy8gIyBEb3NPcHRpb25zXG4vLyBJcyBhIG9wdGlvbnMgb2JqZWN0IHRoYXQgeW91IHBhc3MgdG8gY29uc3RydWN0b3Igb2Zcbi8vIFtEb3NdKGh0dHBzOi8vanMtZG9zLmNvbS82LjIyL2RvY3MvYXBpL2dlbmVyYXRlLmh0bWw/cGFnZT1qcy1kb3MpXG4vLyBjbGFzcywgdG8gY29uZmlndXJlIGVtdWxhdGlvbiBsYXllclxuXG5leHBvcnQgY2xhc3MgRG9zQm94Q29uZmlnIHtcbi8vICMjIyBjeWNsZXNcbiAgICBwdWJsaWMgY3ljbGVzPzogbnVtYmVyIHwgc3RyaW5nO1xuLy8gICAgQW1vdW50IG9mIGluc3RydWN0aW9ucyBET1NCb3ggdHJpZXMgdG8gZW11bGF0ZSBlYWNoIG1pbGxpc2Vjb25kLlxuLy8gICAgU2V0dGluZyB0aGlzIHZhbHVlIHRvbyBoaWdoIHJlc3VsdHMgaW4gc291bmQgZHJvcG91dHMgYW5kIGxhZ3MuXG4vL1xuLy8gICAgQ3ljbGVzIGNhbiBiZSBzZXQgaW4gMyB3YXlzOlxuLy9cbi8vICAgICogYGF1dG9gIC0gdHJpZXMgdG8gZ3Vlc3Mgd2hhdCBhIGdhbWUgbmVlZHMuIEl0IHVzdWFsbHkgd29ya3MsIGJ1dCBjYW4gZmFpbCBmb3IgY2VydGFpbiBnYW1lcy5cbi8vICAgICogYGZpeGVkICNudW1iZXJgIC0gd2lsbCBzZXQgYSBmaXhlZCBhbW91bnQgb2YgY3ljbGVzLiBUaGlzIGlzIHdoYXQgeW91IFxuLy8gdXN1YWxseSBuZWVkIGlmICdhdXRvJyBmYWlscy4gKEV4YW1wbGU6IGZpeGVkIDQwMDApLlxuLy8gICAgKiBgbWF4YCAtIHdpbGwgYWxsb2NhdGUgYXMgbXVjaCBjeWNsZXMgYXMgeW91ciBjb21wdXRlciBpcyBhYmxlIHRvIGhhbmRsZS5cbi8vXG5cbi8vICMjIyBhdXRvbG9ja1xuICAgIHB1YmxpYyBhdXRvbG9jaz86IGJvb2xlYW47XG4vLyAgICBNb3VzZSB3aWxsIGF1dG9tYXRpY2FsbHkgbG9jaywgaWYgeW91IGNsaWNrIG9uIHRoZSBzY3JlZW4uIChQcmVzcyBDVFJMLUYxMCB0byB1bmxvY2spXG4vL1xuLy8gICAgQnkgZGVmYXVsdCBkb3Nib3ggbW91c2Ugd2lsbCBmb2xsb3cgYnJvd3NlciBjdXJzb3Igd2l0aG91dCBsb2NraW5nLlxuLy8gICAgSXQgbWVhbnMgdGhhdCBqcy1kb3Mgd2lsbCBub3QgdGFrZSBleGNsdXNpdmUgY29udHJvbCBvdmVyIG1vdXNlIHBvaW50ZXIuXG4vLyAgICBIb3dldmVyIHlvdSBjYW4gY2hhbmdlIHRoaXMgYmVoYXZpb3VyIGJ5IHByb3ZpZGluZyBgYXV0b2xvY2s9dHJ1ZWAgaW5cbi8vICAgIGBkb3Nib3guY29uZmAgb3IgdGhyb3VnIGggW0Rvc09wdGlvbnNdKGh0dHBzOi8vanMtZG9zLmNvbS82LjIyL2RvY3MvYXBpL2dlbmVyYXRlLmh0bWw/cGFnZT1qcy1kb3Mtb3B0aW9ucykuXG4vLyAgICBUaGVuIGpzLWRvcyB3aWxsIHRha2UgZXhjbHVzaXZlIGNvbnRyb2wgYW5kIGxvY2sgbW91c2UgaW5zaWRlIGpzLWRvcyBjb250YWluZXIgKHlvdSBjYW4ndCBsZWF2ZSBpdCkuXG4vLyAgICBUaGlzIHdpbGwgaGFwcGVuIGFmdGVyIGZpcnN0IGNsaWNrLCBhbmQgeW91IGNhbiB1bmxvY2sgbW91c2UgYnkgcHJlc3NpbmcgYENUUkwrRjEwYCBvciBgRVNDYC5cbi8vXG59XG5cbi8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTptYXgtY2xhc3Nlcy1wZXItZmlsZVxuZXhwb3J0IGNsYXNzIERvc09wdGlvbnMgZXh0ZW5kcyBEb3NCb3hDb25maWcge1xuXG4gICAgLy8gIyMjIG9ucHJvZ3Jlc3NcbiAgICBwdWJsaWMgb25wcm9ncmVzcz86IChzdGFnZTogc3RyaW5nLCB0b3RhbDogbnVtYmVyLCBsb2FkZWQ6IG51bWJlcikgPT4gdm9pZDtcbiAgICAvLyBwcm9ncmVzcyBldmVudCBsaXN0ZW5lciwgaXQgaXMgZmlyZWQgd2hlbiBsb2FkaW5nIHByb2dyZXNzIGlzIGNoYW5nZWRcbiAgICAvLyBpZiB0aGlzIGZ1bmN0aW9uIGlzIG5vdCBzZXQsIHRoZW5cbiAgICAvLyBbYXV0byB1aV0oaHR0cHM6Ly9qcy1kb3MuY29tLzYuMjIvZG9jcy9hcGkvZ2VuZXJhdGUuaHRtbD9wYWdlPWpzLWRvcy11aSkgd2lsbCBiZSB1c2VkXG4gICAgLy8gdG8gc2hvdyBwcm9ncmVzc1xuICAgIC8vXG4gICAgLy8gKiBgc3RhZ2VgIC0gY3VycmVudCBsb2FkaW5nIHN0YWdlXG4gICAgLy8gKiBgdG90YWxgIC0gdG90YWwgYnl0ZXMgdG8gZG93bmxvYWQgb24gY3VycmVudCBzdGFnZVxuICAgIC8vICogYGxvYWRlZGAgLSBkb3dubG9hZGVkIGJ5dGVzXG5cbiAgICAvLyAjIyMgb25lcnJvclxuICAgIHB1YmxpYyBvbmVycm9yPzogKG1lc3NhZ2U6IHN0cmluZykgPT4gdm9pZDtcbiAgICAvLyB0aGlzIGZ1bmN0aW9uIGlzIGNhbGxlZCB3aGVuIGVycm9yIGhhcHBlbnNcbiAgICAvL1xuICAgIC8vICogYG1lc3NhZ2VgIC0gaW5mb21hdGlvbiBhYm91dCBlcnJvclxuXG4gICAgLy8gIyMjIGxvZ1xuICAgIHB1YmxpYyBsb2c/OiAobWVzc2FnZTogc3RyaW5nKSA9PiB2b2lkO1xuICAgIC8vIHlvdSBjYW4gcHJvdmlkZSBsb2cgZnVuY3Rpb24sIHRvIG92ZXJyaWRlIGxvZ2dpbmcsIGJ5IGRlZmF1bHQganMtZG9zIHVzZXMgY29uc29sZS5sb2cgYXMgaW1wbGVtZW50YXRpb25cblxuICAgIC8vICMjIyB3ZG9zYm94VXJsXG4gICAgcHVibGljIHdkb3Nib3hVcmw/OiBzdHJpbmc7XG4gICAgLy8geW91IGNhbiBzZXQgYWx0ZXJuYXRpdmUgdXJsIGZvciBkb3dubG9hZGluZyBqcy1kb3Mgc2NyaXB0LCBkZWZhdWx0IGlzIGB3ZG9zYm94LmpzYC5cbiAgICAvLyBBZGRpdGlvbmFseSB5b3UgY2FuIGNoYW5nZSB3aGljaCB2YXJpYW50IG9mIGpzLWRvcyBzY3JpcHQgdG8gdXNlOlxuICAgIC8vXG4gICAgLy8gKiBgd2Rvc2JveC5qc2AgLSBkZWZhdWx0IHZhcmlhbnQuIFRoaXMgdmVyc2lvbiBjb21waWxlZCB3aXRoIGxhdGVzdCBlbXNjcmlwdGVuIGFuZCBpbiB0aGVvcnkgc2hvdWxkIHdvcmsgYmVzdFxuICAgIC8vICogYHdkb3Nib3gtZW10ZXJwLmpzYCAtIFRoaXMgdmVyc2lvbiBjb21waWxlZCB3aXRoIGxlZ2FjeSBmYXN0Y29tcCBiYWNrZW5kLCBjYW4gYmUgdXNlZnVsIGluIHJhcmUgY2FzZXNcbiAgICAvLyAoZS5nLiBpZiB5b3UgaGF2ZSBwcm9ibGVtcyB3aXRoIGRlZmF1bHQgdmVyc2lvbilcbiAgICAvLyAqIGB3ZG9zYm94LW5vc3luYy5qc2AgLSBGYXN0ZXN0IHBvc3NpYmxlIHZlcnNpb24sIGJ1dCBsaW1pdGVkLiBZb3UgY2FuJ3QgcnVuIGNvbnNvbGUgcHJvZ3JhbXMvc2hlbGxcbiAgICAvLyBlbXVsYXRpb24gdXNpbmcgaXRcbiAgICAvLyAqIGBkb3Nib3guanNgIC0gc2FtZSBhcyB3ZG9zYm94LmpzIGJ1dCBjb21waWxlZCBhcyBqYXZhc2NyaXB0IChub3Qgd2FzbSlcbiAgICAvLyAqIGBkb3Nib3gtZW10ZXJwLmpzYCAtIHNhbWUgYXMgd2Rvc2JveC1lbXRlcnAuanMgYnV0IGphdmFzY3JpcHQgKG5vdCB3YXNtKVxuICAgIC8vICogYGRvc2JveC1ub3N5bmMuanNgIC0gc2FtZSBhcyB3ZG9zYm94LW5vc3luYy5qcyBidXQgamF2YXNjcmlwdCAobm90IHdhc20pXG4gICAgLy9cbiAgICAvLyBUYWtlIGluIGFjY291bnQgZXZlbiBpZiB5b3UgdXNlIHdhc20gdmVyc2lvbiBvZiBkb3Nib3ggaXQgd2lsbCBiZSBhdXRvbWF0aWNhbGx5IGZhbGxiYWNrZWRcbiAgICAvLyB0byBqYXZhc2NyaXB0IHZlcnNpb24gaWYgd2FzbSBjYW4ndCBzdGFydFxufVxuXG5leHBvcnQgY29uc3QgRG9zQm94Q29uZmlnRGVmYXVsdHM6IERvc0JveENvbmZpZyA9IHtcbiAgICBjeWNsZXM6IFwiYXV0b1wiLFxuICAgIGF1dG9sb2NrOiBmYWxzZSxcbn07XG4iLCIvLyAjIEpzRG9zVWlcbi8vIE9wdGlvbmFsIHVpIG1vZHVsZSBmb3IganMtZG9zLlxuLy8gVGhpcyB1aSB3aWxsIGJlIGFwcGxpZWQgaWYgY2xpZW50IGRpZCBub3Qgc2V0IGBvbnByb2dyZXNzYCBpblxuLy8gW0Rvc09wdGlvbnNdKGh0dHBzOi8vanMtZG9zLmNvbS82LjIyL2RvY3MvYXBpL2dlbmVyYXRlLmh0bWw/cGFnZT1qcy1kb3Mtb3B0aW9ucylcbmltcG9ydCAqIGFzIERvc0RvbSBmcm9tIFwiLi9qcy1kb3MtZG9tXCI7XG5pbXBvcnQgeyBEb3NNb2R1bGUgfSBmcm9tIFwiLi9qcy1kb3MtbW9kdWxlXCI7XG5cbmNvbnN0IG1heFN0YWdlTGVuZ3RoID0gMzI7XG5leHBvcnQgY2xhc3MgRG9zVWkge1xuICAgIHByaXZhdGUgY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudDtcbiAgICBwcml2YXRlIGRvczogRG9zTW9kdWxlO1xuXG4gICAgcHJpdmF0ZSBvdmVybGF5OiBIVE1MRGl2RWxlbWVudCB8IG51bGwgPSBudWxsO1xuICAgIHByaXZhdGUgbG9hZGVyTWVzc2FnZTogSFRNTERpdkVsZW1lbnQgfCBudWxsID0gbnVsbDtcbiAgICBwcml2YXRlIGhpZGRlbjogYm9vbGVhbiA9IHRydWU7XG5cbiAgICBjb25zdHJ1Y3Rvcihkb3M6IERvc01vZHVsZSkge1xuICAgICAgICB0aGlzLmRvcyA9IGRvcztcbiAgICAgICAgdGhpcy5jYW52YXMgPSBkb3MuY2FudmFzO1xuXG4gICAgICAgIC8vICMjIyBIb3cgaXQgd29ya3NcbiAgICAgICAgLy8gVGhpcyB1aSByZXBsYWNlIGNhbnZhcyBlbGVtZW50IHdpdGggZGl2IC5kb3Nib3gtY29udGFpbmVyLFxuICAgICAgICAvLyB0aGF0IGNvbnRhaW5zIG9yaWdpbmFsIGNhbnZhcyBhbmQgLmRvc2JveC1vdmVybGF5IGFzIGNoaWxkcmVuXG4gICAgICAgIC8vIFlvdSBjYW4gY2hhbmdlIHN0eWxlIG9mIHVpIGJ5IGVkaXRpbmcgY3NzIGZvciB0aGlzIHR3byBjbGFzc2VzXG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIERvc0RvbS5hcHBseUNzcyhcImpzLWRvcy11aS1jc3NcIiwgdGhpcy5jc3MpO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5jYW52YXMucGFyZW50RWxlbWVudCAhPT0gbnVsbCAmJiB0aGlzLmNhbnZhcy5wYXJlbnRFbGVtZW50LmNsYXNzTmFtZSAhPT0gXCJkb3Nib3gtY29udGFpbmVyXCIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjb250YWluZXIgPSBEb3NEb20uY3JlYXRlRGl2KFwiZG9zYm94LWNvbnRhaW5lclwiKTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IHBhcmVudCA9IHRoaXMuY2FudmFzLnBhcmVudEVsZW1lbnQ7XG4gICAgICAgICAgICAgICAgcGFyZW50LnJlcGxhY2VDaGlsZChjb250YWluZXIsIHRoaXMuY2FudmFzKTtcbiAgICAgICAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5jYW52YXMpO1xuXG4gICAgICAgICAgICAgICAgY29uc3Qgb3ZlcmxheSA9IERvc0RvbS5jcmVhdGVEaXYoXCJkb3Nib3gtb3ZlcmxheVwiKTtcbiAgICAgICAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQob3ZlcmxheSk7XG5cbiAgICAgICAgICAgICAgICBvdmVybGF5LmlubmVySFRNTCA9IHRoaXMub3ZlcmxheUh0bWw7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuY2FudmFzLnBhcmVudEVsZW1lbnQ7XG4gICAgICAgICAgICBpZiAoY29udGFpbmVyID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSWxsZWdhbCBzdGF0ZSwgY29udGFpbmVyIGlzIG51bGxcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLm92ZXJsYXkgPSB0aGlzLmNoaWxkQnlJZChjb250YWluZXIsIFwiZG9zYm94LW92ZXJsYXlcIik7XG4gICAgICAgICAgICBpZiAodGhpcy5vdmVybGF5ID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSWxsZWdhbCBzdGF0ZSwgb3ZlcmxheSBpcyBudWxsXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5sb2FkZXJNZXNzYWdlID0gdGhpcy5jaGlsZEJ5SWQodGhpcy5vdmVybGF5LCBcImRvc2JveC1sb2FkZXItbWVzc2FnZVwiKTtcblxuICAgICAgICAgICAgdGhpcy5oaWRkZW4gPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5zaG93KCk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHRoaXMub25wcm9ncmVzcyA9IHRoaXMub25wcm9ncmVzc0ZhbGxiYWNrO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIG9ucHJvZ3Jlc3Moc3RhZ2U6IHN0cmluZywgdG90YWw6IG51bWJlciwgbG9hZGVkOiBudW1iZXIpIHtcbiAgICAgICAgaWYgKHN0YWdlLmxlbmd0aCA+IG1heFN0YWdlTGVuZ3RoKSB7XG4gICAgICAgICAgICBzdGFnZSA9IFwi4oCmXCIgKyBzdGFnZS5zdWJzdHIoLW1heFN0YWdlTGVuZ3RoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBzdGFnZSArIFwiIFwiICsgTWF0aC5yb3VuZChsb2FkZWQgKiAxMDAgLyB0b3RhbCAqIDEwKSAvIDEwICsgXCIlXCI7XG4gICAgICAgIGlmICh0aGlzLmxvYWRlck1lc3NhZ2UgIT09IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMubG9hZGVyTWVzc2FnZS5pbm5lckhUTUwgPSBtZXNzYWdlO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZG9zLmluZm8obWVzc2FnZSk7XG5cbiAgICAgICAgaWYgKGxvYWRlZCA+PSB0b3RhbCkge1xuICAgICAgICAgICAgdGhpcy5oaWRlKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnNob3coKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBkZXRhY2goKSB7XG4gICAgICAgIHRoaXMuaGlkZSgpO1xuICAgICAgICB0aGlzLm9ucHJvZ3Jlc3MgPSB0aGlzLm9ucHJvZ3Jlc3NGYWxsYmFjaztcbiAgICB9XG5cbiAgICBwdWJsaWMgaGlkZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuaGlkZGVuKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5oaWRkZW4gPSB0cnVlO1xuICAgICAgICBpZiAodGhpcy5vdmVybGF5ICE9PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLm92ZXJsYXkuc2V0QXR0cmlidXRlKFwic3R5bGVcIiwgXCJkaXNwbGF5OiBub25lXCIpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIHNob3coKSB7XG4gICAgICAgIGlmICghdGhpcy5oaWRkZW4pIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmhpZGRlbiA9IGZhbHNlO1xuICAgICAgICBpZiAodGhpcy5vdmVybGF5ICE9PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLm92ZXJsYXkuc2V0QXR0cmlidXRlKFwic3R5bGVcIiwgXCJkaXNwbGF5OiBibG9ja1wiKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgb25wcm9ncmVzc0ZhbGxiYWNrKHN0YWdlOiBzdHJpbmcsIHRvdGFsOiBudW1iZXIsIGxvYWRlZDogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMuZG9zLmluZm8oc3RhZ2UgKyBcIiBcIiArIGxvYWRlZCAqIDEwMCAvIHRvdGFsICsgXCIlXCIpO1xuICAgIH1cblxuICAgIHByaXZhdGUgY2hpbGRCeUlkKHBhcmVudDogRWxlbWVudCwgY2xhc3NOYW1lOiBzdHJpbmcpOiBIVE1MRGl2RWxlbWVudCB8IG51bGwge1xuICAgICAgICBpZiAocGFyZW50ID09PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGFyZW50LmNoaWxkRWxlbWVudENvdW50OyArK2kpIHtcbiAgICAgICAgICAgIGxldCBjaGlsZDogSFRNTEVsZW1lbnQgfCBudWxsID0gcGFyZW50LmNoaWxkcmVuW2ldIGFzIEhUTUxFbGVtZW50O1xuICAgICAgICAgICAgaWYgKGNoaWxkLmNsYXNzTmFtZSA9PT0gY2xhc3NOYW1lKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNoaWxkIGFzIEhUTUxEaXZFbGVtZW50O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjaGlsZCA9IHRoaXMuY2hpbGRCeUlkKGNoaWxkLCBjbGFzc05hbWUpO1xuICAgICAgICAgICAgaWYgKGNoaWxkICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNoaWxkIGFzIEhUTUxEaXZFbGVtZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgLy8gIyMjIFN0eWxlXG4gICAgLyogdHNsaW50OmRpc2FibGU6bWVtYmVyLW9yZGVyaW5nICovXG4gICAgLyogdHNsaW50OmRpc2FibGU6bWF4LWxpbmUtbGVuZ3RoICovXG4gICAgcHJpdmF0ZSBjc3M6IHN0cmluZyA9IGBcbiAgICAuZG9zYm94LWNvbnRhaW5lciB7IHBvc2l0aW9uOiByZWxhdGl2ZTsgbWluLXdpZHRoOiAzMjBweDsgbWluLWhlaWdodDogMjAwcHg7IGRpc3BsYXk6IGlubGluZS1ibG9jazsgfVxuICAgIC5kb3Nib3gtb3ZlcmxheSwgLmRvc2JveC1sb2FkZXIgeyBwb3NpdGlvbjogYWJzb2x1dGU7IGxlZnQ6IDA7IHJpZ2h0OiAwOyB0b3A6IDA7IGJvdHRvbTogMDsgYmFja2dyb3VuZC1jb2xvcjogcmdiYSg1MSwgNTEsIDUxLCAwLjcpOyB9XG4gICAgLmRvc2JveC1zdGFydCB7IHRleHQtYWxpZ246IGNlbnRlcjsgcG9zaXRpb246IGFic29sdXRlOyBsZWZ0OiAwOyByaWdodDogMDsgYm90dG9tOiA1MCU7IGNvbG9yOiAjZmZmOyBmb250LXNpemU6IDEuNWVtOyB0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZTsgY3Vyc29yOiBwb2ludGVyOyB9XG4gICAgLmRvc2JveC1vdmVybGF5IGEgeyBjb2xvcjogI2ZmZjsgfVxuICAgIC5kb3Nib3gtcG93ZXJlZCB7IHBvc2l0aW9uOiBhYnNvbHV0ZTsgcmlnaHQ6IDFlbTsgYm90dG9tOiAxZW07IGZvbnQtc2l6ZTogMC44ZW07IGNvbG9yOiAjOUM5QzlDOyB9XG4gICAgLmRvc2JveC1sb2FkZXItbWVzc2FnZSB7IHRleHQtYWxpZ246IGNlbnRlcjsgcG9zaXRpb246IGFic29sdXRlOyBsZWZ0OiAwOyByaWdodDogMDsgYm90dG9tOiA1MCU7IG1hcmdpbjogMCAwIC0zZW0gMDsgYm94LXNpemluZzogYm9yZGVyLWJveDsgY29sb3I6ICNmZmY7IGZvbnQtc2l6ZTogMS41ZW07IH1cbiAgICBALW1vei1rZXlmcmFtZXMgbG9hZGluZyB7IDAlIHsgbGVmdDogMDsgfSA1MCUgeyBsZWZ0OiA4LjMzMzMzZW07IH0gMTAwJSB7IGxlZnQ6IDA7IH0gfSBALXdlYmtpdC1rZXlmcmFtZXMgbG9hZGluZyB7IDAlIHsgbGVmdDogMDsgfSA1MCUgeyBsZWZ0OiA4LjMzMzMzZW07IH0gMTAwJSB7IGxlZnQ6IDA7IH0gfSBAa2V5ZnJhbWVzIGxvYWRpbmcgeyAwJSB7IGxlZnQ6IDA7IH0gNTAlIHsgbGVmdDogOC4zMzMzM2VtOyB9IDEwMCUgeyBsZWZ0OiAwOyB9IH0gLnN0LWxvYWRlciB7IHdpZHRoOiAxMGVtOyBoZWlnaHQ6IDIuNWVtOyBwb3NpdGlvbjogYWJzb2x1dGU7IHRvcDogNTAlOyBsZWZ0OiA1MCU7IG1hcmdpbjogLTEuMjVlbSAwIDAgLTVlbTsgYm94LXNpemluZzogYm9yZGVyLWJveDsgfVxuICAgIC5zdC1sb2FkZXI6YmVmb3JlLCAuc3QtbG9hZGVyOmFmdGVyIHsgY29udGVudDogXCJcIjsgZGlzcGxheTogYmxvY2s7IHBvc2l0aW9uOiBhYnNvbHV0ZTsgdG9wOiAwOyBib3R0b206IDA7IHdpZHRoOiAxLjI1ZW07IGJveC1zaXppbmc6IGJvcmRlci1ib3g7IGJvcmRlcjogMC4yNWVtIHNvbGlkICNmZmY7IH1cbiAgICAuc3QtbG9hZGVyOmJlZm9yZSB7IGxlZnQ6IC0wLjc2OTIzZW07IGJvcmRlci1yaWdodDogMDsgfVxuICAgIC5zdC1sb2FkZXI6YWZ0ZXIgeyByaWdodDogLTAuNzY5MjNlbTsgYm9yZGVyLWxlZnQ6IDA7IH1cbiAgICAuc3QtbG9hZGVyIC5lcXVhbCB7IGRpc3BsYXk6IGJsb2NrOyBwb3NpdGlvbjogYWJzb2x1dGU7IHRvcDogNTAlOyBtYXJnaW4tdG9wOiAtMC41ZW07IGxlZnQ6IDQuMTY2NjdlbTsgaGVpZ2h0OiAxZW07IHdpZHRoOiAxLjY2NjY3ZW07IGJvcmRlcjogMC4yNWVtIHNvbGlkICNmZmY7IGJveC1zaXppbmc6IGJvcmRlci1ib3g7IGJvcmRlci13aWR0aDogMC4yNWVtIDA7IC1tb3otYW5pbWF0aW9uOiBsb2FkaW5nIDEuNXMgaW5maW5pdGUgZWFzZS1pbi1vdXQ7IC13ZWJraXQtYW5pbWF0aW9uOiBsb2FkaW5nIDEuNXMgaW5maW5pdGUgZWFzZS1pbi1vdXQ7IGFuaW1hdGlvbjogbG9hZGluZyAxLjVzIGluZmluaXRlIGVhc2UtaW4tb3V0OyBiYWNrZ3JvdW5kOiAjZmZmOyB9XG4gICAgYDtcblxuICAgIC8vICMjIyBUZW1wbGF0ZVxuICAgIC8qIHRzbGludDpkaXNhYmxlOm1lbWJlci1vcmRlcmluZyAqL1xuICAgIC8qIHRzbGludDpkaXNhYmxlOm1heC1saW5lLWxlbmd0aCAqL1xuICAgIHByaXZhdGUgb3ZlcmxheUh0bWw6IHN0cmluZyA9IGBcbiAgICAgICAgPGRpdiBjbGFzcz1cImRvc2JveC1sb2FkZXJcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJzdC1sb2FkZXJcIj5cbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImVxdWFsXCI+PC9zcGFuPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZG9zYm94LWxvYWRlci1tZXNzYWdlXCI+PC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwiZG9zYm94LXBvd2VyZWRcIj5cbiAgICAgICAgICAgIFBvd2VyZWQgYnkgJm5ic3A7PGEgaHJlZj1cImh0dHBzOi8vanMtZG9zLmNvbVwiPmpzLWRvcy5jb208L2E+ICg2LjIyKVxuICAgICAgICA8L2Rpdj5cbiAgICBgO1xufVxuIiwiaW1wb3J0IHsgSUNhY2hlIH0gZnJvbSBcIi4vanMtZG9zLWNhY2hlXCI7XG5pbXBvcnQgQ2FjaGVOb29wIGZyb20gXCIuL2pzLWRvcy1jYWNoZS1ub29wXCI7XG5cbi8vICMgWGhyXG4vLyBgWGhyYCBpcyBzbWFsbCB3cmFwcGVyIG92ZXIgWE1MSHR0cFJlcXVlc3QsIHRoYXQgcHJvdmlkZXMgc29tZVxuLy8gaGFuZHkgbWV0aG9kc1xuXG4vLyBZb3UgY2FuIGNvbmZpZ3JlIFhociB3aXRoIFhock9wdGlvbnMgb2JqZWN0OlxuaW50ZXJmYWNlIFhock9wdGlvbnMge1xuICAgIGNhY2hlOiBJQ2FjaGU7XG4gICAgbWV0aG9kPzogc3RyaW5nO1xuICAgIHN1Y2Nlc3M/OiAocmVzcG9uc2U6IGFueSkgPT4gdm9pZDtcbiAgICBwcm9ncmVzcz86ICh0b3RhbDogbnVtYmVyLCBsb2FkZWQ6IG51bWJlcikgPT4gdm9pZDtcbiAgICBmYWlsPzogKHVybDogc3RyaW5nLCBzdGF0dXM6IG51bWJlciwgbWVzc2FnZTogc3RyaW5nKSA9PiB2b2lkO1xuICAgIGRhdGE/OiBzdHJpbmc7XG4gICAgcmVzcG9uc2VUeXBlPzogWE1MSHR0cFJlcXVlc3RSZXNwb25zZVR5cGU7XG59XG4vLyAqIGBtZXRob2RgIC0gXCJHRVRcIiB8IFwiUE9TVFwiXG4vLyAqIGBzdWNjZXNzYCAtIGNhbGxiYWNrIHdoZW4gcmVzb3VyY2UgaXMgZG93bmxvYWRlZFxuLy8gKiBgcHJvZ3Jlc3NgIC0gY2FsbGJhY2sgZm9yIHByb2dyZXNzXG4vLyAqIGBmYWlsYCAtIGZhaWwgY2FsbGJhY2tcbi8vICogYGRhdGFgIC0gZGF0YSBmb3IgUE9TVCByZXF1ZXN0LCBzaG91bGQgdHlwZW9mIGBhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWRgXG4vLyAqIGByZXNwb25zZVR5cGVgIC0gWE1MSHR0cFJlcXVlc3RSZXNwb25zZVR5cGVcblxuLy8gQ2xhc3MgWGhyIGRvZXMgbm90IGhhdmUgYW55IHB1YmxpYyBtZXRob2RzXG5leHBvcnQgY2xhc3MgWGhyIHtcbiAgICBwcml2YXRlIGNhY2hlOiBJQ2FjaGU7XG4gICAgcHJpdmF0ZSByZXNvdXJjZTogc3RyaW5nO1xuICAgIHByaXZhdGUgb3B0aW9uczogWGhyT3B0aW9ucztcbiAgICBwcml2YXRlIHhocjogWE1MSHR0cFJlcXVlc3QgfCBudWxsID0gbnVsbDtcbiAgICBwcml2YXRlIHRvdGFsOiBudW1iZXIgPSAwO1xuICAgIHByaXZhdGUgbG9hZGVkOiBudW1iZXIgPSAwO1xuXG4gICAgY29uc3RydWN0b3IodXJsOiBzdHJpbmcsIG9wdGlvbnM6IFhock9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy5yZXNvdXJjZSA9IHVybDtcbiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICAgICAgdGhpcy5vcHRpb25zLm1ldGhvZCA9IG9wdGlvbnMubWV0aG9kIHx8IFwiR0VUXCI7XG4gICAgICAgIHRoaXMuY2FjaGUgPSBvcHRpb25zLmNhY2hlIHx8IG5ldyBDYWNoZU5vb3AoKTtcblxuICAgICAgICBpZiAodGhpcy5vcHRpb25zLm1ldGhvZCAgPT09IFwiR0VUXCIpIHtcbiAgICAgICAgICAgIHRoaXMuY2FjaGUuZ2V0KHRoaXMucmVzb3VyY2UsIChkYXRhKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5zdWNjZXNzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vcHRpb25zLnN1Y2Nlc3MoZGF0YSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMubWFrZUh0dHBSZXF1ZXN0KCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgbWFrZUh0dHBSZXF1ZXN0KCkge1xuICAgICAgICB0aGlzLnhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgICAgICB0aGlzLnhoci5vcGVuKHRoaXMub3B0aW9ucy5tZXRob2QgfHwgXCJHRVRcIiwgdGhpcy5yZXNvdXJjZSwgdHJ1ZSk7XG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMubWV0aG9kID09PSBcIlBPU1RcIikge1xuICAgICAgICAgICAgdGhpcy54aHIuc2V0UmVxdWVzdEhlYWRlcihcIkNvbnRlbnQtdHlwZVwiLCBcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwiKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnhoci5vdmVycmlkZU1pbWVUeXBlKFwidGV4dC9wbGFpbjsgY2hhcnNldD14LXVzZXItZGVmaW5lZFwiKTtcblxuICAgICAgICBsZXQgcHJvZ3Jlc3NMaXN0bmVyO1xuICAgICAgICBpZiAodHlwZW9mIChwcm9ncmVzc0xpc3RuZXIgPSB0aGlzLnhocikuYWRkRXZlbnRMaXN0ZW5lciA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICBwcm9ncmVzc0xpc3RuZXIuYWRkRXZlbnRMaXN0ZW5lcihcInByb2dyZXNzXCIsIChldnQpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnRvdGFsID0gZXZ0LnRvdGFsO1xuICAgICAgICAgICAgICAgIHRoaXMubG9hZGVkID0gZXZ0LmxvYWRlZDtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLnByb2dyZXNzKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMucHJvZ3Jlc3MoZXZ0LnRvdGFsLCBldnQubG9hZGVkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBlcnJvckxpc3RlbmVyO1xuICAgICAgICBpZiAodHlwZW9mIChlcnJvckxpc3RlbmVyID0gdGhpcy54aHIpLmFkZEV2ZW50TGlzdGVuZXIgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgZXJyb3JMaXN0ZW5lci5hZGRFdmVudExpc3RlbmVyKFwiZXJyb3JcIiwgKGV2dCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMuZmFpbCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbnMuZmFpbCh0aGlzLnJlc291cmNlLCAodGhpcy54aHIgYXMgWE1MSHR0cFJlcXVlc3QpLnN0YXR1cywgXCJjb25uZWN0aW9uIHByb2JsZW1cIik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkZWxldGUgdGhpcy5vcHRpb25zLmZhaWw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy54aHIub25yZWFkeXN0YXRlY2hhbmdlID0gKCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMub25SZWFkeVN0YXRlQ2hhbmdlKCk7XG4gICAgICAgIH07XG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMucmVzcG9uc2VUeXBlKSB7XG4gICAgICAgICAgICB0aGlzLnhoci5yZXNwb25zZVR5cGUgPSB0aGlzLm9wdGlvbnMucmVzcG9uc2VUeXBlO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMueGhyLnNlbmQodGhpcy5vcHRpb25zLmRhdGEpO1xuICAgIH1cblxuICAgIHByaXZhdGUgb25SZWFkeVN0YXRlQ2hhbmdlKCkge1xuICAgICAgICBjb25zdCB4aHIgPSAodGhpcy54aHIgYXMgWE1MSHR0cFJlcXVlc3QpO1xuICAgICAgICBpZiAoeGhyLnJlYWR5U3RhdGUgPT09IDQpIHtcbiAgICAgICAgICAgIGlmICh4aHIuc3RhdHVzID09PSAyMDApIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdG90YWwgPSBNYXRoLm1heCh0aGlzLnRvdGFsLCB0aGlzLmxvYWRlZCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMucHJvZ3Jlc3MgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vcHRpb25zLnByb2dyZXNzKHRvdGFsLCB0b3RhbCk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLm1ldGhvZCA9PT0gXCJHRVRcIiAmJiB0aGlzLnJlc291cmNlLmluZGV4T2YoXCI/XCIpIDwgMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jYWNoZS5wdXQodGhpcy5yZXNvdXJjZSwgeGhyLnJlc3BvbnNlLCAoKSA9PiB7IC8qKi8gfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zLnN1Y2Nlc3MoeGhyLnJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMub3B0aW9ucy5mYWlsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vcHRpb25zLmZhaWwodGhpcy5yZXNvdXJjZSwgeGhyLnN0YXR1cywgXCJjb25uZWN0aW9uIHByb2JsZW1cIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRlbGV0ZSB0aGlzLm9wdGlvbnMuZmFpbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxufVxuIiwiXG4vLyAjIEV4YW1wbGVcbi8vIGBgYGphdmFzY3JpcHRcbi8vIERvcyhjYW52YXMpLnJlYWR5KChmcywgbWFpbikgPT4ge1xuLy8gICAgIGZzLmV4dHJhY3QoXCJkaWdnZXIuemlwXCIpLnRoZW4oKCkgPT4ge1xuLy8gICAgICAgICBtYWluKFtcIi1jXCIsIFwiRElHR0VSLkNPTVwiXSlcbi8vICAgICB9KTtcbi8vIH0pO1xuLy8gYGBgXG4vLyBEb3MgZnVuY3Rpb24gaXMgZW50cnkgcG9pbnQgdGhhdCBwcm92aWRlcyBlbXVsYXRpb24gbGF5ZXIuXG4vLyBBcyBlbXVsYXRpb24gbGF5ZXIganMtZG9zIHVzZXMgW0Rvc0JveCBwb3J0ZWQgdG8gZW1zY3JpcHRlbl0oaHR0cHM6Ly9naXRodWIuY29tL2RyZWFtbGF5ZXJzL2VtLWRvc2JveC8jY29tcGlsaW5nKS5cblxuLy8gIyBEb3NcblxuaW1wb3J0IG9wZW5DYWNoZSBmcm9tIFwiLi9qcy1kb3MtY2FjaGVcIjtcbmltcG9ydCB7IERvc0NvbW1hbmRJbnRlcmZhY2UgfSBmcm9tIFwiLi9qcy1kb3MtY2lcIjtcbmltcG9ydCB7IERvc0ZTIH0gZnJvbSBcIi4vanMtZG9zLWZzXCI7XG5pbXBvcnQgeyBIb3N0IH0gZnJvbSBcIi4vanMtZG9zLWhvc3RcIjtcbmltcG9ydCB7IERvc01vZHVsZSB9IGZyb20gXCIuL2pzLWRvcy1tb2R1bGVcIjtcbmltcG9ydCB7IERvc09wdGlvbnMgfSBmcm9tIFwiLi9qcy1kb3Mtb3B0aW9uc1wiO1xuXG4vLyBXaGVuIHlvdSBjYWxsIGBEb3MoY2FudmFzLCBvcHRpb25zKWAganMtZG9zIGJlaGluZCB0aGUgc2NlbmUgd2lsbCBkb3dubG9hZFxuLy8gZG9zYm94IGFuZCBwcmVwYXJlIGl0IHRvIHN0YXJ0LiBUaGlzIGZ1bmN0aW9uIHdpbGwgcmV0dXJuIGBQcm9taXNlPERvc1JlYWR5UHJvbWlzZT5gXG4vLyB0aGF0IHdpbGwgYmUgcmVzb2x2ZWQgd2hlbiBkb3Nib3ggaXMgcmVhZHkuIEluIGNhc2Ugb2YgZXJyb3IgcHJvbWlzZVxuLy8gd2lsbCBiZSByZWplY3RlZC5cbi8vXG4vLyAqIGBjYW52YXNgOiBIVE1MQ2FudmFzRWxlbWVudCAtIHRoaXMgY2FudmFzIGVsZW1lbnQgaXMgdXNlZCBhcyB3aW5kb3cgZm9yIGRvc2JveFxuLy8gKiBgb3B0aW9uc2A6IFtEb3NPcHRpb25zXShodHRwczovL2pzLWRvcy5jb20vNi4yMi9kb2NzL2FwaS9nZW5lcmF0ZS5odG1sP3BhZ2U9anMtZG9zLW9wdGlvbnMpIC1cbi8vIG9wdGlvbmFsIGNvbmZpZ3VyYXRpb24gb2JqZWN0XG5leHBvcnQgdHlwZSBEb3NGYWN0b3J5ID0gKGNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQsIG9wdGlvbnM/OiBEb3NPcHRpb25zKSA9PiBEb3NSZWFkeVByb21pc2U7XG5jb25zdCBEb3M6IERvc0ZhY3RvcnkgPSAoY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudCwgb3B0aW9ucz86IERvc09wdGlvbnMpID0+IHtcbiAgICBjb25zdCBwcm9taXNlID0gbmV3IFByb21pc2U8RG9zUnVudGltZT4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICBjb25zdCBtb2R1bGUgPSBuZXcgRG9zTW9kdWxlKGNhbnZhcywgcmVzb2x2ZSk7XG5cbiAgICAgICAgaWYgKCFvcHRpb25zKSB7XG4gICAgICAgICAgICBvcHRpb25zID0ge307XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIW9wdGlvbnMub25lcnJvcikge1xuICAgICAgICAgICAgb3B0aW9ucy5vbmVycm9yID0gKG1lc3NhZ2U6IHN0cmluZykgPT4ge1xuICAgICAgICAgICAgICAgIC8qIHRzbGludDpkaXNhYmxlOm5vLWNvbnNvbGUgKi9cbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKG1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIC8qIHRzbGludDplbmFibGU6bm8tY29uc29sZSAqL1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIE9iamVjdC5hc3NpZ24obW9kdWxlLCBvcHRpb25zKTtcblxuICAgICAgICAvLyAjIyMgRXJyb3IgaGFuZGxpbmdcbiAgICAgICAgLy8gRXJyb3IgaGFuZGxpbmcgc2hvdWxkIHN1cHBvcnQgYm90aCB3YXlzOlxuICAgICAgICAvL1xuICAgICAgICAvLyAqIFRocm91Z2ggcmVqZWN0aW5nIG9mIHByb21pc2VcbiAgICAgICAgLy8gKiBGaXJlIG9uZXJyb3IgZnVuY3Rpb24gb2YgRG9zT3B0aW9ucyBvYmplY3RcblxuICAgICAgICBjb25zdCBvbmVycm9yID0gbW9kdWxlLm9uZXJyb3I7XG4gICAgICAgIG1vZHVsZS5vbmVycm9yID0gKG1lc3NhZ2U6IHN0cmluZykgPT4ge1xuICAgICAgICAgICAgcmVqZWN0KG1lc3NhZ2UpO1xuXG4gICAgICAgICAgICBjb25zdCBmbiA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAob25lcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBvbmVycm9yKG1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgICAgICBtb2R1bGUub25lcnJvciA9IG9uZXJyb3I7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbW9kdWxlLm9uZXJyb3IgPSBtb2R1bGUuZXJyb3I7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgc2V0VGltZW91dChmbiwgMSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgbW9kdWxlLnJlc29sdmUoKTtcbiAgICAgICAgaWYgKCFtb2R1bGUuaXNWYWxpZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgb3BlbkNhY2hlKG1vZHVsZSwgKGNhY2hlKSA9PiB7XG4gICAgICAgICAgICAvLyBTZWUgW0hvc3RdKGh0dHBzOi8vanMtZG9zLmNvbS82LjIyL2RvY3MvYXBpL2dlbmVyYXRlLmh0bWw/cGFnZT1qcy1kb3MtaG9zdClcbiAgICAgICAgICAgIC8vIHRvIHVuZGVyc3RhbmQgcmVzb2x2aW5nIG9mIGVtdWxhdGlvbiBsYXllciAoZG9zYm94KS5cbiAgICAgICAgICAgIEhvc3QucmVzb2x2ZURvc0JveChtb2R1bGUud2Rvc2JveFVybCBhcyBzdHJpbmcsIGNhY2hlLCBtb2R1bGUpO1xuICAgICAgICB9KTtcblxuICAgIH0pO1xuXG4vLyAjIyMgRG9zUmVhZHlQcm9taXNlXG4vLyBJcyBhIFByb21pc2Ugb2JqZWN0IHdpdGggYWRkaXRpb25hbCBtZXRob2QgcmVhZHkuXG4vLyBNZXRob2QgYHJlYWR5YCBpcyBqdXN0IGEgd3JhcHBlciBvdmVyIGB0aGVuYCBtZXRob2QgdGhhdFxuLy8gc3BsaXQgcmVzb2x2ZWQgb2JqZWN0IGludG8gbWVhbmluZ2Z1bCBwYXJ0cy5cblxuICAgIGNvbnN0IGRvc1JlYWR5UHJvbWlzZSA9IChwcm9taXNlIGFzIHVua25vd24pIGFzIERvc1JlYWR5UHJvbWlzZTtcbiAgICBkb3NSZWFkeVByb21pc2UucmVhZHkgPSAob25yZWFkeSkgPT4ge1xuICAgICAgICBkb3NSZWFkeVByb21pc2UudGhlbigocnVudGltZTogRG9zUnVudGltZSkgPT4ge1xuICAgICAgICAgICAgb25yZWFkeShydW50aW1lLmZzLCBydW50aW1lLm1haW4pO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGRvc1JlYWR5UHJvbWlzZTtcbiAgICB9O1xuICAgIHJldHVybiBkb3NSZWFkeVByb21pc2U7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBEb3M7XG5cbmV4cG9ydCB0eXBlIERvc01haW5GbiA9IChhcmdzPzogc3RyaW5nW10pID0+IFByb21pc2U8RG9zQ29tbWFuZEludGVyZmFjZT47XG5cbi8vIFBsYWluIHByb21pc2Ugd2lsbCBiZSByZXNvbHZlZCB3aXRoIGBEb3NSdW50aW1lYCBpbnRlcmZhY2UsIHRoYXRcbi8vIGluY2x1ZGVzOlxuLy9cbi8vICogYGZzYDogW0Rvc0ZTXShodHRwczovL2pzLWRvcy5jb20vNi4yMi9kb2NzL2FwaS9nZW5lcmF0ZS5odG1sP3BhZ2U9anMtZG9zLWZzKSAtXG4vLyBBUEkgZm9yIHdvcmtpbmcgd2l0aCBkb3Nib3ggZmlsZXN5c3RlbVxuLy8gKiBgbWFpbmA6IERvc01haW5GbiAtIGEgZnVuY3Rpb24gdGhhdCB5b3Ugc2hvdWxkIGNhbGwgdG8gYWN0dWFsbCBzdGFydFxuLy8gZG9zYm94LiBJdCdzIGxpa2UgYSBtYWluIGZ1bmN0aW9uIGluIEMrKywgb3Igc2hlbGwgY29tbWFuZCBsaW5lLiBUaGlzIGZ1bmN0aW9uXG4vLyB3aWxsIHJldHVybiBQcm9taXNlIG9mIFtEb3NDb21tYW5kSW50ZXJmYWNlXShodHRwczovL2pzLWRvcy5jb20vNi4yMi9kb2NzL2FwaS9nZW5lcmF0ZS5odG1sP3BhZ2U9anMtZG9zLWNpKS5cbi8vIFlvdSBjYW4gdXNlIGl0IHRvIGNvbnRyb2wgcnVubmVkIGRvc2JveC5cbmV4cG9ydCBpbnRlcmZhY2UgRG9zUnVudGltZSB7XG4gICAgZnM6IERvc0ZTO1xuICAgIG1haW46IERvc01haW5Gbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBEb3NSZWFkeVByb21pc2UgZXh0ZW5kcyBQcm9taXNlPERvc1J1bnRpbWU+IHtcbiAgICAvLyBgb25yZWFkeWAgLSBjYWxsYmFjayB0aGF0IHJlY2VpdmUgRG9zUnVudGltZSBzcGxpdHRlZCBieSBmaWVsZHNcbiAgICByZWFkeTogKG9ucmVhZHk6IChmczogRG9zRlMsIG1haW46IERvc01haW5GbikgPT4gdm9pZCkgPT4gUHJvbWlzZTxEb3NSdW50aW1lPjtcbn1cblxuKHdpbmRvdyBhcyBhbnkpLkRvcyA9IERvcztcbiIsIid1c2Ugc3RyaWN0JztcblxuLy8gY29tcGFyZSBhbmQgaXNCdWZmZXIgdGFrZW4gZnJvbSBodHRwczovL2dpdGh1Yi5jb20vZmVyb3NzL2J1ZmZlci9ibG9iLzY4MGU5ZTVlNDg4ZjIyYWFjMjc1OTlhNTdkYzg0NGE2MzE1OTI4ZGQvaW5kZXguanNcbi8vIG9yaWdpbmFsIG5vdGljZTpcblxuLyohXG4gKiBUaGUgYnVmZmVyIG1vZHVsZSBmcm9tIG5vZGUuanMsIGZvciB0aGUgYnJvd3Nlci5cbiAqXG4gKiBAYXV0aG9yICAgRmVyb3NzIEFib3VraGFkaWplaCA8ZmVyb3NzQGZlcm9zcy5vcmc+IDxodHRwOi8vZmVyb3NzLm9yZz5cbiAqIEBsaWNlbnNlICBNSVRcbiAqL1xuZnVuY3Rpb24gY29tcGFyZShhLCBiKSB7XG4gIGlmIChhID09PSBiKSB7XG4gICAgcmV0dXJuIDA7XG4gIH1cblxuICB2YXIgeCA9IGEubGVuZ3RoO1xuICB2YXIgeSA9IGIubGVuZ3RoO1xuXG4gIGZvciAodmFyIGkgPSAwLCBsZW4gPSBNYXRoLm1pbih4LCB5KTsgaSA8IGxlbjsgKytpKSB7XG4gICAgaWYgKGFbaV0gIT09IGJbaV0pIHtcbiAgICAgIHggPSBhW2ldO1xuICAgICAgeSA9IGJbaV07XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICBpZiAoeCA8IHkpIHtcbiAgICByZXR1cm4gLTE7XG4gIH1cbiAgaWYgKHkgPCB4KSB7XG4gICAgcmV0dXJuIDE7XG4gIH1cbiAgcmV0dXJuIDA7XG59XG5mdW5jdGlvbiBpc0J1ZmZlcihiKSB7XG4gIGlmIChnbG9iYWwuQnVmZmVyICYmIHR5cGVvZiBnbG9iYWwuQnVmZmVyLmlzQnVmZmVyID09PSAnZnVuY3Rpb24nKSB7XG4gICAgcmV0dXJuIGdsb2JhbC5CdWZmZXIuaXNCdWZmZXIoYik7XG4gIH1cbiAgcmV0dXJuICEhKGIgIT0gbnVsbCAmJiBiLl9pc0J1ZmZlcik7XG59XG5cbi8vIGJhc2VkIG9uIG5vZGUgYXNzZXJ0LCBvcmlnaW5hbCBub3RpY2U6XG5cbi8vIGh0dHA6Ly93aWtpLmNvbW1vbmpzLm9yZy93aWtpL1VuaXRfVGVzdGluZy8xLjBcbi8vXG4vLyBUSElTIElTIE5PVCBURVNURUQgTk9SIExJS0VMWSBUTyBXT1JLIE9VVFNJREUgVjghXG4vL1xuLy8gT3JpZ2luYWxseSBmcm9tIG5hcndoYWwuanMgKGh0dHA6Ly9uYXJ3aGFsanMub3JnKVxuLy8gQ29weXJpZ2h0IChjKSAyMDA5IFRob21hcyBSb2JpbnNvbiA8Mjgwbm9ydGguY29tPlxuLy9cbi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHlcbi8vIG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlICdTb2Z0d2FyZScpLCB0b1xuLy8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGVcbi8vIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vclxuLy8gc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXNcbi8vIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4vL1xuLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW5cbi8vIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuLy9cbi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCAnQVMgSVMnLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SXG4vLyBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcbi8vIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRVxuLy8gQVVUSE9SUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU5cbi8vIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT05cbi8vIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuXG52YXIgdXRpbCA9IHJlcXVpcmUoJ3V0aWwvJyk7XG52YXIgaGFzT3duID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcbnZhciBwU2xpY2UgPSBBcnJheS5wcm90b3R5cGUuc2xpY2U7XG52YXIgZnVuY3Rpb25zSGF2ZU5hbWVzID0gKGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIGZvbygpIHt9Lm5hbWUgPT09ICdmb28nO1xufSgpKTtcbmZ1bmN0aW9uIHBUb1N0cmluZyAob2JqKSB7XG4gIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwob2JqKTtcbn1cbmZ1bmN0aW9uIGlzVmlldyhhcnJidWYpIHtcbiAgaWYgKGlzQnVmZmVyKGFycmJ1ZikpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgaWYgKHR5cGVvZiBnbG9iYWwuQXJyYXlCdWZmZXIgIT09ICdmdW5jdGlvbicpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgaWYgKHR5cGVvZiBBcnJheUJ1ZmZlci5pc1ZpZXcgPT09ICdmdW5jdGlvbicpIHtcbiAgICByZXR1cm4gQXJyYXlCdWZmZXIuaXNWaWV3KGFycmJ1Zik7XG4gIH1cbiAgaWYgKCFhcnJidWYpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgaWYgKGFycmJ1ZiBpbnN0YW5jZW9mIERhdGFWaWV3KSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgaWYgKGFycmJ1Zi5idWZmZXIgJiYgYXJyYnVmLmJ1ZmZlciBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuLy8gMS4gVGhlIGFzc2VydCBtb2R1bGUgcHJvdmlkZXMgZnVuY3Rpb25zIHRoYXQgdGhyb3dcbi8vIEFzc2VydGlvbkVycm9yJ3Mgd2hlbiBwYXJ0aWN1bGFyIGNvbmRpdGlvbnMgYXJlIG5vdCBtZXQuIFRoZVxuLy8gYXNzZXJ0IG1vZHVsZSBtdXN0IGNvbmZvcm0gdG8gdGhlIGZvbGxvd2luZyBpbnRlcmZhY2UuXG5cbnZhciBhc3NlcnQgPSBtb2R1bGUuZXhwb3J0cyA9IG9rO1xuXG4vLyAyLiBUaGUgQXNzZXJ0aW9uRXJyb3IgaXMgZGVmaW5lZCBpbiBhc3NlcnQuXG4vLyBuZXcgYXNzZXJ0LkFzc2VydGlvbkVycm9yKHsgbWVzc2FnZTogbWVzc2FnZSxcbi8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3R1YWw6IGFjdHVhbCxcbi8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBlY3RlZDogZXhwZWN0ZWQgfSlcblxudmFyIHJlZ2V4ID0gL1xccypmdW5jdGlvblxccysoW15cXChcXHNdKilcXHMqLztcbi8vIGJhc2VkIG9uIGh0dHBzOi8vZ2l0aHViLmNvbS9samhhcmIvZnVuY3Rpb24ucHJvdG90eXBlLm5hbWUvYmxvYi9hZGVlZWVjOGJmY2M2MDY4YjE4N2Q3ZDlmYjNkNWJiMWQzYTMwODk5L2ltcGxlbWVudGF0aW9uLmpzXG5mdW5jdGlvbiBnZXROYW1lKGZ1bmMpIHtcbiAgaWYgKCF1dGlsLmlzRnVuY3Rpb24oZnVuYykpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKGZ1bmN0aW9uc0hhdmVOYW1lcykge1xuICAgIHJldHVybiBmdW5jLm5hbWU7XG4gIH1cbiAgdmFyIHN0ciA9IGZ1bmMudG9TdHJpbmcoKTtcbiAgdmFyIG1hdGNoID0gc3RyLm1hdGNoKHJlZ2V4KTtcbiAgcmV0dXJuIG1hdGNoICYmIG1hdGNoWzFdO1xufVxuYXNzZXJ0LkFzc2VydGlvbkVycm9yID0gZnVuY3Rpb24gQXNzZXJ0aW9uRXJyb3Iob3B0aW9ucykge1xuICB0aGlzLm5hbWUgPSAnQXNzZXJ0aW9uRXJyb3InO1xuICB0aGlzLmFjdHVhbCA9IG9wdGlvbnMuYWN0dWFsO1xuICB0aGlzLmV4cGVjdGVkID0gb3B0aW9ucy5leHBlY3RlZDtcbiAgdGhpcy5vcGVyYXRvciA9IG9wdGlvbnMub3BlcmF0b3I7XG4gIGlmIChvcHRpb25zLm1lc3NhZ2UpIHtcbiAgICB0aGlzLm1lc3NhZ2UgPSBvcHRpb25zLm1lc3NhZ2U7XG4gICAgdGhpcy5nZW5lcmF0ZWRNZXNzYWdlID0gZmFsc2U7XG4gIH0gZWxzZSB7XG4gICAgdGhpcy5tZXNzYWdlID0gZ2V0TWVzc2FnZSh0aGlzKTtcbiAgICB0aGlzLmdlbmVyYXRlZE1lc3NhZ2UgPSB0cnVlO1xuICB9XG4gIHZhciBzdGFja1N0YXJ0RnVuY3Rpb24gPSBvcHRpb25zLnN0YWNrU3RhcnRGdW5jdGlvbiB8fCBmYWlsO1xuICBpZiAoRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UpIHtcbiAgICBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSh0aGlzLCBzdGFja1N0YXJ0RnVuY3Rpb24pO1xuICB9IGVsc2Uge1xuICAgIC8vIG5vbiB2OCBicm93c2VycyBzbyB3ZSBjYW4gaGF2ZSBhIHN0YWNrdHJhY2VcbiAgICB2YXIgZXJyID0gbmV3IEVycm9yKCk7XG4gICAgaWYgKGVyci5zdGFjaykge1xuICAgICAgdmFyIG91dCA9IGVyci5zdGFjaztcblxuICAgICAgLy8gdHJ5IHRvIHN0cmlwIHVzZWxlc3MgZnJhbWVzXG4gICAgICB2YXIgZm5fbmFtZSA9IGdldE5hbWUoc3RhY2tTdGFydEZ1bmN0aW9uKTtcbiAgICAgIHZhciBpZHggPSBvdXQuaW5kZXhPZignXFxuJyArIGZuX25hbWUpO1xuICAgICAgaWYgKGlkeCA+PSAwKSB7XG4gICAgICAgIC8vIG9uY2Ugd2UgaGF2ZSBsb2NhdGVkIHRoZSBmdW5jdGlvbiBmcmFtZVxuICAgICAgICAvLyB3ZSBuZWVkIHRvIHN0cmlwIG91dCBldmVyeXRoaW5nIGJlZm9yZSBpdCAoYW5kIGl0cyBsaW5lKVxuICAgICAgICB2YXIgbmV4dF9saW5lID0gb3V0LmluZGV4T2YoJ1xcbicsIGlkeCArIDEpO1xuICAgICAgICBvdXQgPSBvdXQuc3Vic3RyaW5nKG5leHRfbGluZSArIDEpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnN0YWNrID0gb3V0O1xuICAgIH1cbiAgfVxufTtcblxuLy8gYXNzZXJ0LkFzc2VydGlvbkVycm9yIGluc3RhbmNlb2YgRXJyb3JcbnV0aWwuaW5oZXJpdHMoYXNzZXJ0LkFzc2VydGlvbkVycm9yLCBFcnJvcik7XG5cbmZ1bmN0aW9uIHRydW5jYXRlKHMsIG4pIHtcbiAgaWYgKHR5cGVvZiBzID09PSAnc3RyaW5nJykge1xuICAgIHJldHVybiBzLmxlbmd0aCA8IG4gPyBzIDogcy5zbGljZSgwLCBuKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gcztcbiAgfVxufVxuZnVuY3Rpb24gaW5zcGVjdChzb21ldGhpbmcpIHtcbiAgaWYgKGZ1bmN0aW9uc0hhdmVOYW1lcyB8fCAhdXRpbC5pc0Z1bmN0aW9uKHNvbWV0aGluZykpIHtcbiAgICByZXR1cm4gdXRpbC5pbnNwZWN0KHNvbWV0aGluZyk7XG4gIH1cbiAgdmFyIHJhd25hbWUgPSBnZXROYW1lKHNvbWV0aGluZyk7XG4gIHZhciBuYW1lID0gcmF3bmFtZSA/ICc6ICcgKyByYXduYW1lIDogJyc7XG4gIHJldHVybiAnW0Z1bmN0aW9uJyArICBuYW1lICsgJ10nO1xufVxuZnVuY3Rpb24gZ2V0TWVzc2FnZShzZWxmKSB7XG4gIHJldHVybiB0cnVuY2F0ZShpbnNwZWN0KHNlbGYuYWN0dWFsKSwgMTI4KSArICcgJyArXG4gICAgICAgICBzZWxmLm9wZXJhdG9yICsgJyAnICtcbiAgICAgICAgIHRydW5jYXRlKGluc3BlY3Qoc2VsZi5leHBlY3RlZCksIDEyOCk7XG59XG5cbi8vIEF0IHByZXNlbnQgb25seSB0aGUgdGhyZWUga2V5cyBtZW50aW9uZWQgYWJvdmUgYXJlIHVzZWQgYW5kXG4vLyB1bmRlcnN0b29kIGJ5IHRoZSBzcGVjLiBJbXBsZW1lbnRhdGlvbnMgb3Igc3ViIG1vZHVsZXMgY2FuIHBhc3Ncbi8vIG90aGVyIGtleXMgdG8gdGhlIEFzc2VydGlvbkVycm9yJ3MgY29uc3RydWN0b3IgLSB0aGV5IHdpbGwgYmVcbi8vIGlnbm9yZWQuXG5cbi8vIDMuIEFsbCBvZiB0aGUgZm9sbG93aW5nIGZ1bmN0aW9ucyBtdXN0IHRocm93IGFuIEFzc2VydGlvbkVycm9yXG4vLyB3aGVuIGEgY29ycmVzcG9uZGluZyBjb25kaXRpb24gaXMgbm90IG1ldCwgd2l0aCBhIG1lc3NhZ2UgdGhhdFxuLy8gbWF5IGJlIHVuZGVmaW5lZCBpZiBub3QgcHJvdmlkZWQuICBBbGwgYXNzZXJ0aW9uIG1ldGhvZHMgcHJvdmlkZVxuLy8gYm90aCB0aGUgYWN0dWFsIGFuZCBleHBlY3RlZCB2YWx1ZXMgdG8gdGhlIGFzc2VydGlvbiBlcnJvciBmb3Jcbi8vIGRpc3BsYXkgcHVycG9zZXMuXG5cbmZ1bmN0aW9uIGZhaWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZSwgb3BlcmF0b3IsIHN0YWNrU3RhcnRGdW5jdGlvbikge1xuICB0aHJvdyBuZXcgYXNzZXJ0LkFzc2VydGlvbkVycm9yKHtcbiAgICBtZXNzYWdlOiBtZXNzYWdlLFxuICAgIGFjdHVhbDogYWN0dWFsLFxuICAgIGV4cGVjdGVkOiBleHBlY3RlZCxcbiAgICBvcGVyYXRvcjogb3BlcmF0b3IsXG4gICAgc3RhY2tTdGFydEZ1bmN0aW9uOiBzdGFja1N0YXJ0RnVuY3Rpb25cbiAgfSk7XG59XG5cbi8vIEVYVEVOU0lPTiEgYWxsb3dzIGZvciB3ZWxsIGJlaGF2ZWQgZXJyb3JzIGRlZmluZWQgZWxzZXdoZXJlLlxuYXNzZXJ0LmZhaWwgPSBmYWlsO1xuXG4vLyA0LiBQdXJlIGFzc2VydGlvbiB0ZXN0cyB3aGV0aGVyIGEgdmFsdWUgaXMgdHJ1dGh5LCBhcyBkZXRlcm1pbmVkXG4vLyBieSAhIWd1YXJkLlxuLy8gYXNzZXJ0Lm9rKGd1YXJkLCBtZXNzYWdlX29wdCk7XG4vLyBUaGlzIHN0YXRlbWVudCBpcyBlcXVpdmFsZW50IHRvIGFzc2VydC5lcXVhbCh0cnVlLCAhIWd1YXJkLFxuLy8gbWVzc2FnZV9vcHQpOy4gVG8gdGVzdCBzdHJpY3RseSBmb3IgdGhlIHZhbHVlIHRydWUsIHVzZVxuLy8gYXNzZXJ0LnN0cmljdEVxdWFsKHRydWUsIGd1YXJkLCBtZXNzYWdlX29wdCk7LlxuXG5mdW5jdGlvbiBvayh2YWx1ZSwgbWVzc2FnZSkge1xuICBpZiAoIXZhbHVlKSBmYWlsKHZhbHVlLCB0cnVlLCBtZXNzYWdlLCAnPT0nLCBhc3NlcnQub2spO1xufVxuYXNzZXJ0Lm9rID0gb2s7XG5cbi8vIDUuIFRoZSBlcXVhbGl0eSBhc3NlcnRpb24gdGVzdHMgc2hhbGxvdywgY29lcmNpdmUgZXF1YWxpdHkgd2l0aFxuLy8gPT0uXG4vLyBhc3NlcnQuZXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZV9vcHQpO1xuXG5hc3NlcnQuZXF1YWwgPSBmdW5jdGlvbiBlcXVhbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlKSB7XG4gIGlmIChhY3R1YWwgIT0gZXhwZWN0ZWQpIGZhaWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZSwgJz09JywgYXNzZXJ0LmVxdWFsKTtcbn07XG5cbi8vIDYuIFRoZSBub24tZXF1YWxpdHkgYXNzZXJ0aW9uIHRlc3RzIGZvciB3aGV0aGVyIHR3byBvYmplY3RzIGFyZSBub3QgZXF1YWxcbi8vIHdpdGggIT0gYXNzZXJ0Lm5vdEVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2Vfb3B0KTtcblxuYXNzZXJ0Lm5vdEVxdWFsID0gZnVuY3Rpb24gbm90RXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZSkge1xuICBpZiAoYWN0dWFsID09IGV4cGVjdGVkKSB7XG4gICAgZmFpbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlLCAnIT0nLCBhc3NlcnQubm90RXF1YWwpO1xuICB9XG59O1xuXG4vLyA3LiBUaGUgZXF1aXZhbGVuY2UgYXNzZXJ0aW9uIHRlc3RzIGEgZGVlcCBlcXVhbGl0eSByZWxhdGlvbi5cbi8vIGFzc2VydC5kZWVwRXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZV9vcHQpO1xuXG5hc3NlcnQuZGVlcEVxdWFsID0gZnVuY3Rpb24gZGVlcEVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UpIHtcbiAgaWYgKCFfZGVlcEVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIGZhbHNlKSkge1xuICAgIGZhaWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZSwgJ2RlZXBFcXVhbCcsIGFzc2VydC5kZWVwRXF1YWwpO1xuICB9XG59O1xuXG5hc3NlcnQuZGVlcFN0cmljdEVxdWFsID0gZnVuY3Rpb24gZGVlcFN0cmljdEVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UpIHtcbiAgaWYgKCFfZGVlcEVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIHRydWUpKSB7XG4gICAgZmFpbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlLCAnZGVlcFN0cmljdEVxdWFsJywgYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbCk7XG4gIH1cbn07XG5cbmZ1bmN0aW9uIF9kZWVwRXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgc3RyaWN0LCBtZW1vcykge1xuICAvLyA3LjEuIEFsbCBpZGVudGljYWwgdmFsdWVzIGFyZSBlcXVpdmFsZW50LCBhcyBkZXRlcm1pbmVkIGJ5ID09PS5cbiAgaWYgKGFjdHVhbCA9PT0gZXhwZWN0ZWQpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSBlbHNlIGlmIChpc0J1ZmZlcihhY3R1YWwpICYmIGlzQnVmZmVyKGV4cGVjdGVkKSkge1xuICAgIHJldHVybiBjb21wYXJlKGFjdHVhbCwgZXhwZWN0ZWQpID09PSAwO1xuXG4gIC8vIDcuMi4gSWYgdGhlIGV4cGVjdGVkIHZhbHVlIGlzIGEgRGF0ZSBvYmplY3QsIHRoZSBhY3R1YWwgdmFsdWUgaXNcbiAgLy8gZXF1aXZhbGVudCBpZiBpdCBpcyBhbHNvIGEgRGF0ZSBvYmplY3QgdGhhdCByZWZlcnMgdG8gdGhlIHNhbWUgdGltZS5cbiAgfSBlbHNlIGlmICh1dGlsLmlzRGF0ZShhY3R1YWwpICYmIHV0aWwuaXNEYXRlKGV4cGVjdGVkKSkge1xuICAgIHJldHVybiBhY3R1YWwuZ2V0VGltZSgpID09PSBleHBlY3RlZC5nZXRUaW1lKCk7XG5cbiAgLy8gNy4zIElmIHRoZSBleHBlY3RlZCB2YWx1ZSBpcyBhIFJlZ0V4cCBvYmplY3QsIHRoZSBhY3R1YWwgdmFsdWUgaXNcbiAgLy8gZXF1aXZhbGVudCBpZiBpdCBpcyBhbHNvIGEgUmVnRXhwIG9iamVjdCB3aXRoIHRoZSBzYW1lIHNvdXJjZSBhbmRcbiAgLy8gcHJvcGVydGllcyAoYGdsb2JhbGAsIGBtdWx0aWxpbmVgLCBgbGFzdEluZGV4YCwgYGlnbm9yZUNhc2VgKS5cbiAgfSBlbHNlIGlmICh1dGlsLmlzUmVnRXhwKGFjdHVhbCkgJiYgdXRpbC5pc1JlZ0V4cChleHBlY3RlZCkpIHtcbiAgICByZXR1cm4gYWN0dWFsLnNvdXJjZSA9PT0gZXhwZWN0ZWQuc291cmNlICYmXG4gICAgICAgICAgIGFjdHVhbC5nbG9iYWwgPT09IGV4cGVjdGVkLmdsb2JhbCAmJlxuICAgICAgICAgICBhY3R1YWwubXVsdGlsaW5lID09PSBleHBlY3RlZC5tdWx0aWxpbmUgJiZcbiAgICAgICAgICAgYWN0dWFsLmxhc3RJbmRleCA9PT0gZXhwZWN0ZWQubGFzdEluZGV4ICYmXG4gICAgICAgICAgIGFjdHVhbC5pZ25vcmVDYXNlID09PSBleHBlY3RlZC5pZ25vcmVDYXNlO1xuXG4gIC8vIDcuNC4gT3RoZXIgcGFpcnMgdGhhdCBkbyBub3QgYm90aCBwYXNzIHR5cGVvZiB2YWx1ZSA9PSAnb2JqZWN0JyxcbiAgLy8gZXF1aXZhbGVuY2UgaXMgZGV0ZXJtaW5lZCBieSA9PS5cbiAgfSBlbHNlIGlmICgoYWN0dWFsID09PSBudWxsIHx8IHR5cGVvZiBhY3R1YWwgIT09ICdvYmplY3QnKSAmJlxuICAgICAgICAgICAgIChleHBlY3RlZCA9PT0gbnVsbCB8fCB0eXBlb2YgZXhwZWN0ZWQgIT09ICdvYmplY3QnKSkge1xuICAgIHJldHVybiBzdHJpY3QgPyBhY3R1YWwgPT09IGV4cGVjdGVkIDogYWN0dWFsID09IGV4cGVjdGVkO1xuXG4gIC8vIElmIGJvdGggdmFsdWVzIGFyZSBpbnN0YW5jZXMgb2YgdHlwZWQgYXJyYXlzLCB3cmFwIHRoZWlyIHVuZGVybHlpbmdcbiAgLy8gQXJyYXlCdWZmZXJzIGluIGEgQnVmZmVyIGVhY2ggdG8gaW5jcmVhc2UgcGVyZm9ybWFuY2VcbiAgLy8gVGhpcyBvcHRpbWl6YXRpb24gcmVxdWlyZXMgdGhlIGFycmF5cyB0byBoYXZlIHRoZSBzYW1lIHR5cGUgYXMgY2hlY2tlZCBieVxuICAvLyBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nIChha2EgcFRvU3RyaW5nKS4gTmV2ZXIgcGVyZm9ybSBiaW5hcnlcbiAgLy8gY29tcGFyaXNvbnMgZm9yIEZsb2F0KkFycmF5cywgdGhvdWdoLCBzaW5jZSBlLmcuICswID09PSAtMCBidXQgdGhlaXJcbiAgLy8gYml0IHBhdHRlcm5zIGFyZSBub3QgaWRlbnRpY2FsLlxuICB9IGVsc2UgaWYgKGlzVmlldyhhY3R1YWwpICYmIGlzVmlldyhleHBlY3RlZCkgJiZcbiAgICAgICAgICAgICBwVG9TdHJpbmcoYWN0dWFsKSA9PT0gcFRvU3RyaW5nKGV4cGVjdGVkKSAmJlxuICAgICAgICAgICAgICEoYWN0dWFsIGluc3RhbmNlb2YgRmxvYXQzMkFycmF5IHx8XG4gICAgICAgICAgICAgICBhY3R1YWwgaW5zdGFuY2VvZiBGbG9hdDY0QXJyYXkpKSB7XG4gICAgcmV0dXJuIGNvbXBhcmUobmV3IFVpbnQ4QXJyYXkoYWN0dWFsLmJ1ZmZlciksXG4gICAgICAgICAgICAgICAgICAgbmV3IFVpbnQ4QXJyYXkoZXhwZWN0ZWQuYnVmZmVyKSkgPT09IDA7XG5cbiAgLy8gNy41IEZvciBhbGwgb3RoZXIgT2JqZWN0IHBhaXJzLCBpbmNsdWRpbmcgQXJyYXkgb2JqZWN0cywgZXF1aXZhbGVuY2UgaXNcbiAgLy8gZGV0ZXJtaW5lZCBieSBoYXZpbmcgdGhlIHNhbWUgbnVtYmVyIG9mIG93bmVkIHByb3BlcnRpZXMgKGFzIHZlcmlmaWVkXG4gIC8vIHdpdGggT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKSwgdGhlIHNhbWUgc2V0IG9mIGtleXNcbiAgLy8gKGFsdGhvdWdoIG5vdCBuZWNlc3NhcmlseSB0aGUgc2FtZSBvcmRlciksIGVxdWl2YWxlbnQgdmFsdWVzIGZvciBldmVyeVxuICAvLyBjb3JyZXNwb25kaW5nIGtleSwgYW5kIGFuIGlkZW50aWNhbCAncHJvdG90eXBlJyBwcm9wZXJ0eS4gTm90ZTogdGhpc1xuICAvLyBhY2NvdW50cyBmb3IgYm90aCBuYW1lZCBhbmQgaW5kZXhlZCBwcm9wZXJ0aWVzIG9uIEFycmF5cy5cbiAgfSBlbHNlIGlmIChpc0J1ZmZlcihhY3R1YWwpICE9PSBpc0J1ZmZlcihleHBlY3RlZCkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH0gZWxzZSB7XG4gICAgbWVtb3MgPSBtZW1vcyB8fCB7YWN0dWFsOiBbXSwgZXhwZWN0ZWQ6IFtdfTtcblxuICAgIHZhciBhY3R1YWxJbmRleCA9IG1lbW9zLmFjdHVhbC5pbmRleE9mKGFjdHVhbCk7XG4gICAgaWYgKGFjdHVhbEluZGV4ICE9PSAtMSkge1xuICAgICAgaWYgKGFjdHVhbEluZGV4ID09PSBtZW1vcy5leHBlY3RlZC5pbmRleE9mKGV4cGVjdGVkKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBtZW1vcy5hY3R1YWwucHVzaChhY3R1YWwpO1xuICAgIG1lbW9zLmV4cGVjdGVkLnB1c2goZXhwZWN0ZWQpO1xuXG4gICAgcmV0dXJuIG9iakVxdWl2KGFjdHVhbCwgZXhwZWN0ZWQsIHN0cmljdCwgbWVtb3MpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGlzQXJndW1lbnRzKG9iamVjdCkge1xuICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG9iamVjdCkgPT0gJ1tvYmplY3QgQXJndW1lbnRzXSc7XG59XG5cbmZ1bmN0aW9uIG9iakVxdWl2KGEsIGIsIHN0cmljdCwgYWN0dWFsVmlzaXRlZE9iamVjdHMpIHtcbiAgaWYgKGEgPT09IG51bGwgfHwgYSA9PT0gdW5kZWZpbmVkIHx8IGIgPT09IG51bGwgfHwgYiA9PT0gdW5kZWZpbmVkKVxuICAgIHJldHVybiBmYWxzZTtcbiAgLy8gaWYgb25lIGlzIGEgcHJpbWl0aXZlLCB0aGUgb3RoZXIgbXVzdCBiZSBzYW1lXG4gIGlmICh1dGlsLmlzUHJpbWl0aXZlKGEpIHx8IHV0aWwuaXNQcmltaXRpdmUoYikpXG4gICAgcmV0dXJuIGEgPT09IGI7XG4gIGlmIChzdHJpY3QgJiYgT2JqZWN0LmdldFByb3RvdHlwZU9mKGEpICE9PSBPYmplY3QuZ2V0UHJvdG90eXBlT2YoYikpXG4gICAgcmV0dXJuIGZhbHNlO1xuICB2YXIgYUlzQXJncyA9IGlzQXJndW1lbnRzKGEpO1xuICB2YXIgYklzQXJncyA9IGlzQXJndW1lbnRzKGIpO1xuICBpZiAoKGFJc0FyZ3MgJiYgIWJJc0FyZ3MpIHx8ICghYUlzQXJncyAmJiBiSXNBcmdzKSlcbiAgICByZXR1cm4gZmFsc2U7XG4gIGlmIChhSXNBcmdzKSB7XG4gICAgYSA9IHBTbGljZS5jYWxsKGEpO1xuICAgIGIgPSBwU2xpY2UuY2FsbChiKTtcbiAgICByZXR1cm4gX2RlZXBFcXVhbChhLCBiLCBzdHJpY3QpO1xuICB9XG4gIHZhciBrYSA9IG9iamVjdEtleXMoYSk7XG4gIHZhciBrYiA9IG9iamVjdEtleXMoYik7XG4gIHZhciBrZXksIGk7XG4gIC8vIGhhdmluZyB0aGUgc2FtZSBudW1iZXIgb2Ygb3duZWQgcHJvcGVydGllcyAoa2V5cyBpbmNvcnBvcmF0ZXNcbiAgLy8gaGFzT3duUHJvcGVydHkpXG4gIGlmIChrYS5sZW5ndGggIT09IGtiLmxlbmd0aClcbiAgICByZXR1cm4gZmFsc2U7XG4gIC8vdGhlIHNhbWUgc2V0IG9mIGtleXMgKGFsdGhvdWdoIG5vdCBuZWNlc3NhcmlseSB0aGUgc2FtZSBvcmRlciksXG4gIGthLnNvcnQoKTtcbiAga2Iuc29ydCgpO1xuICAvL35+fmNoZWFwIGtleSB0ZXN0XG4gIGZvciAoaSA9IGthLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgaWYgKGthW2ldICE9PSBrYltpXSlcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICAvL2VxdWl2YWxlbnQgdmFsdWVzIGZvciBldmVyeSBjb3JyZXNwb25kaW5nIGtleSwgYW5kXG4gIC8vfn5+cG9zc2libHkgZXhwZW5zaXZlIGRlZXAgdGVzdFxuICBmb3IgKGkgPSBrYS5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgIGtleSA9IGthW2ldO1xuICAgIGlmICghX2RlZXBFcXVhbChhW2tleV0sIGJba2V5XSwgc3RyaWN0LCBhY3R1YWxWaXNpdGVkT2JqZWN0cykpXG4gICAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgcmV0dXJuIHRydWU7XG59XG5cbi8vIDguIFRoZSBub24tZXF1aXZhbGVuY2UgYXNzZXJ0aW9uIHRlc3RzIGZvciBhbnkgZGVlcCBpbmVxdWFsaXR5LlxuLy8gYXNzZXJ0Lm5vdERlZXBFcXVhbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlX29wdCk7XG5cbmFzc2VydC5ub3REZWVwRXF1YWwgPSBmdW5jdGlvbiBub3REZWVwRXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZSkge1xuICBpZiAoX2RlZXBFcXVhbChhY3R1YWwsIGV4cGVjdGVkLCBmYWxzZSkpIHtcbiAgICBmYWlsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UsICdub3REZWVwRXF1YWwnLCBhc3NlcnQubm90RGVlcEVxdWFsKTtcbiAgfVxufTtcblxuYXNzZXJ0Lm5vdERlZXBTdHJpY3RFcXVhbCA9IG5vdERlZXBTdHJpY3RFcXVhbDtcbmZ1bmN0aW9uIG5vdERlZXBTdHJpY3RFcXVhbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlKSB7XG4gIGlmIChfZGVlcEVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIHRydWUpKSB7XG4gICAgZmFpbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlLCAnbm90RGVlcFN0cmljdEVxdWFsJywgbm90RGVlcFN0cmljdEVxdWFsKTtcbiAgfVxufVxuXG5cbi8vIDkuIFRoZSBzdHJpY3QgZXF1YWxpdHkgYXNzZXJ0aW9uIHRlc3RzIHN0cmljdCBlcXVhbGl0eSwgYXMgZGV0ZXJtaW5lZCBieSA9PT0uXG4vLyBhc3NlcnQuc3RyaWN0RXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZV9vcHQpO1xuXG5hc3NlcnQuc3RyaWN0RXF1YWwgPSBmdW5jdGlvbiBzdHJpY3RFcXVhbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlKSB7XG4gIGlmIChhY3R1YWwgIT09IGV4cGVjdGVkKSB7XG4gICAgZmFpbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlLCAnPT09JywgYXNzZXJ0LnN0cmljdEVxdWFsKTtcbiAgfVxufTtcblxuLy8gMTAuIFRoZSBzdHJpY3Qgbm9uLWVxdWFsaXR5IGFzc2VydGlvbiB0ZXN0cyBmb3Igc3RyaWN0IGluZXF1YWxpdHksIGFzXG4vLyBkZXRlcm1pbmVkIGJ5ICE9PS4gIGFzc2VydC5ub3RTdHJpY3RFcXVhbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlX29wdCk7XG5cbmFzc2VydC5ub3RTdHJpY3RFcXVhbCA9IGZ1bmN0aW9uIG5vdFN0cmljdEVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UpIHtcbiAgaWYgKGFjdHVhbCA9PT0gZXhwZWN0ZWQpIHtcbiAgICBmYWlsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UsICchPT0nLCBhc3NlcnQubm90U3RyaWN0RXF1YWwpO1xuICB9XG59O1xuXG5mdW5jdGlvbiBleHBlY3RlZEV4Y2VwdGlvbihhY3R1YWwsIGV4cGVjdGVkKSB7XG4gIGlmICghYWN0dWFsIHx8ICFleHBlY3RlZCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGlmIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZXhwZWN0ZWQpID09ICdbb2JqZWN0IFJlZ0V4cF0nKSB7XG4gICAgcmV0dXJuIGV4cGVjdGVkLnRlc3QoYWN0dWFsKTtcbiAgfVxuXG4gIHRyeSB7XG4gICAgaWYgKGFjdHVhbCBpbnN0YW5jZW9mIGV4cGVjdGVkKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICAvLyBJZ25vcmUuICBUaGUgaW5zdGFuY2VvZiBjaGVjayBkb2Vzbid0IHdvcmsgZm9yIGFycm93IGZ1bmN0aW9ucy5cbiAgfVxuXG4gIGlmIChFcnJvci5pc1Byb3RvdHlwZU9mKGV4cGVjdGVkKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHJldHVybiBleHBlY3RlZC5jYWxsKHt9LCBhY3R1YWwpID09PSB0cnVlO1xufVxuXG5mdW5jdGlvbiBfdHJ5QmxvY2soYmxvY2spIHtcbiAgdmFyIGVycm9yO1xuICB0cnkge1xuICAgIGJsb2NrKCk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBlcnJvciA9IGU7XG4gIH1cbiAgcmV0dXJuIGVycm9yO1xufVxuXG5mdW5jdGlvbiBfdGhyb3dzKHNob3VsZFRocm93LCBibG9jaywgZXhwZWN0ZWQsIG1lc3NhZ2UpIHtcbiAgdmFyIGFjdHVhbDtcblxuICBpZiAodHlwZW9mIGJsb2NrICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignXCJibG9ja1wiIGFyZ3VtZW50IG11c3QgYmUgYSBmdW5jdGlvbicpO1xuICB9XG5cbiAgaWYgKHR5cGVvZiBleHBlY3RlZCA9PT0gJ3N0cmluZycpIHtcbiAgICBtZXNzYWdlID0gZXhwZWN0ZWQ7XG4gICAgZXhwZWN0ZWQgPSBudWxsO1xuICB9XG5cbiAgYWN0dWFsID0gX3RyeUJsb2NrKGJsb2NrKTtcblxuICBtZXNzYWdlID0gKGV4cGVjdGVkICYmIGV4cGVjdGVkLm5hbWUgPyAnICgnICsgZXhwZWN0ZWQubmFtZSArICcpLicgOiAnLicpICtcbiAgICAgICAgICAgIChtZXNzYWdlID8gJyAnICsgbWVzc2FnZSA6ICcuJyk7XG5cbiAgaWYgKHNob3VsZFRocm93ICYmICFhY3R1YWwpIHtcbiAgICBmYWlsKGFjdHVhbCwgZXhwZWN0ZWQsICdNaXNzaW5nIGV4cGVjdGVkIGV4Y2VwdGlvbicgKyBtZXNzYWdlKTtcbiAgfVxuXG4gIHZhciB1c2VyUHJvdmlkZWRNZXNzYWdlID0gdHlwZW9mIG1lc3NhZ2UgPT09ICdzdHJpbmcnO1xuICB2YXIgaXNVbndhbnRlZEV4Y2VwdGlvbiA9ICFzaG91bGRUaHJvdyAmJiB1dGlsLmlzRXJyb3IoYWN0dWFsKTtcbiAgdmFyIGlzVW5leHBlY3RlZEV4Y2VwdGlvbiA9ICFzaG91bGRUaHJvdyAmJiBhY3R1YWwgJiYgIWV4cGVjdGVkO1xuXG4gIGlmICgoaXNVbndhbnRlZEV4Y2VwdGlvbiAmJlxuICAgICAgdXNlclByb3ZpZGVkTWVzc2FnZSAmJlxuICAgICAgZXhwZWN0ZWRFeGNlcHRpb24oYWN0dWFsLCBleHBlY3RlZCkpIHx8XG4gICAgICBpc1VuZXhwZWN0ZWRFeGNlcHRpb24pIHtcbiAgICBmYWlsKGFjdHVhbCwgZXhwZWN0ZWQsICdHb3QgdW53YW50ZWQgZXhjZXB0aW9uJyArIG1lc3NhZ2UpO1xuICB9XG5cbiAgaWYgKChzaG91bGRUaHJvdyAmJiBhY3R1YWwgJiYgZXhwZWN0ZWQgJiZcbiAgICAgICFleHBlY3RlZEV4Y2VwdGlvbihhY3R1YWwsIGV4cGVjdGVkKSkgfHwgKCFzaG91bGRUaHJvdyAmJiBhY3R1YWwpKSB7XG4gICAgdGhyb3cgYWN0dWFsO1xuICB9XG59XG5cbi8vIDExLiBFeHBlY3RlZCB0byB0aHJvdyBhbiBlcnJvcjpcbi8vIGFzc2VydC50aHJvd3MoYmxvY2ssIEVycm9yX29wdCwgbWVzc2FnZV9vcHQpO1xuXG5hc3NlcnQudGhyb3dzID0gZnVuY3Rpb24oYmxvY2ssIC8qb3B0aW9uYWwqL2Vycm9yLCAvKm9wdGlvbmFsKi9tZXNzYWdlKSB7XG4gIF90aHJvd3ModHJ1ZSwgYmxvY2ssIGVycm9yLCBtZXNzYWdlKTtcbn07XG5cbi8vIEVYVEVOU0lPTiEgVGhpcyBpcyBhbm5veWluZyB0byB3cml0ZSBvdXRzaWRlIHRoaXMgbW9kdWxlLlxuYXNzZXJ0LmRvZXNOb3RUaHJvdyA9IGZ1bmN0aW9uKGJsb2NrLCAvKm9wdGlvbmFsKi9lcnJvciwgLypvcHRpb25hbCovbWVzc2FnZSkge1xuICBfdGhyb3dzKGZhbHNlLCBibG9jaywgZXJyb3IsIG1lc3NhZ2UpO1xufTtcblxuYXNzZXJ0LmlmRXJyb3IgPSBmdW5jdGlvbihlcnIpIHsgaWYgKGVycikgdGhyb3cgZXJyOyB9O1xuXG52YXIgb2JqZWN0S2V5cyA9IE9iamVjdC5rZXlzIHx8IGZ1bmN0aW9uIChvYmopIHtcbiAgdmFyIGtleXMgPSBbXTtcbiAgZm9yICh2YXIga2V5IGluIG9iaikge1xuICAgIGlmIChoYXNPd24uY2FsbChvYmosIGtleSkpIGtleXMucHVzaChrZXkpO1xuICB9XG4gIHJldHVybiBrZXlzO1xufTtcbiIsImlmICh0eXBlb2YgT2JqZWN0LmNyZWF0ZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAvLyBpbXBsZW1lbnRhdGlvbiBmcm9tIHN0YW5kYXJkIG5vZGUuanMgJ3V0aWwnIG1vZHVsZVxuICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGluaGVyaXRzKGN0b3IsIHN1cGVyQ3Rvcikge1xuICAgIGN0b3Iuc3VwZXJfID0gc3VwZXJDdG9yXG4gICAgY3Rvci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ3Rvci5wcm90b3R5cGUsIHtcbiAgICAgIGNvbnN0cnVjdG9yOiB7XG4gICAgICAgIHZhbHVlOiBjdG9yLFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgfVxuICAgIH0pO1xuICB9O1xufSBlbHNlIHtcbiAgLy8gb2xkIHNjaG9vbCBzaGltIGZvciBvbGQgYnJvd3NlcnNcbiAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBpbmhlcml0cyhjdG9yLCBzdXBlckN0b3IpIHtcbiAgICBjdG9yLnN1cGVyXyA9IHN1cGVyQ3RvclxuICAgIHZhciBUZW1wQ3RvciA9IGZ1bmN0aW9uICgpIHt9XG4gICAgVGVtcEN0b3IucHJvdG90eXBlID0gc3VwZXJDdG9yLnByb3RvdHlwZVxuICAgIGN0b3IucHJvdG90eXBlID0gbmV3IFRlbXBDdG9yKClcbiAgICBjdG9yLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IGN0b3JcbiAgfVxufVxuIiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBpc0J1ZmZlcihhcmcpIHtcbiAgcmV0dXJuIGFyZyAmJiB0eXBlb2YgYXJnID09PSAnb2JqZWN0J1xuICAgICYmIHR5cGVvZiBhcmcuY29weSA9PT0gJ2Z1bmN0aW9uJ1xuICAgICYmIHR5cGVvZiBhcmcuZmlsbCA9PT0gJ2Z1bmN0aW9uJ1xuICAgICYmIHR5cGVvZiBhcmcucmVhZFVJbnQ4ID09PSAnZnVuY3Rpb24nO1xufSIsIi8vIENvcHlyaWdodCBKb3llbnQsIEluYy4gYW5kIG90aGVyIE5vZGUgY29udHJpYnV0b3JzLlxuLy9cbi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhXG4vLyBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlXG4vLyBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmdcbi8vIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCxcbi8vIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXRcbi8vIHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZVxuLy8gZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4vL1xuLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWRcbi8vIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuLy9cbi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1Ncbi8vIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0Zcbi8vIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU5cbi8vIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLFxuLy8gREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SXG4vLyBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFXG4vLyBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuXG52YXIgZm9ybWF0UmVnRXhwID0gLyVbc2RqJV0vZztcbmV4cG9ydHMuZm9ybWF0ID0gZnVuY3Rpb24oZikge1xuICBpZiAoIWlzU3RyaW5nKGYpKSB7XG4gICAgdmFyIG9iamVjdHMgPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgb2JqZWN0cy5wdXNoKGluc3BlY3QoYXJndW1lbnRzW2ldKSk7XG4gICAgfVxuICAgIHJldHVybiBvYmplY3RzLmpvaW4oJyAnKTtcbiAgfVxuXG4gIHZhciBpID0gMTtcbiAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XG4gIHZhciBsZW4gPSBhcmdzLmxlbmd0aDtcbiAgdmFyIHN0ciA9IFN0cmluZyhmKS5yZXBsYWNlKGZvcm1hdFJlZ0V4cCwgZnVuY3Rpb24oeCkge1xuICAgIGlmICh4ID09PSAnJSUnKSByZXR1cm4gJyUnO1xuICAgIGlmIChpID49IGxlbikgcmV0dXJuIHg7XG4gICAgc3dpdGNoICh4KSB7XG4gICAgICBjYXNlICclcyc6IHJldHVybiBTdHJpbmcoYXJnc1tpKytdKTtcbiAgICAgIGNhc2UgJyVkJzogcmV0dXJuIE51bWJlcihhcmdzW2krK10pO1xuICAgICAgY2FzZSAnJWonOlxuICAgICAgICB0cnkge1xuICAgICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShhcmdzW2krK10pO1xuICAgICAgICB9IGNhdGNoIChfKSB7XG4gICAgICAgICAgcmV0dXJuICdbQ2lyY3VsYXJdJztcbiAgICAgICAgfVxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIHg7XG4gICAgfVxuICB9KTtcbiAgZm9yICh2YXIgeCA9IGFyZ3NbaV07IGkgPCBsZW47IHggPSBhcmdzWysraV0pIHtcbiAgICBpZiAoaXNOdWxsKHgpIHx8ICFpc09iamVjdCh4KSkge1xuICAgICAgc3RyICs9ICcgJyArIHg7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0ciArPSAnICcgKyBpbnNwZWN0KHgpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gc3RyO1xufTtcblxuXG4vLyBNYXJrIHRoYXQgYSBtZXRob2Qgc2hvdWxkIG5vdCBiZSB1c2VkLlxuLy8gUmV0dXJucyBhIG1vZGlmaWVkIGZ1bmN0aW9uIHdoaWNoIHdhcm5zIG9uY2UgYnkgZGVmYXVsdC5cbi8vIElmIC0tbm8tZGVwcmVjYXRpb24gaXMgc2V0LCB0aGVuIGl0IGlzIGEgbm8tb3AuXG5leHBvcnRzLmRlcHJlY2F0ZSA9IGZ1bmN0aW9uKGZuLCBtc2cpIHtcbiAgLy8gQWxsb3cgZm9yIGRlcHJlY2F0aW5nIHRoaW5ncyBpbiB0aGUgcHJvY2VzcyBvZiBzdGFydGluZyB1cC5cbiAgaWYgKGlzVW5kZWZpbmVkKGdsb2JhbC5wcm9jZXNzKSkge1xuICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBleHBvcnRzLmRlcHJlY2F0ZShmbiwgbXNnKS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH07XG4gIH1cblxuICBpZiAocHJvY2Vzcy5ub0RlcHJlY2F0aW9uID09PSB0cnVlKSB7XG4gICAgcmV0dXJuIGZuO1xuICB9XG5cbiAgdmFyIHdhcm5lZCA9IGZhbHNlO1xuICBmdW5jdGlvbiBkZXByZWNhdGVkKCkge1xuICAgIGlmICghd2FybmVkKSB7XG4gICAgICBpZiAocHJvY2Vzcy50aHJvd0RlcHJlY2F0aW9uKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihtc2cpO1xuICAgICAgfSBlbHNlIGlmIChwcm9jZXNzLnRyYWNlRGVwcmVjYXRpb24pIHtcbiAgICAgICAgY29uc29sZS50cmFjZShtc2cpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihtc2cpO1xuICAgICAgfVxuICAgICAgd2FybmVkID0gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cblxuICByZXR1cm4gZGVwcmVjYXRlZDtcbn07XG5cblxudmFyIGRlYnVncyA9IHt9O1xudmFyIGRlYnVnRW52aXJvbjtcbmV4cG9ydHMuZGVidWdsb2cgPSBmdW5jdGlvbihzZXQpIHtcbiAgaWYgKGlzVW5kZWZpbmVkKGRlYnVnRW52aXJvbikpXG4gICAgZGVidWdFbnZpcm9uID0gcHJvY2Vzcy5lbnYuTk9ERV9ERUJVRyB8fCAnJztcbiAgc2V0ID0gc2V0LnRvVXBwZXJDYXNlKCk7XG4gIGlmICghZGVidWdzW3NldF0pIHtcbiAgICBpZiAobmV3IFJlZ0V4cCgnXFxcXGInICsgc2V0ICsgJ1xcXFxiJywgJ2knKS50ZXN0KGRlYnVnRW52aXJvbikpIHtcbiAgICAgIHZhciBwaWQgPSBwcm9jZXNzLnBpZDtcbiAgICAgIGRlYnVnc1tzZXRdID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBtc2cgPSBleHBvcnRzLmZvcm1hdC5hcHBseShleHBvcnRzLCBhcmd1bWVudHMpO1xuICAgICAgICBjb25zb2xlLmVycm9yKCclcyAlZDogJXMnLCBzZXQsIHBpZCwgbXNnKTtcbiAgICAgIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIGRlYnVnc1tzZXRdID0gZnVuY3Rpb24oKSB7fTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGRlYnVnc1tzZXRdO1xufTtcblxuXG4vKipcbiAqIEVjaG9zIHRoZSB2YWx1ZSBvZiBhIHZhbHVlLiBUcnlzIHRvIHByaW50IHRoZSB2YWx1ZSBvdXRcbiAqIGluIHRoZSBiZXN0IHdheSBwb3NzaWJsZSBnaXZlbiB0aGUgZGlmZmVyZW50IHR5cGVzLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmogVGhlIG9iamVjdCB0byBwcmludCBvdXQuXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0cyBPcHRpb25hbCBvcHRpb25zIG9iamVjdCB0aGF0IGFsdGVycyB0aGUgb3V0cHV0LlxuICovXG4vKiBsZWdhY3k6IG9iaiwgc2hvd0hpZGRlbiwgZGVwdGgsIGNvbG9ycyovXG5mdW5jdGlvbiBpbnNwZWN0KG9iaiwgb3B0cykge1xuICAvLyBkZWZhdWx0IG9wdGlvbnNcbiAgdmFyIGN0eCA9IHtcbiAgICBzZWVuOiBbXSxcbiAgICBzdHlsaXplOiBzdHlsaXplTm9Db2xvclxuICB9O1xuICAvLyBsZWdhY3kuLi5cbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPj0gMykgY3R4LmRlcHRoID0gYXJndW1lbnRzWzJdO1xuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+PSA0KSBjdHguY29sb3JzID0gYXJndW1lbnRzWzNdO1xuICBpZiAoaXNCb29sZWFuKG9wdHMpKSB7XG4gICAgLy8gbGVnYWN5Li4uXG4gICAgY3R4LnNob3dIaWRkZW4gPSBvcHRzO1xuICB9IGVsc2UgaWYgKG9wdHMpIHtcbiAgICAvLyBnb3QgYW4gXCJvcHRpb25zXCIgb2JqZWN0XG4gICAgZXhwb3J0cy5fZXh0ZW5kKGN0eCwgb3B0cyk7XG4gIH1cbiAgLy8gc2V0IGRlZmF1bHQgb3B0aW9uc1xuICBpZiAoaXNVbmRlZmluZWQoY3R4LnNob3dIaWRkZW4pKSBjdHguc2hvd0hpZGRlbiA9IGZhbHNlO1xuICBpZiAoaXNVbmRlZmluZWQoY3R4LmRlcHRoKSkgY3R4LmRlcHRoID0gMjtcbiAgaWYgKGlzVW5kZWZpbmVkKGN0eC5jb2xvcnMpKSBjdHguY29sb3JzID0gZmFsc2U7XG4gIGlmIChpc1VuZGVmaW5lZChjdHguY3VzdG9tSW5zcGVjdCkpIGN0eC5jdXN0b21JbnNwZWN0ID0gdHJ1ZTtcbiAgaWYgKGN0eC5jb2xvcnMpIGN0eC5zdHlsaXplID0gc3R5bGl6ZVdpdGhDb2xvcjtcbiAgcmV0dXJuIGZvcm1hdFZhbHVlKGN0eCwgb2JqLCBjdHguZGVwdGgpO1xufVxuZXhwb3J0cy5pbnNwZWN0ID0gaW5zcGVjdDtcblxuXG4vLyBodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0FOU0lfZXNjYXBlX2NvZGUjZ3JhcGhpY3Ncbmluc3BlY3QuY29sb3JzID0ge1xuICAnYm9sZCcgOiBbMSwgMjJdLFxuICAnaXRhbGljJyA6IFszLCAyM10sXG4gICd1bmRlcmxpbmUnIDogWzQsIDI0XSxcbiAgJ2ludmVyc2UnIDogWzcsIDI3XSxcbiAgJ3doaXRlJyA6IFszNywgMzldLFxuICAnZ3JleScgOiBbOTAsIDM5XSxcbiAgJ2JsYWNrJyA6IFszMCwgMzldLFxuICAnYmx1ZScgOiBbMzQsIDM5XSxcbiAgJ2N5YW4nIDogWzM2LCAzOV0sXG4gICdncmVlbicgOiBbMzIsIDM5XSxcbiAgJ21hZ2VudGEnIDogWzM1LCAzOV0sXG4gICdyZWQnIDogWzMxLCAzOV0sXG4gICd5ZWxsb3cnIDogWzMzLCAzOV1cbn07XG5cbi8vIERvbid0IHVzZSAnYmx1ZScgbm90IHZpc2libGUgb24gY21kLmV4ZVxuaW5zcGVjdC5zdHlsZXMgPSB7XG4gICdzcGVjaWFsJzogJ2N5YW4nLFxuICAnbnVtYmVyJzogJ3llbGxvdycsXG4gICdib29sZWFuJzogJ3llbGxvdycsXG4gICd1bmRlZmluZWQnOiAnZ3JleScsXG4gICdudWxsJzogJ2JvbGQnLFxuICAnc3RyaW5nJzogJ2dyZWVuJyxcbiAgJ2RhdGUnOiAnbWFnZW50YScsXG4gIC8vIFwibmFtZVwiOiBpbnRlbnRpb25hbGx5IG5vdCBzdHlsaW5nXG4gICdyZWdleHAnOiAncmVkJ1xufTtcblxuXG5mdW5jdGlvbiBzdHlsaXplV2l0aENvbG9yKHN0ciwgc3R5bGVUeXBlKSB7XG4gIHZhciBzdHlsZSA9IGluc3BlY3Quc3R5bGVzW3N0eWxlVHlwZV07XG5cbiAgaWYgKHN0eWxlKSB7XG4gICAgcmV0dXJuICdcXHUwMDFiWycgKyBpbnNwZWN0LmNvbG9yc1tzdHlsZV1bMF0gKyAnbScgKyBzdHIgK1xuICAgICAgICAgICAnXFx1MDAxYlsnICsgaW5zcGVjdC5jb2xvcnNbc3R5bGVdWzFdICsgJ20nO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBzdHI7XG4gIH1cbn1cblxuXG5mdW5jdGlvbiBzdHlsaXplTm9Db2xvcihzdHIsIHN0eWxlVHlwZSkge1xuICByZXR1cm4gc3RyO1xufVxuXG5cbmZ1bmN0aW9uIGFycmF5VG9IYXNoKGFycmF5KSB7XG4gIHZhciBoYXNoID0ge307XG5cbiAgYXJyYXkuZm9yRWFjaChmdW5jdGlvbih2YWwsIGlkeCkge1xuICAgIGhhc2hbdmFsXSA9IHRydWU7XG4gIH0pO1xuXG4gIHJldHVybiBoYXNoO1xufVxuXG5cbmZ1bmN0aW9uIGZvcm1hdFZhbHVlKGN0eCwgdmFsdWUsIHJlY3Vyc2VUaW1lcykge1xuICAvLyBQcm92aWRlIGEgaG9vayBmb3IgdXNlci1zcGVjaWZpZWQgaW5zcGVjdCBmdW5jdGlvbnMuXG4gIC8vIENoZWNrIHRoYXQgdmFsdWUgaXMgYW4gb2JqZWN0IHdpdGggYW4gaW5zcGVjdCBmdW5jdGlvbiBvbiBpdFxuICBpZiAoY3R4LmN1c3RvbUluc3BlY3QgJiZcbiAgICAgIHZhbHVlICYmXG4gICAgICBpc0Z1bmN0aW9uKHZhbHVlLmluc3BlY3QpICYmXG4gICAgICAvLyBGaWx0ZXIgb3V0IHRoZSB1dGlsIG1vZHVsZSwgaXQncyBpbnNwZWN0IGZ1bmN0aW9uIGlzIHNwZWNpYWxcbiAgICAgIHZhbHVlLmluc3BlY3QgIT09IGV4cG9ydHMuaW5zcGVjdCAmJlxuICAgICAgLy8gQWxzbyBmaWx0ZXIgb3V0IGFueSBwcm90b3R5cGUgb2JqZWN0cyB1c2luZyB0aGUgY2lyY3VsYXIgY2hlY2suXG4gICAgICAhKHZhbHVlLmNvbnN0cnVjdG9yICYmIHZhbHVlLmNvbnN0cnVjdG9yLnByb3RvdHlwZSA9PT0gdmFsdWUpKSB7XG4gICAgdmFyIHJldCA9IHZhbHVlLmluc3BlY3QocmVjdXJzZVRpbWVzLCBjdHgpO1xuICAgIGlmICghaXNTdHJpbmcocmV0KSkge1xuICAgICAgcmV0ID0gZm9ybWF0VmFsdWUoY3R4LCByZXQsIHJlY3Vyc2VUaW1lcyk7XG4gICAgfVxuICAgIHJldHVybiByZXQ7XG4gIH1cblxuICAvLyBQcmltaXRpdmUgdHlwZXMgY2Fubm90IGhhdmUgcHJvcGVydGllc1xuICB2YXIgcHJpbWl0aXZlID0gZm9ybWF0UHJpbWl0aXZlKGN0eCwgdmFsdWUpO1xuICBpZiAocHJpbWl0aXZlKSB7XG4gICAgcmV0dXJuIHByaW1pdGl2ZTtcbiAgfVxuXG4gIC8vIExvb2sgdXAgdGhlIGtleXMgb2YgdGhlIG9iamVjdC5cbiAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyh2YWx1ZSk7XG4gIHZhciB2aXNpYmxlS2V5cyA9IGFycmF5VG9IYXNoKGtleXMpO1xuXG4gIGlmIChjdHguc2hvd0hpZGRlbikge1xuICAgIGtleXMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh2YWx1ZSk7XG4gIH1cblxuICAvLyBJRSBkb2Vzbid0IG1ha2UgZXJyb3IgZmllbGRzIG5vbi1lbnVtZXJhYmxlXG4gIC8vIGh0dHA6Ly9tc2RuLm1pY3Jvc29mdC5jb20vZW4tdXMvbGlicmFyeS9pZS9kd3c1MnNidCh2PXZzLjk0KS5hc3B4XG4gIGlmIChpc0Vycm9yKHZhbHVlKVxuICAgICAgJiYgKGtleXMuaW5kZXhPZignbWVzc2FnZScpID49IDAgfHwga2V5cy5pbmRleE9mKCdkZXNjcmlwdGlvbicpID49IDApKSB7XG4gICAgcmV0dXJuIGZvcm1hdEVycm9yKHZhbHVlKTtcbiAgfVxuXG4gIC8vIFNvbWUgdHlwZSBvZiBvYmplY3Qgd2l0aG91dCBwcm9wZXJ0aWVzIGNhbiBiZSBzaG9ydGN1dHRlZC5cbiAgaWYgKGtleXMubGVuZ3RoID09PSAwKSB7XG4gICAgaWYgKGlzRnVuY3Rpb24odmFsdWUpKSB7XG4gICAgICB2YXIgbmFtZSA9IHZhbHVlLm5hbWUgPyAnOiAnICsgdmFsdWUubmFtZSA6ICcnO1xuICAgICAgcmV0dXJuIGN0eC5zdHlsaXplKCdbRnVuY3Rpb24nICsgbmFtZSArICddJywgJ3NwZWNpYWwnKTtcbiAgICB9XG4gICAgaWYgKGlzUmVnRXhwKHZhbHVlKSkge1xuICAgICAgcmV0dXJuIGN0eC5zdHlsaXplKFJlZ0V4cC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWx1ZSksICdyZWdleHAnKTtcbiAgICB9XG4gICAgaWYgKGlzRGF0ZSh2YWx1ZSkpIHtcbiAgICAgIHJldHVybiBjdHguc3R5bGl6ZShEYXRlLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKSwgJ2RhdGUnKTtcbiAgICB9XG4gICAgaWYgKGlzRXJyb3IodmFsdWUpKSB7XG4gICAgICByZXR1cm4gZm9ybWF0RXJyb3IodmFsdWUpO1xuICAgIH1cbiAgfVxuXG4gIHZhciBiYXNlID0gJycsIGFycmF5ID0gZmFsc2UsIGJyYWNlcyA9IFsneycsICd9J107XG5cbiAgLy8gTWFrZSBBcnJheSBzYXkgdGhhdCB0aGV5IGFyZSBBcnJheVxuICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcbiAgICBhcnJheSA9IHRydWU7XG4gICAgYnJhY2VzID0gWydbJywgJ10nXTtcbiAgfVxuXG4gIC8vIE1ha2UgZnVuY3Rpb25zIHNheSB0aGF0IHRoZXkgYXJlIGZ1bmN0aW9uc1xuICBpZiAoaXNGdW5jdGlvbih2YWx1ZSkpIHtcbiAgICB2YXIgbiA9IHZhbHVlLm5hbWUgPyAnOiAnICsgdmFsdWUubmFtZSA6ICcnO1xuICAgIGJhc2UgPSAnIFtGdW5jdGlvbicgKyBuICsgJ10nO1xuICB9XG5cbiAgLy8gTWFrZSBSZWdFeHBzIHNheSB0aGF0IHRoZXkgYXJlIFJlZ0V4cHNcbiAgaWYgKGlzUmVnRXhwKHZhbHVlKSkge1xuICAgIGJhc2UgPSAnICcgKyBSZWdFeHAucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUpO1xuICB9XG5cbiAgLy8gTWFrZSBkYXRlcyB3aXRoIHByb3BlcnRpZXMgZmlyc3Qgc2F5IHRoZSBkYXRlXG4gIGlmIChpc0RhdGUodmFsdWUpKSB7XG4gICAgYmFzZSA9ICcgJyArIERhdGUucHJvdG90eXBlLnRvVVRDU3RyaW5nLmNhbGwodmFsdWUpO1xuICB9XG5cbiAgLy8gTWFrZSBlcnJvciB3aXRoIG1lc3NhZ2UgZmlyc3Qgc2F5IHRoZSBlcnJvclxuICBpZiAoaXNFcnJvcih2YWx1ZSkpIHtcbiAgICBiYXNlID0gJyAnICsgZm9ybWF0RXJyb3IodmFsdWUpO1xuICB9XG5cbiAgaWYgKGtleXMubGVuZ3RoID09PSAwICYmICghYXJyYXkgfHwgdmFsdWUubGVuZ3RoID09IDApKSB7XG4gICAgcmV0dXJuIGJyYWNlc1swXSArIGJhc2UgKyBicmFjZXNbMV07XG4gIH1cblxuICBpZiAocmVjdXJzZVRpbWVzIDwgMCkge1xuICAgIGlmIChpc1JlZ0V4cCh2YWx1ZSkpIHtcbiAgICAgIHJldHVybiBjdHguc3R5bGl6ZShSZWdFeHAucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUpLCAncmVnZXhwJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBjdHguc3R5bGl6ZSgnW09iamVjdF0nLCAnc3BlY2lhbCcpO1xuICAgIH1cbiAgfVxuXG4gIGN0eC5zZWVuLnB1c2godmFsdWUpO1xuXG4gIHZhciBvdXRwdXQ7XG4gIGlmIChhcnJheSkge1xuICAgIG91dHB1dCA9IGZvcm1hdEFycmF5KGN0eCwgdmFsdWUsIHJlY3Vyc2VUaW1lcywgdmlzaWJsZUtleXMsIGtleXMpO1xuICB9IGVsc2Uge1xuICAgIG91dHB1dCA9IGtleXMubWFwKGZ1bmN0aW9uKGtleSkge1xuICAgICAgcmV0dXJuIGZvcm1hdFByb3BlcnR5KGN0eCwgdmFsdWUsIHJlY3Vyc2VUaW1lcywgdmlzaWJsZUtleXMsIGtleSwgYXJyYXkpO1xuICAgIH0pO1xuICB9XG5cbiAgY3R4LnNlZW4ucG9wKCk7XG5cbiAgcmV0dXJuIHJlZHVjZVRvU2luZ2xlU3RyaW5nKG91dHB1dCwgYmFzZSwgYnJhY2VzKTtcbn1cblxuXG5mdW5jdGlvbiBmb3JtYXRQcmltaXRpdmUoY3R4LCB2YWx1ZSkge1xuICBpZiAoaXNVbmRlZmluZWQodmFsdWUpKVxuICAgIHJldHVybiBjdHguc3R5bGl6ZSgndW5kZWZpbmVkJywgJ3VuZGVmaW5lZCcpO1xuICBpZiAoaXNTdHJpbmcodmFsdWUpKSB7XG4gICAgdmFyIHNpbXBsZSA9ICdcXCcnICsgSlNPTi5zdHJpbmdpZnkodmFsdWUpLnJlcGxhY2UoL15cInxcIiQvZywgJycpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvJy9nLCBcIlxcXFwnXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvXFxcXFwiL2csICdcIicpICsgJ1xcJyc7XG4gICAgcmV0dXJuIGN0eC5zdHlsaXplKHNpbXBsZSwgJ3N0cmluZycpO1xuICB9XG4gIGlmIChpc051bWJlcih2YWx1ZSkpXG4gICAgcmV0dXJuIGN0eC5zdHlsaXplKCcnICsgdmFsdWUsICdudW1iZXInKTtcbiAgaWYgKGlzQm9vbGVhbih2YWx1ZSkpXG4gICAgcmV0dXJuIGN0eC5zdHlsaXplKCcnICsgdmFsdWUsICdib29sZWFuJyk7XG4gIC8vIEZvciBzb21lIHJlYXNvbiB0eXBlb2YgbnVsbCBpcyBcIm9iamVjdFwiLCBzbyBzcGVjaWFsIGNhc2UgaGVyZS5cbiAgaWYgKGlzTnVsbCh2YWx1ZSkpXG4gICAgcmV0dXJuIGN0eC5zdHlsaXplKCdudWxsJywgJ251bGwnKTtcbn1cblxuXG5mdW5jdGlvbiBmb3JtYXRFcnJvcih2YWx1ZSkge1xuICByZXR1cm4gJ1snICsgRXJyb3IucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUpICsgJ10nO1xufVxuXG5cbmZ1bmN0aW9uIGZvcm1hdEFycmF5KGN0eCwgdmFsdWUsIHJlY3Vyc2VUaW1lcywgdmlzaWJsZUtleXMsIGtleXMpIHtcbiAgdmFyIG91dHB1dCA9IFtdO1xuICBmb3IgKHZhciBpID0gMCwgbCA9IHZhbHVlLmxlbmd0aDsgaSA8IGw7ICsraSkge1xuICAgIGlmIChoYXNPd25Qcm9wZXJ0eSh2YWx1ZSwgU3RyaW5nKGkpKSkge1xuICAgICAgb3V0cHV0LnB1c2goZm9ybWF0UHJvcGVydHkoY3R4LCB2YWx1ZSwgcmVjdXJzZVRpbWVzLCB2aXNpYmxlS2V5cyxcbiAgICAgICAgICBTdHJpbmcoaSksIHRydWUpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgb3V0cHV0LnB1c2goJycpO1xuICAgIH1cbiAgfVxuICBrZXlzLmZvckVhY2goZnVuY3Rpb24oa2V5KSB7XG4gICAgaWYgKCFrZXkubWF0Y2goL15cXGQrJC8pKSB7XG4gICAgICBvdXRwdXQucHVzaChmb3JtYXRQcm9wZXJ0eShjdHgsIHZhbHVlLCByZWN1cnNlVGltZXMsIHZpc2libGVLZXlzLFxuICAgICAgICAgIGtleSwgdHJ1ZSkpO1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiBvdXRwdXQ7XG59XG5cblxuZnVuY3Rpb24gZm9ybWF0UHJvcGVydHkoY3R4LCB2YWx1ZSwgcmVjdXJzZVRpbWVzLCB2aXNpYmxlS2V5cywga2V5LCBhcnJheSkge1xuICB2YXIgbmFtZSwgc3RyLCBkZXNjO1xuICBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih2YWx1ZSwga2V5KSB8fCB7IHZhbHVlOiB2YWx1ZVtrZXldIH07XG4gIGlmIChkZXNjLmdldCkge1xuICAgIGlmIChkZXNjLnNldCkge1xuICAgICAgc3RyID0gY3R4LnN0eWxpemUoJ1tHZXR0ZXIvU2V0dGVyXScsICdzcGVjaWFsJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0ciA9IGN0eC5zdHlsaXplKCdbR2V0dGVyXScsICdzcGVjaWFsJyk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGlmIChkZXNjLnNldCkge1xuICAgICAgc3RyID0gY3R4LnN0eWxpemUoJ1tTZXR0ZXJdJywgJ3NwZWNpYWwnKTtcbiAgICB9XG4gIH1cbiAgaWYgKCFoYXNPd25Qcm9wZXJ0eSh2aXNpYmxlS2V5cywga2V5KSkge1xuICAgIG5hbWUgPSAnWycgKyBrZXkgKyAnXSc7XG4gIH1cbiAgaWYgKCFzdHIpIHtcbiAgICBpZiAoY3R4LnNlZW4uaW5kZXhPZihkZXNjLnZhbHVlKSA8IDApIHtcbiAgICAgIGlmIChpc051bGwocmVjdXJzZVRpbWVzKSkge1xuICAgICAgICBzdHIgPSBmb3JtYXRWYWx1ZShjdHgsIGRlc2MudmFsdWUsIG51bGwpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3RyID0gZm9ybWF0VmFsdWUoY3R4LCBkZXNjLnZhbHVlLCByZWN1cnNlVGltZXMgLSAxKTtcbiAgICAgIH1cbiAgICAgIGlmIChzdHIuaW5kZXhPZignXFxuJykgPiAtMSkge1xuICAgICAgICBpZiAoYXJyYXkpIHtcbiAgICAgICAgICBzdHIgPSBzdHIuc3BsaXQoJ1xcbicpLm1hcChmdW5jdGlvbihsaW5lKSB7XG4gICAgICAgICAgICByZXR1cm4gJyAgJyArIGxpbmU7XG4gICAgICAgICAgfSkuam9pbignXFxuJykuc3Vic3RyKDIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHN0ciA9ICdcXG4nICsgc3RyLnNwbGl0KCdcXG4nKS5tYXAoZnVuY3Rpb24obGluZSkge1xuICAgICAgICAgICAgcmV0dXJuICcgICAnICsgbGluZTtcbiAgICAgICAgICB9KS5qb2luKCdcXG4nKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBzdHIgPSBjdHguc3R5bGl6ZSgnW0NpcmN1bGFyXScsICdzcGVjaWFsJyk7XG4gICAgfVxuICB9XG4gIGlmIChpc1VuZGVmaW5lZChuYW1lKSkge1xuICAgIGlmIChhcnJheSAmJiBrZXkubWF0Y2goL15cXGQrJC8pKSB7XG4gICAgICByZXR1cm4gc3RyO1xuICAgIH1cbiAgICBuYW1lID0gSlNPTi5zdHJpbmdpZnkoJycgKyBrZXkpO1xuICAgIGlmIChuYW1lLm1hdGNoKC9eXCIoW2EtekEtWl9dW2EtekEtWl8wLTldKilcIiQvKSkge1xuICAgICAgbmFtZSA9IG5hbWUuc3Vic3RyKDEsIG5hbWUubGVuZ3RoIC0gMik7XG4gICAgICBuYW1lID0gY3R4LnN0eWxpemUobmFtZSwgJ25hbWUnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbmFtZSA9IG5hbWUucmVwbGFjZSgvJy9nLCBcIlxcXFwnXCIpXG4gICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cXFxcXCIvZywgJ1wiJylcbiAgICAgICAgICAgICAgICAgLnJlcGxhY2UoLyheXCJ8XCIkKS9nLCBcIidcIik7XG4gICAgICBuYW1lID0gY3R4LnN0eWxpemUobmFtZSwgJ3N0cmluZycpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBuYW1lICsgJzogJyArIHN0cjtcbn1cblxuXG5mdW5jdGlvbiByZWR1Y2VUb1NpbmdsZVN0cmluZyhvdXRwdXQsIGJhc2UsIGJyYWNlcykge1xuICB2YXIgbnVtTGluZXNFc3QgPSAwO1xuICB2YXIgbGVuZ3RoID0gb3V0cHV0LnJlZHVjZShmdW5jdGlvbihwcmV2LCBjdXIpIHtcbiAgICBudW1MaW5lc0VzdCsrO1xuICAgIGlmIChjdXIuaW5kZXhPZignXFxuJykgPj0gMCkgbnVtTGluZXNFc3QrKztcbiAgICByZXR1cm4gcHJldiArIGN1ci5yZXBsYWNlKC9cXHUwMDFiXFxbXFxkXFxkP20vZywgJycpLmxlbmd0aCArIDE7XG4gIH0sIDApO1xuXG4gIGlmIChsZW5ndGggPiA2MCkge1xuICAgIHJldHVybiBicmFjZXNbMF0gK1xuICAgICAgICAgICAoYmFzZSA9PT0gJycgPyAnJyA6IGJhc2UgKyAnXFxuICcpICtcbiAgICAgICAgICAgJyAnICtcbiAgICAgICAgICAgb3V0cHV0LmpvaW4oJyxcXG4gICcpICtcbiAgICAgICAgICAgJyAnICtcbiAgICAgICAgICAgYnJhY2VzWzFdO1xuICB9XG5cbiAgcmV0dXJuIGJyYWNlc1swXSArIGJhc2UgKyAnICcgKyBvdXRwdXQuam9pbignLCAnKSArICcgJyArIGJyYWNlc1sxXTtcbn1cblxuXG4vLyBOT1RFOiBUaGVzZSB0eXBlIGNoZWNraW5nIGZ1bmN0aW9ucyBpbnRlbnRpb25hbGx5IGRvbid0IHVzZSBgaW5zdGFuY2VvZmBcbi8vIGJlY2F1c2UgaXQgaXMgZnJhZ2lsZSBhbmQgY2FuIGJlIGVhc2lseSBmYWtlZCB3aXRoIGBPYmplY3QuY3JlYXRlKClgLlxuZnVuY3Rpb24gaXNBcnJheShhcikge1xuICByZXR1cm4gQXJyYXkuaXNBcnJheShhcik7XG59XG5leHBvcnRzLmlzQXJyYXkgPSBpc0FycmF5O1xuXG5mdW5jdGlvbiBpc0Jvb2xlYW4oYXJnKSB7XG4gIHJldHVybiB0eXBlb2YgYXJnID09PSAnYm9vbGVhbic7XG59XG5leHBvcnRzLmlzQm9vbGVhbiA9IGlzQm9vbGVhbjtcblxuZnVuY3Rpb24gaXNOdWxsKGFyZykge1xuICByZXR1cm4gYXJnID09PSBudWxsO1xufVxuZXhwb3J0cy5pc051bGwgPSBpc051bGw7XG5cbmZ1bmN0aW9uIGlzTnVsbE9yVW5kZWZpbmVkKGFyZykge1xuICByZXR1cm4gYXJnID09IG51bGw7XG59XG5leHBvcnRzLmlzTnVsbE9yVW5kZWZpbmVkID0gaXNOdWxsT3JVbmRlZmluZWQ7XG5cbmZ1bmN0aW9uIGlzTnVtYmVyKGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ251bWJlcic7XG59XG5leHBvcnRzLmlzTnVtYmVyID0gaXNOdW1iZXI7XG5cbmZ1bmN0aW9uIGlzU3RyaW5nKGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ3N0cmluZyc7XG59XG5leHBvcnRzLmlzU3RyaW5nID0gaXNTdHJpbmc7XG5cbmZ1bmN0aW9uIGlzU3ltYm9sKGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ3N5bWJvbCc7XG59XG5leHBvcnRzLmlzU3ltYm9sID0gaXNTeW1ib2w7XG5cbmZ1bmN0aW9uIGlzVW5kZWZpbmVkKGFyZykge1xuICByZXR1cm4gYXJnID09PSB2b2lkIDA7XG59XG5leHBvcnRzLmlzVW5kZWZpbmVkID0gaXNVbmRlZmluZWQ7XG5cbmZ1bmN0aW9uIGlzUmVnRXhwKHJlKSB7XG4gIHJldHVybiBpc09iamVjdChyZSkgJiYgb2JqZWN0VG9TdHJpbmcocmUpID09PSAnW29iamVjdCBSZWdFeHBdJztcbn1cbmV4cG9ydHMuaXNSZWdFeHAgPSBpc1JlZ0V4cDtcblxuZnVuY3Rpb24gaXNPYmplY3QoYXJnKSB7XG4gIHJldHVybiB0eXBlb2YgYXJnID09PSAnb2JqZWN0JyAmJiBhcmcgIT09IG51bGw7XG59XG5leHBvcnRzLmlzT2JqZWN0ID0gaXNPYmplY3Q7XG5cbmZ1bmN0aW9uIGlzRGF0ZShkKSB7XG4gIHJldHVybiBpc09iamVjdChkKSAmJiBvYmplY3RUb1N0cmluZyhkKSA9PT0gJ1tvYmplY3QgRGF0ZV0nO1xufVxuZXhwb3J0cy5pc0RhdGUgPSBpc0RhdGU7XG5cbmZ1bmN0aW9uIGlzRXJyb3IoZSkge1xuICByZXR1cm4gaXNPYmplY3QoZSkgJiZcbiAgICAgIChvYmplY3RUb1N0cmluZyhlKSA9PT0gJ1tvYmplY3QgRXJyb3JdJyB8fCBlIGluc3RhbmNlb2YgRXJyb3IpO1xufVxuZXhwb3J0cy5pc0Vycm9yID0gaXNFcnJvcjtcblxuZnVuY3Rpb24gaXNGdW5jdGlvbihhcmcpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdmdW5jdGlvbic7XG59XG5leHBvcnRzLmlzRnVuY3Rpb24gPSBpc0Z1bmN0aW9uO1xuXG5mdW5jdGlvbiBpc1ByaW1pdGl2ZShhcmcpIHtcbiAgcmV0dXJuIGFyZyA9PT0gbnVsbCB8fFxuICAgICAgICAgdHlwZW9mIGFyZyA9PT0gJ2Jvb2xlYW4nIHx8XG4gICAgICAgICB0eXBlb2YgYXJnID09PSAnbnVtYmVyJyB8fFxuICAgICAgICAgdHlwZW9mIGFyZyA9PT0gJ3N0cmluZycgfHxcbiAgICAgICAgIHR5cGVvZiBhcmcgPT09ICdzeW1ib2wnIHx8ICAvLyBFUzYgc3ltYm9sXG4gICAgICAgICB0eXBlb2YgYXJnID09PSAndW5kZWZpbmVkJztcbn1cbmV4cG9ydHMuaXNQcmltaXRpdmUgPSBpc1ByaW1pdGl2ZTtcblxuZXhwb3J0cy5pc0J1ZmZlciA9IHJlcXVpcmUoJy4vc3VwcG9ydC9pc0J1ZmZlcicpO1xuXG5mdW5jdGlvbiBvYmplY3RUb1N0cmluZyhvKSB7XG4gIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobyk7XG59XG5cblxuZnVuY3Rpb24gcGFkKG4pIHtcbiAgcmV0dXJuIG4gPCAxMCA/ICcwJyArIG4udG9TdHJpbmcoMTApIDogbi50b1N0cmluZygxMCk7XG59XG5cblxudmFyIG1vbnRocyA9IFsnSmFuJywgJ0ZlYicsICdNYXInLCAnQXByJywgJ01heScsICdKdW4nLCAnSnVsJywgJ0F1ZycsICdTZXAnLFxuICAgICAgICAgICAgICAnT2N0JywgJ05vdicsICdEZWMnXTtcblxuLy8gMjYgRmViIDE2OjE5OjM0XG5mdW5jdGlvbiB0aW1lc3RhbXAoKSB7XG4gIHZhciBkID0gbmV3IERhdGUoKTtcbiAgdmFyIHRpbWUgPSBbcGFkKGQuZ2V0SG91cnMoKSksXG4gICAgICAgICAgICAgIHBhZChkLmdldE1pbnV0ZXMoKSksXG4gICAgICAgICAgICAgIHBhZChkLmdldFNlY29uZHMoKSldLmpvaW4oJzonKTtcbiAgcmV0dXJuIFtkLmdldERhdGUoKSwgbW9udGhzW2QuZ2V0TW9udGgoKV0sIHRpbWVdLmpvaW4oJyAnKTtcbn1cblxuXG4vLyBsb2cgaXMganVzdCBhIHRoaW4gd3JhcHBlciB0byBjb25zb2xlLmxvZyB0aGF0IHByZXBlbmRzIGEgdGltZXN0YW1wXG5leHBvcnRzLmxvZyA9IGZ1bmN0aW9uKCkge1xuICBjb25zb2xlLmxvZygnJXMgLSAlcycsIHRpbWVzdGFtcCgpLCBleHBvcnRzLmZvcm1hdC5hcHBseShleHBvcnRzLCBhcmd1bWVudHMpKTtcbn07XG5cblxuLyoqXG4gKiBJbmhlcml0IHRoZSBwcm90b3R5cGUgbWV0aG9kcyBmcm9tIG9uZSBjb25zdHJ1Y3RvciBpbnRvIGFub3RoZXIuXG4gKlxuICogVGhlIEZ1bmN0aW9uLnByb3RvdHlwZS5pbmhlcml0cyBmcm9tIGxhbmcuanMgcmV3cml0dGVuIGFzIGEgc3RhbmRhbG9uZVxuICogZnVuY3Rpb24gKG5vdCBvbiBGdW5jdGlvbi5wcm90b3R5cGUpLiBOT1RFOiBJZiB0aGlzIGZpbGUgaXMgdG8gYmUgbG9hZGVkXG4gKiBkdXJpbmcgYm9vdHN0cmFwcGluZyB0aGlzIGZ1bmN0aW9uIG5lZWRzIHRvIGJlIHJld3JpdHRlbiB1c2luZyBzb21lIG5hdGl2ZVxuICogZnVuY3Rpb25zIGFzIHByb3RvdHlwZSBzZXR1cCB1c2luZyBub3JtYWwgSmF2YVNjcmlwdCBkb2VzIG5vdCB3b3JrIGFzXG4gKiBleHBlY3RlZCBkdXJpbmcgYm9vdHN0cmFwcGluZyAoc2VlIG1pcnJvci5qcyBpbiByMTE0OTAzKS5cbiAqXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBjdG9yIENvbnN0cnVjdG9yIGZ1bmN0aW9uIHdoaWNoIG5lZWRzIHRvIGluaGVyaXQgdGhlXG4gKiAgICAgcHJvdG90eXBlLlxuICogQHBhcmFtIHtmdW5jdGlvbn0gc3VwZXJDdG9yIENvbnN0cnVjdG9yIGZ1bmN0aW9uIHRvIGluaGVyaXQgcHJvdG90eXBlIGZyb20uXG4gKi9cbmV4cG9ydHMuaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpO1xuXG5leHBvcnRzLl9leHRlbmQgPSBmdW5jdGlvbihvcmlnaW4sIGFkZCkge1xuICAvLyBEb24ndCBkbyBhbnl0aGluZyBpZiBhZGQgaXNuJ3QgYW4gb2JqZWN0XG4gIGlmICghYWRkIHx8ICFpc09iamVjdChhZGQpKSByZXR1cm4gb3JpZ2luO1xuXG4gIHZhciBrZXlzID0gT2JqZWN0LmtleXMoYWRkKTtcbiAgdmFyIGkgPSBrZXlzLmxlbmd0aDtcbiAgd2hpbGUgKGktLSkge1xuICAgIG9yaWdpbltrZXlzW2ldXSA9IGFkZFtrZXlzW2ldXTtcbiAgfVxuICByZXR1cm4gb3JpZ2luO1xufTtcblxuZnVuY3Rpb24gaGFzT3duUHJvcGVydHkob2JqLCBwcm9wKSB7XG4gIHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKTtcbn1cbiIsIi8vIHNoaW0gZm9yIHVzaW5nIHByb2Nlc3MgaW4gYnJvd3NlclxudmFyIHByb2Nlc3MgPSBtb2R1bGUuZXhwb3J0cyA9IHt9O1xuXG4vLyBjYWNoZWQgZnJvbSB3aGF0ZXZlciBnbG9iYWwgaXMgcHJlc2VudCBzbyB0aGF0IHRlc3QgcnVubmVycyB0aGF0IHN0dWIgaXRcbi8vIGRvbid0IGJyZWFrIHRoaW5ncy4gIEJ1dCB3ZSBuZWVkIHRvIHdyYXAgaXQgaW4gYSB0cnkgY2F0Y2ggaW4gY2FzZSBpdCBpc1xuLy8gd3JhcHBlZCBpbiBzdHJpY3QgbW9kZSBjb2RlIHdoaWNoIGRvZXNuJ3QgZGVmaW5lIGFueSBnbG9iYWxzLiAgSXQncyBpbnNpZGUgYVxuLy8gZnVuY3Rpb24gYmVjYXVzZSB0cnkvY2F0Y2hlcyBkZW9wdGltaXplIGluIGNlcnRhaW4gZW5naW5lcy5cblxudmFyIGNhY2hlZFNldFRpbWVvdXQ7XG52YXIgY2FjaGVkQ2xlYXJUaW1lb3V0O1xuXG5mdW5jdGlvbiBkZWZhdWx0U2V0VGltb3V0KCkge1xuICAgIHRocm93IG5ldyBFcnJvcignc2V0VGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xufVxuZnVuY3Rpb24gZGVmYXVsdENsZWFyVGltZW91dCAoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdjbGVhclRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcbn1cbihmdW5jdGlvbiAoKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBzZXRUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBjbGVhclRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgfVxufSAoKSlcbmZ1bmN0aW9uIHJ1blRpbWVvdXQoZnVuKSB7XG4gICAgaWYgKGNhY2hlZFNldFRpbWVvdXQgPT09IHNldFRpbWVvdXQpIHtcbiAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfVxuICAgIC8vIGlmIHNldFRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG4gICAgaWYgKChjYWNoZWRTZXRUaW1lb3V0ID09PSBkZWZhdWx0U2V0VGltb3V0IHx8ICFjYWNoZWRTZXRUaW1lb3V0KSAmJiBzZXRUaW1lb3V0KSB7XG4gICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG4gICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfSBjYXRjaChlKXtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbChudWxsLCBmdW4sIDApO1xuICAgICAgICB9IGNhdGNoKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3JcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwodGhpcywgZnVuLCAwKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG59XG5mdW5jdGlvbiBydW5DbGVhclRpbWVvdXQobWFya2VyKSB7XG4gICAgaWYgKGNhY2hlZENsZWFyVGltZW91dCA9PT0gY2xlYXJUaW1lb3V0KSB7XG4gICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIC8vIGlmIGNsZWFyVGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcbiAgICBpZiAoKGNhY2hlZENsZWFyVGltZW91dCA9PT0gZGVmYXVsdENsZWFyVGltZW91dCB8fCAhY2FjaGVkQ2xlYXJUaW1lb3V0KSAmJiBjbGVhclRpbWVvdXQpIHtcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3NcbiAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0ICB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKG51bGwsIG1hcmtlcik7XG4gICAgICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3IuXG4gICAgICAgICAgICAvLyBTb21lIHZlcnNpb25zIG9mIEkuRS4gaGF2ZSBkaWZmZXJlbnQgcnVsZXMgZm9yIGNsZWFyVGltZW91dCB2cyBzZXRUaW1lb3V0XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwodGhpcywgbWFya2VyKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG5cbn1cbnZhciBxdWV1ZSA9IFtdO1xudmFyIGRyYWluaW5nID0gZmFsc2U7XG52YXIgY3VycmVudFF1ZXVlO1xudmFyIHF1ZXVlSW5kZXggPSAtMTtcblxuZnVuY3Rpb24gY2xlYW5VcE5leHRUaWNrKCkge1xuICAgIGlmICghZHJhaW5pbmcgfHwgIWN1cnJlbnRRdWV1ZSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgaWYgKGN1cnJlbnRRdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgcXVldWUgPSBjdXJyZW50UXVldWUuY29uY2F0KHF1ZXVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgfVxuICAgIGlmIChxdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgZHJhaW5RdWV1ZSgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZHJhaW5RdWV1ZSgpIHtcbiAgICBpZiAoZHJhaW5pbmcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgdGltZW91dCA9IHJ1blRpbWVvdXQoY2xlYW5VcE5leHRUaWNrKTtcbiAgICBkcmFpbmluZyA9IHRydWU7XG5cbiAgICB2YXIgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIHdoaWxlKGxlbikge1xuICAgICAgICBjdXJyZW50UXVldWUgPSBxdWV1ZTtcbiAgICAgICAgcXVldWUgPSBbXTtcbiAgICAgICAgd2hpbGUgKCsrcXVldWVJbmRleCA8IGxlbikge1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRRdWV1ZSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRRdWV1ZVtxdWV1ZUluZGV4XS5ydW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgICAgIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB9XG4gICAgY3VycmVudFF1ZXVlID0gbnVsbDtcbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIHJ1bkNsZWFyVGltZW91dCh0aW1lb3V0KTtcbn1cblxucHJvY2Vzcy5uZXh0VGljayA9IGZ1bmN0aW9uIChmdW4pIHtcbiAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBxdWV1ZS5wdXNoKG5ldyBJdGVtKGZ1biwgYXJncykpO1xuICAgIGlmIChxdWV1ZS5sZW5ndGggPT09IDEgJiYgIWRyYWluaW5nKSB7XG4gICAgICAgIHJ1blRpbWVvdXQoZHJhaW5RdWV1ZSk7XG4gICAgfVxufTtcblxuLy8gdjggbGlrZXMgcHJlZGljdGlibGUgb2JqZWN0c1xuZnVuY3Rpb24gSXRlbShmdW4sIGFycmF5KSB7XG4gICAgdGhpcy5mdW4gPSBmdW47XG4gICAgdGhpcy5hcnJheSA9IGFycmF5O1xufVxuSXRlbS5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuZnVuLmFwcGx5KG51bGwsIHRoaXMuYXJyYXkpO1xufTtcbnByb2Nlc3MudGl0bGUgPSAnYnJvd3Nlcic7XG5wcm9jZXNzLmJyb3dzZXIgPSB0cnVlO1xucHJvY2Vzcy5lbnYgPSB7fTtcbnByb2Nlc3MuYXJndiA9IFtdO1xucHJvY2Vzcy52ZXJzaW9uID0gJyc7IC8vIGVtcHR5IHN0cmluZyB0byBhdm9pZCByZWdleHAgaXNzdWVzXG5wcm9jZXNzLnZlcnNpb25zID0ge307XG5cbmZ1bmN0aW9uIG5vb3AoKSB7fVxuXG5wcm9jZXNzLm9uID0gbm9vcDtcbnByb2Nlc3MuYWRkTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5vbmNlID0gbm9vcDtcbnByb2Nlc3Mub2ZmID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBub29wO1xucHJvY2Vzcy5lbWl0ID0gbm9vcDtcbnByb2Nlc3MucHJlcGVuZExpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3MucHJlcGVuZE9uY2VMaXN0ZW5lciA9IG5vb3A7XG5cbnByb2Nlc3MubGlzdGVuZXJzID0gZnVuY3Rpb24gKG5hbWUpIHsgcmV0dXJuIFtdIH1cblxucHJvY2Vzcy5iaW5kaW5nID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuYmluZGluZyBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xuXG5wcm9jZXNzLmN3ZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICcvJyB9O1xucHJvY2Vzcy5jaGRpciA9IGZ1bmN0aW9uIChkaXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuY2hkaXIgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcbnByb2Nlc3MudW1hc2sgPSBmdW5jdGlvbigpIHsgcmV0dXJuIDA7IH07XG4iLCJpbXBvcnQgKiBhcyBhc3NlcnQgZnJvbSBcImFzc2VydFwiO1xuaW1wb3J0IHsgRG9zQ29tbWFuZEludGVyZmFjZSB9IGZyb20gXCIuLi9qcy1kb3MtdHMvanMtZG9zLWNpXCI7XG5pbXBvcnQgeyBkb1RoZW4gfSBmcm9tIFwiLi9kb1wiO1xuXG4vLyBDb21wYXJlXG4vLyA9PT09PT09XG4vLyBDb21wYXJlIGltYWdlIGZyb20gdXJsLCBhbmQgc2NyZWVuc2hvdCBmcm9tIERvc0JveFxuXG5leHBvcnQgZnVuY3Rpb24gY29tcGFyZUFuZEV4aXQoaW1hZ2VVcmw6IHN0cmluZywgY2k6IERvc0NvbW1hbmRJbnRlcmZhY2UsIGRvbmU6ICgpID0+IHZvaWQpIHtcbiAgICBjb21wYXJlKGltYWdlVXJsLCBjaSwgKHdyb25nKSA9PiB7XG4gICAgICAgIGFzc2VydC5lcXVhbCgwLCB3cm9uZyk7XG4gICAgICAgIGNpLmV4aXQoKTtcbiAgICAgICAgZG9uZSgpO1xuICAgIH0pO1xufVxuXG5jb25zdCBjb21wYXJlID0gKGltYWdlVXJsOiBzdHJpbmcsIGNpOiBEb3NDb21tYW5kSW50ZXJmYWNlLCBjYWxsYmFjazogKHdyb25nOiBudW1iZXIpID0+IHZvaWQpID0+IHtcbiAgICBkb1RoZW4oY2kuc2NyZWVuc2hvdCgpLCAoYWN0dWFsVXJsOiBzdHJpbmcpID0+IHtcbiAgICAgICAgY29uc3QgaW1nID0gbmV3IEltYWdlKCk7XG4gICAgICAgIGltZy5vbmxvYWQgPSAoKSA9PiB7XG4gICAgICAgICAgICBhc3NlcnQoaW1nLndpZHRoID09PSBjaS53aWR0aCgpLCBcIkludmFsaWQgd2lkdGg6IFwiICsgY2kud2lkdGgoKSArIFwiLCBzaG91bGQgYmUgXCIgKyBpbWcud2lkdGgpO1xuICAgICAgICAgICAgYXNzZXJ0KGltZy5oZWlnaHQgPT09IGNpLmhlaWdodCgpLCBcIkludmFsaWQgaGVpZ2h0OiBcIiArIGNpLmhlaWdodCgpICsgXCIsIHNob3VsZCBiZSBcIiArIGltZy5oZWlnaHQpO1xuXG4gICAgICAgICAgICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO1xuICAgICAgICAgICAgY2FudmFzLndpZHRoID0gaW1nLndpZHRoO1xuICAgICAgICAgICAgY2FudmFzLmhlaWdodCA9IGltZy5oZWlnaHQ7XG4gICAgICAgICAgICBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xuICAgICAgICAgICAgY3R4LmRyYXdJbWFnZShpbWcsIDAsIDApO1xuICAgICAgICAgICAgY29uc3QgZXhwZWN0ZWQgPSBjdHguZ2V0SW1hZ2VEYXRhKDAsIDAsIGltZy53aWR0aCwgaW1nLmhlaWdodCkuZGF0YTtcblxuICAgICAgICAgICAgY29uc3QgYWN0dWFsSW1hZ2UgPSBuZXcgSW1hZ2UoKTtcbiAgICAgICAgICAgIGFjdHVhbEltYWdlLm9ubG9hZCA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICAvKlxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoaW1nKTsgLy8gZm9yIGNvbXBhcmlzb25zXG4gICAgICAgICAgICAgICAgdmFyIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgICAgIGRpdi5pbm5lckhUTUwgPSAnXj1leHBlY3RlZCwgdj1hY3R1YWwnO1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZGl2KTtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGFjdHVhbEltYWdlKTsgLy8gdG8gZ3JhYiBpdCBmb3IgY3JlYXRpbmcgdGhlIHRlc3QgcmVmZXJlbmNlXG4gICAgICAgICAgICAgICAgKi9cblxuICAgICAgICAgICAgICAgIGNvbnN0IGFjdHVhbENhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIik7XG4gICAgICAgICAgICAgICAgYWN0dWFsQ2FudmFzLndpZHRoID0gYWN0dWFsSW1hZ2Uud2lkdGg7XG4gICAgICAgICAgICAgICAgYWN0dWFsQ2FudmFzLmhlaWdodCA9IGFjdHVhbEltYWdlLmhlaWdodDtcbiAgICAgICAgICAgICAgICBjb25zdCBhY3R1YWxDdHggPSBhY3R1YWxDYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xuICAgICAgICAgICAgICAgIGFjdHVhbEN0eC5kcmF3SW1hZ2UoYWN0dWFsSW1hZ2UsIDAsIDApO1xuICAgICAgICAgICAgICAgIGNvbnN0IGFjdHVhbCA9IGFjdHVhbEN0eC5nZXRJbWFnZURhdGEoMCwgMCwgYWN0dWFsSW1hZ2Uud2lkdGgsIGFjdHVhbEltYWdlLmhlaWdodCkuZGF0YTtcblxuICAgICAgICAgICAgICAgIGxldCB0b3RhbCA9IDA7XG4gICAgICAgICAgICAgICAgY29uc3Qgd2lkdGggPSBpbWcud2lkdGg7XG4gICAgICAgICAgICAgICAgY29uc3QgaGVpZ2h0ID0gaW1nLmhlaWdodDtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCB4ID0gMDsgeCA8IHdpZHRoOyB4KyspIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgeSA9IDA7IHkgPCBoZWlnaHQ7IHkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdG90YWwgKz0gTWF0aC5hYnMoZXhwZWN0ZWRbeSAqIHdpZHRoICogNCArIHggKiA0ICsgMF0gLSBhY3R1YWxbeSAqIHdpZHRoICogNCArIHggKiA0ICsgMF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdG90YWwgKz0gTWF0aC5hYnMoZXhwZWN0ZWRbeSAqIHdpZHRoICogNCArIHggKiA0ICsgMV0gLSBhY3R1YWxbeSAqIHdpZHRoICogNCArIHggKiA0ICsgMV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdG90YWwgKz0gTWF0aC5hYnMoZXhwZWN0ZWRbeSAqIHdpZHRoICogNCArIHggKiA0ICsgMl0gLSBhY3R1YWxbeSAqIHdpZHRoICogNCArIHggKiA0ICsgMl0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gZmxvb3IsIHRvIGFsbG93IHNvbWUgbWFyZ2luIG9mIGVycm9yIGZvciBhbnRpYWxpYXNpbmdcbiAgICAgICAgICAgICAgICBjb25zdCB3cm9uZyA9IE1hdGguZmxvb3IodG90YWwgLyAoaW1nLndpZHRoICogaW1nLmhlaWdodCAqIDMpKTtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayh3cm9uZyk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgYWN0dWFsSW1hZ2Uuc3JjID0gYWN0dWFsVXJsO1xuICAgICAgICB9O1xuICAgICAgICBpbWcuc3JjID0gaW1hZ2VVcmw7XG4gICAgfSk7XG59O1xuIiwiaW1wb3J0IGFzc2VydCA9IHJlcXVpcmUoXCJhc3NlcnRcIik7XG5pbXBvcnQgeyBEb3NNYWluRm4sIERvc1JlYWR5UHJvbWlzZSB9IGZyb20gXCIuLi9qcy1kb3MtdHMvanMtZG9zXCI7XG5pbXBvcnQgeyBEb3NGUyB9IGZyb20gXCIuLi9qcy1kb3MtdHMvanMtZG9zLWZzXCI7XG5cbi8vIERvXG4vLyA9PVxuLy8gV2UgdXNlIHRoaXMgZnVuY3Rpb25zIHRvIGF2b2lkIHByb2JsZW0gb2YgdGhyb3dpbmcsXG4vLyBleGNlcHRpb25zIGluc2lkZSBwcm9taXNlLlxuLy8gTW9jaGEgY2FuJ3QgaGFuZGxlIGV4Y2VwdGlvbnMgaWYgdGhleSBhcmUgdGhyb3dlZCBpbiBwcm9taXNlXG5cbmV4cG9ydCBmdW5jdGlvbiBkb1RoZW48VD4ocHJvbWlzZTogUHJvbWlzZTxUPiwgZm46ICh2OiBUKSA9PiB2b2lkKSB7XG4gICAgcHJvbWlzZS50aGVuKCh2OiBUKSA9PiB7XG4gICAgICAgIGNvbnN0IHRvcEZuID0gKCkgPT4ge1xuICAgICAgICAgICAgZm4odik7XG4gICAgICAgIH07XG5cbiAgICAgICAgc2V0VGltZW91dCh0b3BGbiwgMSk7XG4gICAgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkb0NhdGNoPFQ+KHByb21pc2U6IFByb21pc2U8VD4sIGZuOiAodjogc3RyaW5nKSA9PiB2b2lkKSB7XG4gICAgcHJvbWlzZS5jYXRjaCgodjogc3RyaW5nKSA9PiB7XG4gICAgICAgIGNvbnN0IHRvcEZuID0gKCkgPT4ge1xuICAgICAgICAgICAgZm4odik7XG4gICAgICAgIH07XG5cbiAgICAgICAgc2V0VGltZW91dCh0b3BGbiwgMSk7XG4gICAgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkb05leHQ8VD4ocHJvbWlzZTogUHJvbWlzZTxUPiwgZm46ICh2OiBUKSA9PiB2b2lkKSB7XG4gICAgZG9UaGVuKHByb21pc2UsIGZuKTtcbiAgICBkb0NhdGNoKHByb21pc2UsIChtc2c6IHN0cmluZykgPT4gYXNzZXJ0LmZhaWwobXNnKSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkb1JlYWR5KHByb21pc2U6IERvc1JlYWR5UHJvbWlzZSwgZm46IChmczogRG9zRlMsIG1haW46IERvc01haW5GbikgPT4gdm9pZCkge1xuICAgIGRvVGhlbihwcm9taXNlLCAocnVudGltZSkgPT4ge1xuICAgICAgICBmbihydW50aW1lLmZzLCBydW50aW1lLm1haW4pO1xuICAgIH0pO1xuICAgIGRvQ2F0Y2gocHJvbWlzZSwgKG1zZzogc3RyaW5nKSA9PiBhc3NlcnQuZmFpbChtc2cpKTtcbn1cbiIsIi8qIHRzbGludDpkaXNhYmxlOm1heC1saW5lLWxlbmd0aCAqL1xuLyogdHNsaW50OmRpc2FibGU6bm8tY29uc29sZSAqL1xuXG5pbXBvcnQgKiBhcyBhc3NlcnQgZnJvbSBcImFzc2VydFwiO1xuaW1wb3J0IERvcyBmcm9tIFwiLi4vanMtZG9zLXRzL2pzLWRvc1wiO1xuaW1wb3J0IHsgSUNhY2hlIH0gZnJvbSBcIi4uL2pzLWRvcy10cy9qcy1kb3MtY2FjaGVcIjtcbmltcG9ydCBDYWNoZURiIGZyb20gXCIuLi9qcy1kb3MtdHMvanMtZG9zLWNhY2hlLWRiXCI7XG5pbXBvcnQgQ2FjaGVOb29wIGZyb20gXCIuLi9qcy1kb3MtdHMvanMtZG9zLWNhY2hlLW5vb3BcIjtcbmltcG9ydCB7IERvc0NvbW1hbmRJbnRlcmZhY2UgfSBmcm9tIFwiLi4vanMtZG9zLXRzL2pzLWRvcy1jaVwiO1xuaW1wb3J0IHsgSG9zdCB9IGZyb20gXCIuLi9qcy1kb3MtdHMvanMtZG9zLWhvc3RcIjtcbmltcG9ydCB7IERvc01vZHVsZSB9IGZyb20gXCIuLi9qcy1kb3MtdHMvanMtZG9zLW1vZHVsZVwiO1xuaW1wb3J0IHsgRG9zT3B0aW9ucyB9IGZyb20gXCIuLi9qcy1kb3MtdHMvanMtZG9zLW9wdGlvbnNcIjtcbmltcG9ydCB7IGNvbXBhcmVBbmRFeGl0IH0gZnJvbSBcIi4vY29tcGFyZVwiO1xuaW1wb3J0IHsgZG9DYXRjaCwgZG9OZXh0LCBkb1JlYWR5LCBkb1RoZW4gfSBmcm9tIFwiLi9kb1wiO1xuXG5jb25zdCB3ZG9zYm94VXJsOiBzdHJpbmcgPSAod2luZG93IGFzIGFueSkud2Rvc2JveFVybDtcbnN1aXRlKFwianMtZG9zLWhvc3RcIik7XG5cbnRlc3QoXCJsb2FkZXIgc2hvdWxkIGZhbGxiYWNrIHRvIGpzIGlmIHdhc20gaXMgbm90IHN1cHBvcnRlZFwiLCAoZG9uZSkgPT4ge1xuICAgIGNvbnN0IG9sZFZhbHVlID0gSG9zdC53YXNtU3VwcG9ydGVkO1xuICAgIEhvc3Qud2FzbVN1cHBvcnRlZCA9IGZhbHNlO1xuICAgIEhvc3QucmVzb2x2ZURvc0JveChcIndyb25ndXJsLmpzXCIsIG5ldyBDYWNoZU5vb3AoKSwge1xuICAgICAgICBvbmVycm9yOiAobWVzc2FnZTogc3RyaW5nKSA9PiB7XG4gICAgICAgICAgICBIb3N0Lndhc21TdXBwb3J0ZWQgPSBvbGRWYWx1ZTtcbiAgICAgICAgICAgIGFzc2VydC5lcXVhbChcIkNhblxcJ3QgZG93bmxvYWQgbWVtIGZpbGUsIGNvZGU6IDQwNCwgbWVzc2FnZTogY29ubmVjdGlvbiBwcm9ibGVtLCB1cmw6IHJvbmd1cmwuanMubWVtXCIsIG1lc3NhZ2UpO1xuICAgICAgICAgICAgZG9uZSgpO1xuICAgICAgICB9LFxuICAgIH0gYXMgRG9zTW9kdWxlKTtcbn0pO1xuXG50ZXN0KFwibG9hZGVyIHNob3VsZCBub3RpZnkgYWJvdXQgZXJyb3IsIGlmIGl0IGNhbid0IGRvd25sb2FkIHdkb3Nib3hcIiwgKGRvbmUpID0+IHtcbiAgICBIb3N0LnJlc29sdmVEb3NCb3goXCJ3cm9uZ3VybC5qc1wiLCBuZXcgQ2FjaGVOb29wKCksIHtcbiAgICAgICAgb25lcnJvcjogKG1lc3NhZ2U6IHN0cmluZykgPT4ge1xuICAgICAgICAgICAgYXNzZXJ0LmVxdWFsKFwiQ2FuJ3QgZG93bmxvYWQgd2FzbSwgY29kZTogNDA0LCBtZXNzYWdlOiBjb25uZWN0aW9uIHByb2JsZW0sIHVybDogd3Jvbmd1cmwud2FzbS5qc1wiLCBtZXNzYWdlKTtcbiAgICAgICAgICAgIGRvbmUoKTtcbiAgICAgICAgfSxcbiAgICB9IGFzIERvc01vZHVsZSk7XG59KTtcblxudGVzdChcImxvYWRlciBzaG91bGQgc2hvdyBwcm9ncmVzcyBsb2FkaW5nIGFuZCB1c2UgY2FjaGVcIiwgKGRvbmUpID0+IHtcbiAgICBsZXQgaXNHRVQgPSBmYWxzZTtcbiAgICBsZXQgaXNQVVQgPSBmYWxzZTtcbiAgICBjbGFzcyBUZXN0Q2FjaGUgaW1wbGVtZW50cyBJQ2FjaGUge1xuICAgICAgICBwdWJsaWMgcHV0KGtleTogc3RyaW5nLCBkYXRhOiBhbnksIG9uZmx1c2g6ICgpID0+IHZvaWQpIHtcbiAgICAgICAgICAgIGlzUFVUID0gaXNQVVQgfHwgKGtleSA9PT0gd2Rvc2JveFVybC5yZXBsYWNlKFwiLmpzXCIsIFwiLndhc20uanNcIikgJiYgZGF0YSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyICYmIChkYXRhIGFzIEFycmF5QnVmZmVyKS5ieXRlTGVuZ3RoID4gMCk7XG4gICAgICAgICAgICBvbmZsdXNoKCk7XG4gICAgICAgIH1cblxuICAgICAgICBwdWJsaWMgZ2V0KGtleTogc3RyaW5nLCBvbmRhdGE6IChkYXRhOiBhbnkpID0+IHZvaWQsIG9uZXJyb3I6IChtc2c6IHN0cmluZykgPT4gdm9pZCkge1xuICAgICAgICAgICAgaXNHRVQgPSBpc0dFVCB8fCBrZXkgPT09IHdkb3Nib3hVcmwucmVwbGFjZShcIi5qc1wiLCBcIi53YXNtLmpzXCIpO1xuICAgICAgICAgICAgb25lcnJvcihcIm5vdCBpbiBjYWNoZVwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHB1YmxpYyBmb3JFYWNoKGVhY2g6IChrZXk6IHN0cmluZywgdmFsdWU6IGFueSkgPT4gdm9pZCwgb25lbmQ6ICgpID0+IHZvaWQpIHtcbiAgICAgICAgICAgIG9uZW5kKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBsZXQgbGFzdExvYWRlZCA9IC0xO1xuICAgIEhvc3QucmVzb2x2ZURvc0JveCh3ZG9zYm94VXJsLCBuZXcgVGVzdENhY2hlKCksIHtcbiAgICAgICAgb25wcm9ncmVzczogKHN0YWdlOiBzdHJpbmcsIHRvdGFsOiBudW1iZXIsIGxvYWRlZDogbnVtYmVyKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhzdGFnZSwgdG90YWwsIGxvYWRlZCk7XG4gICAgICAgICAgICBhc3NlcnQuZXF1YWwodHJ1ZSwgbG9hZGVkIDw9IHRvdGFsLCBcIm9ucHJnb3Jlc3M6IFwiICsgbG9hZGVkICsgXCI8PVwiICsgdG90YWwpO1xuICAgICAgICAgICAgYXNzZXJ0LmVxdWFsKHRydWUsIGxhc3RMb2FkZWQgPD0gbG9hZGVkLCBcImVuZHByb2dyZXNzOiBcIiArIGxhc3RMb2FkZWQgKyBcIjw9XCIgKyBsb2FkZWQpO1xuICAgICAgICAgICAgbGFzdExvYWRlZCA9IGxvYWRlZDtcbiAgICAgICAgfSxcbiAgICAgICAgb25kb3Nib3g6IChkb3Nib3g6IGFueSwgaW5zdGFudGlhdGVXYXNtOiBhbnkpID0+IHtcbiAgICAgICAgICAgIGFzc2VydC5vayhpc0dFVCk7XG4gICAgICAgICAgICBhc3NlcnQub2soaXNQVVQpO1xuICAgICAgICAgICAgZG9uZSgpO1xuICAgICAgICB9LFxuICAgICAgICBvbmVycm9yOiAobWVzc2FnZTogc3RyaW5nKSA9PiB7XG4gICAgICAgICAgICBhc3NlcnQuZmFpbCgpO1xuICAgICAgICB9LFxuICAgIH0gYXMgRG9zTW9kdWxlKTtcbn0pO1xuXG50ZXN0KFwibG9hZGVyIHNob3VsZCBuZXZlciBsb2FkIHR3aWNlIHdkb3Nib3hcIiwgKGRvbmUpID0+IHtcbiAgICBIb3N0LnJlc29sdmVEb3NCb3god2Rvc2JveFVybCwgbmV3IENhY2hlTm9vcCgpLCB7XG4gICAgICAgIG9ucHJvZ3Jlc3M6IChzdGFnZTogc3RyaW5nLCB0b3RhbDogbnVtYmVyLCBsb2FkZWQ6IG51bWJlcikgPT4ge1xuICAgICAgICAgICAgYXNzZXJ0LmZhaWwoKTtcbiAgICAgICAgfSxcbiAgICAgICAgb25kb3Nib3g6IChkb3Nib3g6IGFueSwgaW5zdGFudGlhdGVXYXNtOiBhbnkpID0+IHtcbiAgICAgICAgICAgIGRvbmUoKTtcbiAgICAgICAgfSxcbiAgICAgICAgb25lcnJvcjogKG1lc3NhZ2U6IHN0cmluZykgPT4ge1xuICAgICAgICAgICAgYXNzZXJ0LmZhaWwoKTtcbiAgICAgICAgfSxcbiAgICB9IGFzIERvc01vZHVsZSk7XG59KTtcblxudGVzdChcImxvYWRlciBzaG91bGQgZmlyZSBldmVudCB3aGVuIHdkb3Nib3ggaXMgbG9hZGVkXCIsIChkb25lKSA9PiB7XG4gICAgSG9zdC5yZXNvbHZlRG9zQm94KHdkb3Nib3hVcmwsIG5ldyBDYWNoZU5vb3AoKSwge1xuICAgICAgICBvbmRvc2JveDogKGRvc2JveDogYW55LCBpbnN0YW50aWF0ZVdhc206IGFueSkgPT4ge1xuICAgICAgICAgICAgYXNzZXJ0Lm9rKGRvc2JveCk7XG4gICAgICAgICAgICBkb25lKCk7XG4gICAgICAgIH0sXG4gICAgICAgIG9uZXJyb3I6IChtZXNzYWdlOiBzdHJpbmcpID0+IHtcbiAgICAgICAgICAgIGFzc2VydC5mYWlsKCk7XG4gICAgICAgIH0sXG4gICAgfSBhcyBEb3NNb2R1bGUpO1xufSk7XG5cbnN1aXRlKFwianMtZG9zXCIpO1xuXG50ZXN0KFwianMtZG9zIGNhbid0IHN0YXJ0IHdpdGhvdXQgY2FudmFzIChsaXN0ZW5lciBzdHlsZSlcIiwgKGRvbmUpID0+IHtcbiAgICBEb3MobnVsbCwge1xuICAgICAgICB3ZG9zYm94VXJsLFxuICAgICAgICBvbmVycm9yOiAobWVzc2FnZTogc3RyaW5nKSA9PiB7XG4gICAgICAgICAgICBhc3NlcnQuZXF1YWwoXCJjYW52YXMgZmllbGQgaXMgcmVxdWlyZWQsIGJ1dCBub3Qgc2V0IVwiLCBtZXNzYWdlKTtcbiAgICAgICAgICAgIGRvbmUoKTtcbiAgICAgICAgfSxcbiAgICB9IGFzIERvc09wdGlvbnMpO1xufSk7XG5cbnRlc3QoXCJqcy1kb3MgY2FuJ3Qgc3RhcnQgd2l0aG91dCBjYW52YXMgKHByb21pc2Ugc3R5bGUpXCIsIChkb25lKSA9PiB7XG4gICAgY29uc3QgZG9zID0gRG9zKG51bGwsIHtcbiAgICAgICAgd2Rvc2JveFVybCxcbiAgICB9IGFzIERvc09wdGlvbnMpO1xuICAgIGRvQ2F0Y2goZG9zLCAobWVzc2FnZSkgPT4ge1xuICAgICAgICBhc3NlcnQuZXF1YWwoXCJjYW52YXMgZmllbGQgaXMgcmVxdWlyZWQsIGJ1dCBub3Qgc2V0IVwiLCBtZXNzYWdlKTtcbiAgICAgICAgZG9uZSgpO1xuICAgIH0pO1xuICAgIGRvVGhlbihkb3MsICgpID0+IHtcbiAgICAgICAgYXNzZXJ0LmZhaWwoKTtcbiAgICB9KTtcbn0pO1xuXG50ZXN0KFwianMtZG9zIGNhbid0IHN0YXJ0IHdpdGhvdXQgY2FudmFzIChyZWFkeSBzdHlsZSlcIiwgKGRvbmUpID0+IHtcbiAgICBjb25zdCBkb3MgPSBEb3MobnVsbCwge1xuICAgICAgICB3ZG9zYm94VXJsLFxuICAgIH0gYXMgRG9zT3B0aW9ucyk7XG4gICAgY29uc3QgcHJvbWlzZSA9IGRvcy5yZWFkeSgoZnMsIG1haW4pID0+IHtcbiAgICAgICAgY29uc3QgZm4gPSAoKSA9PiBhc3NlcnQuZmFpbCgpO1xuICAgICAgICBzZXRUaW1lb3V0KGZuLCAxKTtcbiAgICB9KTtcbiAgICBkb0NhdGNoKHByb21pc2UsIChtZXNzYWdlKSA9PiB7XG4gICAgICAgIGFzc2VydC5lcXVhbChcImNhbnZhcyBmaWVsZCBpcyByZXF1aXJlZCwgYnV0IG5vdCBzZXQhXCIsIG1lc3NhZ2UpO1xuICAgICAgICBkb25lKCk7XG4gICAgfSk7XG59KTtcblxudGVzdChcImpzLWRvcyBzaG91bGQgc3RhcnQgd2l0aCBjYW52YXNcIiwgKGRvbmUpID0+IHtcbiAgICBjb25zdCBkb3MgPSBEb3MoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjYW52YXNcIikgYXMgSFRNTENhbnZhc0VsZW1lbnQsIHtcbiAgICAgICAgd2Rvc2JveFVybCxcbiAgICB9KTtcbiAgICBkb1JlYWR5KGRvcywgKGZzLCBtYWluKSA9PiB7XG4gICAgICAgIGRvTmV4dChtYWluKFtdKSwgKGNpKSA9PiB7XG4gICAgICAgICAgICBjaS5leGl0KCk7XG4gICAgICAgICAgICBkb25lKCk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufSk7XG5cbnRlc3QoXCJqcy1kb3MgY2FuIHRha2Ugc2NyZWVuc2hvdCBvZiBjYW52YXNcIiwgKGRvbmUpID0+IHtcbiAgICBjb25zdCBkb3MgPSBEb3MoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjYW52YXNcIikgYXMgSFRNTENhbnZhc0VsZW1lbnQsIHtcbiAgICAgICAgd2Rvc2JveFVybCxcbiAgICB9KTtcbiAgICBkb1JlYWR5KGRvcywgKGZzLCBtYWluKSA9PiB7XG4gICAgICAgIGRvTmV4dChtYWluKFtdKSwgKGNpKSA9PiB7XG4gICAgICAgICAgICBjb21wYXJlQW5kRXhpdChcImluaXQucG5nXCIsIGNpLCBkb25lKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG59KTtcblxuc3VpdGUoXCJqcy1kb3MtZnNcIik7XG5cbnRlc3QoXCJqcy1kb3MtZnMgY3JlYXRlRmlsZSBlcnJvciBoYW5kbGluZ1wiLCAoZG9uZSkgPT4ge1xuICAgIGNvbnN0IGRvcyA9IERvcyhkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNhbnZhc1wiKSBhcyBIVE1MQ2FudmFzRWxlbWVudCwge1xuICAgICAgICB3ZG9zYm94VXJsLFxuICAgICAgICBvbmVycm9yOiAobWVzc2FnZSkgPT4ge1xuICAgICAgICAgICAgYXNzZXJ0LmVxdWFsKG1lc3NhZ2UsIFwiQ2FuJ3QgY3JlYXRlIGZpbGUgJycsIGJlY2F1c2UgZmlsZSBuYW1lIGlzIGVtcHR5XCIpO1xuICAgICAgICAgICAgZG9uZSgpO1xuICAgICAgICB9LFxuICAgIH0pO1xuXG4gICAgZG9SZWFkeShkb3MsIChmcywgbWFpbikgPT4ge1xuICAgICAgICBmcy5jcmVhdGVGaWxlKFwiXCIsIFwiXCIpO1xuICAgIH0pO1xufSk7XG5cbnRlc3QoXCJqcy1kb3MtZnMgY3JlYXRlRmlsZSBlcnJvciBoYW5kbGluZyAyXCIsIChkb25lKSA9PiB7XG4gICAgY29uc3QgZG9zID0gRG9zKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2FudmFzXCIpIGFzIEhUTUxDYW52YXNFbGVtZW50LCB7XG4gICAgICAgIHdkb3Nib3hVcmwsXG4gICAgICAgIG9uZXJyb3I6IChtZXNzYWdlKSA9PiB7XG4gICAgICAgICAgICBhc3NlcnQuZXF1YWwobWVzc2FnZSwgXCJDYW4ndCBjcmVhdGUgZmlsZSAnL2hvbWUvJywgYmVjYXVzZSBmaWxlIG5hbWUgaXMgZW1wdHlcIik7XG4gICAgICAgICAgICBkb25lKCk7XG4gICAgICAgIH0sXG4gICAgfSk7XG5cbiAgICBkb1JlYWR5KGRvcywgKGZzLCBtYWluKSA9PiB7XG4gICAgICAgIGZzLmNyZWF0ZUZpbGUoXCIvaG9tZS9cIiwgXCJcIik7XG4gICAgfSk7XG59KTtcblxudGVzdChcImpzLWRvcy1mcyBjYW4gY3JlYXRlIGZpbGVcIiwgKGRvbmUpID0+IHtcbiAgICBjb25zdCBkb3MgPSBEb3MoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjYW52YXNcIikgYXMgSFRNTENhbnZhc0VsZW1lbnQsIHtcbiAgICAgICAgd2Rvc2JveFVybCxcbiAgICAgICAgb25lcnJvcjogKG1lc3NhZ2UpID0+IHtcbiAgICAgICAgICAgIGFzc2VydC5mYWlsKCk7XG4gICAgICAgIH0sXG4gICAgfSk7XG5cbiAgICBkb1JlYWR5KGRvcywgKGZzLCBtYWluKSA9PiB7XG4gICAgICAgIGZzLmNyZWF0ZUZpbGUoXCIvd2lraS9tdXNrXCIsIHdpa2lFbG9uTXVzayk7XG4gICAgICAgIGRvTmV4dChtYWluKCksIChjaSkgPT4ge1xuICAgICAgICAgICAgZG9OZXh0KGNpLnNoZWxsKFwidHlwZSB3aWtpXFxcXG11c2tcIiksICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb21wYXJlQW5kRXhpdChcImVsb25tdXNrLnBuZ1wiLCBjaSwgZG9uZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG59KTtcblxudGVzdChcImpzLWRvcy1mcyBjYW4gY3JlYXRlIGZpbGUgKHdpbmRvd3MgcGF0aClcIiwgKGRvbmUpID0+IHtcbiAgICBjb25zdCBkb3MgPSBEb3MoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjYW52YXNcIikgYXMgSFRNTENhbnZhc0VsZW1lbnQsIHtcbiAgICAgICAgd2Rvc2JveFVybCxcbiAgICAgICAgb25lcnJvcjogKG1lc3NhZ2UpID0+IHtcbiAgICAgICAgICAgIGFzc2VydC5mYWlsKCk7XG4gICAgICAgIH0sXG4gICAgfSk7XG5cbiAgICBkb1JlYWR5KGRvcywgKGZzLCBtYWluKSA9PiB7XG4gICAgICAgIGZzLmNyZWF0ZUZpbGUoXCJDOlxcXFx3aWtpXFxcXG11c2tcIiwgd2lraUVsb25NdXNrKTtcbiAgICAgICAgZG9OZXh0KG1haW4oKSwgKGNpKSA9PiB7XG4gICAgICAgICAgICBkb05leHQoY2kuc2hlbGwoXCJ0eXBlIHdpa2lcXFxcbXVza1wiKSwgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbXBhcmVBbmRFeGl0KFwiZWxvbm11c2sucG5nXCIsIGNpLCBkb25lKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9KTtcbn0pO1xuXG50ZXN0KFwianMtZG9zLWZzIGNsZWFyaW5nIElEQkZTIGRiXCIsIChkb25lKSA9PiB7XG4gICAgY29uc3QgcmVxdWVzdCA9IGluZGV4ZWREQi5kZWxldGVEYXRhYmFzZShcIi90ZXN0XCIpO1xuXG4gICAgcmVxdWVzdC5vbmVycm9yID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXZlbnQpO1xuICAgICAgICBhc3NlcnQuZmFpbCgpO1xuICAgIH07XG5cbiAgICByZXF1ZXN0Lm9uc3VjY2VzcyA9IChldmVudCkgPT4ge1xuICAgICAgICBkb25lKCk7XG4gICAgfTtcbn0pO1xuXG50ZXN0KFwianMtZG9zLWZzIGNhbiBtb3VudCBhcmNoaXZlIG9uIHBlcnNpc3RlbnQgcG9pbnQgW2VtcHR5IGRiXVwiLCAoZG9uZSkgPT4ge1xuICAgIGxldCBpc09uUHJvZ3Jlc3MgPSBmYWxzZTtcbiAgICBjb25zdCBkb3MgPSBEb3MoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjYW52YXNcIikgYXMgSFRNTENhbnZhc0VsZW1lbnQsIHtcbiAgICAgICAgd2Rvc2JveFVybCxcbiAgICAgICAgb25lcnJvcjogKG1lc3NhZ2UpID0+IHtcbiAgICAgICAgICAgIGFzc2VydC5mYWlsKCk7XG4gICAgICAgIH0sXG4gICAgICAgIG9ucHJvZ3Jlc3M6IChzdGFnZTogc3RyaW5nLCB0b3RhbDogbnVtYmVyLCBsb2FkZWQ6IG51bWJlcikgPT4ge1xuICAgICAgICAgICAgaXNPblByb2dyZXNzID0gdHJ1ZTtcbiAgICAgICAgfSxcbiAgICB9KTtcblxuICAgIGRvUmVhZHkoZG9zLCAoZnMsIG1haW4pID0+IHtcbiAgICAgICAgZG9OZXh0KGZzLmV4dHJhY3QoXCJkaWdnZXIuemlwXCIsIFwiL3Rlc3RcIiksICgpID0+IHtcbiAgICAgICAgICAgIGRvTmV4dChtYWluKCksIChjaSkgPT4ge1xuICAgICAgICAgICAgICAgIGRvTmV4dChjaS5zaGVsbChcImRpciB0ZXN0XCIpLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGFzc2VydC5vayhpc09uUHJvZ3Jlc3MpO1xuICAgICAgICAgICAgICAgICAgICBjb21wYXJlQW5kRXhpdChcInBlc2lzdGVudC1tb3VudC5wbmdcIiwgY2ksIGRvbmUpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufSk7XG5cbnRlc3QoXCJqcy1kb3MtZnMgY2FuIG1vdW50IGFyY2hpdmUgb24gcGVyc2lzdGVudCBwb2ludCBbZXhpc3RlbnQgZGJdXCIsIChkb25lKSA9PiB7XG4gICAgY29uc3QgZG9zID0gRG9zKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2FudmFzXCIpIGFzIEhUTUxDYW52YXNFbGVtZW50LCB7XG4gICAgICAgIHdkb3Nib3hVcmwsXG4gICAgICAgIG9uZXJyb3I6IChtZXNzYWdlKSA9PiB7XG4gICAgICAgICAgICBhc3NlcnQuZmFpbCgpO1xuICAgICAgICB9LFxuICAgICAgICBvbnByb2dyZXNzOiAoc3RhZ2U6IHN0cmluZywgdG90YWw6IG51bWJlciwgbG9hZGVkOiBudW1iZXIpID0+IHtcbiAgICAgICAgICAgIGFzc2VydC5mYWlsKCk7XG4gICAgICAgIH0sXG4gICAgfSk7XG5cbiAgICBkb1JlYWR5KGRvcywgKGZzLCBtYWluKSA9PiB7XG4gICAgICAgIGRvTmV4dChmcy5leHRyYWN0KFwiZGlnZ2VyLnppcFwiLCBcIi90ZXN0XCIpLCAoKSA9PiB7XG4gICAgICAgICAgICBkb05leHQobWFpbigpLCAoY2kpID0+IHtcbiAgICAgICAgICAgICAgICBkb05leHQoY2kuc2hlbGwoXCJkaXIgdGVzdFwiKSwgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb21wYXJlQW5kRXhpdChcInBlc2lzdGVudC1tb3VudC5wbmdcIiwgY2ksIGRvbmUpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufSk7XG5cbnN1aXRlKFwianMtZG9zXCIpO1xuXG50ZXN0KFwianMtZG9zIHNob3VsZCBwcm92aWRlIHVzZXIgbGV2ZWwgZG9zYm94LmNvbmZcIiwgKGRvbmUpID0+IHtcbiAgICBjb25zdCBkb3MgPSBEb3MoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjYW52YXNcIikgYXMgSFRNTENhbnZhc0VsZW1lbnQsIHtcbiAgICAgICAgd2Rvc2JveFVybCxcbiAgICAgICAgb25lcnJvcjogKG1lc3NhZ2UpID0+IHtcbiAgICAgICAgICAgIGFzc2VydC5mYWlsKCk7XG4gICAgICAgIH0sXG4gICAgfSk7XG5cbiAgICBkb1JlYWR5KGRvcywgKGZzLCBtYWluKSA9PiB7XG4gICAgICAgIGZzLmNyZWF0ZUZpbGUoXCJkb3Nib3guY29uZlwiLCBgXG4gICAgICAgIFthdXRvZXhlY11cbiAgICAgICAgbW91bnQgYyAuXG4gICAgICAgIGM6XG4gICAgICAgIGNkIEhPTUVcbiAgICAgICAgY2QgV0VCX1VTRVJcbiAgICAgICAgY2QgRE9TQk9YfjFcbiAgICAgICAgdHlwZSBkb3Nib3h+MS5jb25cbiAgICAgICAgYCk7XG5cbiAgICAgICAgZG9OZXh0KG1haW4oW1wiLWNvbmZcIiwgXCJkb3Nib3guY29uZlwiXSksIChjaSkgPT4ge1xuICAgICAgICAgICAgY29tcGFyZUFuZEV4aXQoXCJqc2Rvcy1jb25mLnBuZ1wiLCBjaSwgZG9uZSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufSk7XG5cbnRlc3QoXCJqcy1kb3MgY2FuIGNyZWF0ZSBhbmQgcmVhZCBkb3Nib3guY29uZlwiLCAoZG9uZSkgPT4ge1xuICAgIGNvbnN0IGRvcyA9IERvcyhkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNhbnZhc1wiKSBhcyBIVE1MQ2FudmFzRWxlbWVudCwge1xuICAgICAgICB3ZG9zYm94VXJsLFxuICAgICAgICBvbmVycm9yOiAobWVzc2FnZSkgPT4ge1xuICAgICAgICAgICAgYXNzZXJ0LmZhaWwoKTtcbiAgICAgICAgfSxcbiAgICB9KTtcblxuICAgIGRvUmVhZHkoZG9zLCAoZnMsIG1haW4pID0+IHtcbiAgICAgICAgZnMuY3JlYXRlRmlsZShcImRvc2JveC5jb25mXCIsIGBcbiAgICAgICAgICAgIFthdXRvZXhlY11cbiAgICAgICAgICAgIG1vdW50IGMgLlxuICAgICAgICAgICAgYzpcbiAgICAgICAgICAgIHR5cGUgZG9zYm94fjEuY29uXG4gICAgICAgIGApO1xuICAgICAgICBkb05leHQobWFpbihbXCItY29uZlwiLCBcImRvc2JveC5jb25mXCJdKSwgKGNpKSA9PiB7XG4gICAgICAgICAgICBjb21wYXJlQW5kRXhpdChcImRvc2JveGNvbmYucG5nXCIsIGNpLCBkb25lKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG59KTtcblxudGVzdChcImpzLWRvcyBjYW4gcnVuIGRpZ2dlci56aXBcIiwgKGRvbmUpID0+IHtcbiAgICBjb25zdCBkb3MgPSBEb3MoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjYW52YXNcIikgYXMgSFRNTENhbnZhc0VsZW1lbnQsIHtcbiAgICAgICAgd2Rvc2JveFVybCxcbiAgICB9KTtcblxuICAgIGRvUmVhZHkoZG9zLCAoZnMsIG1haW4pID0+IHtcbiAgICAgICAgZG9OZXh0KGZzLmV4dHJhY3QoXCJkaWdnZXIuemlwXCIpLCAoKSA9PiB7XG4gICAgICAgICAgICBkb05leHQobWFpbihbXCJESUdHRVIuQ09NXCJdKSwgKGNpKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgZm4gPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbXBhcmVBbmRFeGl0KFwiZGlnZ2VyLnBuZ1wiLCBjaSwgZG9uZSk7XG4gICAgICAgICAgICAgICAgICAgIC8vIHNhdmVJbWFnZShjaSk7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZm4sIDUwMDApO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufSk7XG5cbnRlc3QoXCJqcy1kb3MgY2FuIHNpbXVsYXRlIGtleSBldmVudHNcIiwgKGRvbmUpID0+IHtcbiAgICBjb25zdCBkb3MgPSBEb3MoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjYW52YXNcIikgYXMgSFRNTENhbnZhc0VsZW1lbnQsIHtcbiAgICAgICAgd2Rvc2JveFVybCxcbiAgICB9KTtcblxuICAgIGRvUmVhZHkoZG9zLCAoZnMsIG1haW4pID0+IHtcbiAgICAgICAgZG9OZXh0KGZzLmV4dHJhY3QoXCJkaWdnZXIuemlwXCIpLCAoKSA9PiB7XG4gICAgICAgICAgICBkb05leHQobWFpbihbXCJESUdHRVIuQ09NXCJdKSwgKGNpKSA9PiB7XG4gICAgICAgICAgICAgICAgY2kuc2ltdWxhdGVLZXlQcmVzcygzNyk7IC8vIGxlZnQgYXJyb3dcbiAgICAgICAgICAgICAgICBjb25zdCBmbiA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29tcGFyZUFuZEV4aXQoXCJkaWdnZXItZW5kLnBuZ1wiLCBjaSwgZG9uZSk7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZm4sIDUwMDApO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufSk7XG5cbmNvbnN0IHNhdmVJbWFnZSA9IChjaTogRG9zQ29tbWFuZEludGVyZmFjZSkgPT4ge1xuICAgIGNpLnNjcmVlbnNob3QoKS50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgIGNvbnN0IHcgPSB3aW5kb3cub3BlbihcImFib3V0OmJsYW5rXCIsIFwiaW1hZ2UgZnJvbSBjYW52YXNcIik7XG4gICAgICAgIHcuZG9jdW1lbnQud3JpdGUoXCI8aW1nIHNyYz0nXCIgKyBkYXRhICsgXCInIGFsdD0nZnJvbSBjYW52YXMnLz5cIik7XG4gICAgfSk7XG59O1xuXG5jb25zdCB3aWtpRWxvbk11c2sgPSBgXG5FbG9uIFJlZXZlIE11c2sgRlJTICgvy4hpy5BsyZJuLzsgYm9ybiBKdW5lIDI4LCAxOTcxKSBpcyBhXG50ZWNobm9sb2d5IGVudHJlcHJlbmV1ciBhbmQgZW5naW5lZXIuWzEwXVsxMV1bMTJdXG5IZSBob2xkcyBTb3V0aCBBZnJpY2FuLCBDYW5hZGlhbiwgYW5kIFUuUy4gY2l0aXplbnNoaXBcbmFuZCBpcyB0aGUgZm91bmRlciwgQ0VPLCBhbmQgbGVhZCBkZXNpZ25lciBvZiBTcGFjZVg7XG5bMTNdIGNvLWZvdW5kZXIsIENFTywgYW5kIHByb2R1Y3QgYXJjaGl0ZWN0IG9mIFRlc2xhLCBJbmMuO1xuWzE0XSBjby1mb3VuZGVyIGFuZCBDRU8gb2YgTmV1cmFsaW5rOyBhbmQgY28tZm91bmRlciBvZiBQYXlQYWwuXG5JbiBEZWNlbWJlciAyMDE2LCBoZSB3YXMgcmFua2VkIDIxc3Qgb24gdGhlIEZvcmJlcyBsaXN0IG9mXG5UaGUgV29ybGQncyBNb3N0IFBvd2VyZnVsIFBlb3BsZS5bMTVdIEFzIG9mIE9jdG9iZXIgMjAxOCxcbmhlIGhhcyBhIG5ldCB3b3J0aCBvZiAkMjIuOCBiaWxsaW9uIGFuZCBpcyBsaXN0ZWQgYnkgRm9yYmVzXG5hcyB0aGUgNTR0aC1yaWNoZXN0IHBlcnNvbiBpbiB0aGUgd29ybGQuWzE2XVxuQm9ybiBhbmQgcmFpc2VkIGluIFByZXRvcmlhLCBTb3V0aCBBZnJpY2EsIE11c2sgbW92ZWQgdG9cbkNhbmFkYSB3aGVuIGhlIHdhcyAxNyB0byBhdHRlbmQgUXVlZW4ncyBVbml2ZXJzaXR5LlxuSGUgdHJhbnNmZXJyZWQgdG8gdGhlIFVuaXZlcnNpdHkgb2YgUGVubnN5bHZhbmlhIHR3byB5ZWFyc1xubGF0ZXIsIHdoZXJlIGhlIHJlY2VpdmVkIGFuIGVjb25vbWljcyBkZWdyZWUgZnJvbVxudGhlIFdoYXJ0b24gU2Nob29sIGFuZCBhIGRlZ3JlZSBpbiBwaHlzaWNzIGZyb20gdGhlIENvbGxlZ2Vcbm9mIEFydHMgYW5kIFNjaWVuY2VzLiBIZSBiZWdhbiBhIFBoLkQuXG5pbiBhcHBsaWVkIHBoeXNpY3MgYW5kIG1hdGVyaWFsIHNjaWVuY2VzIGF0IFN0YW5mb3JkIFVuaXZlcnNpdHlcbmluIDE5OTUgYnV0IGRyb3BwZWQgb3V0IGFmdGVyIHR3byBkYXlzIHRvIHB1cnN1ZVxuYW4gZW50cmVwcmVuZXVyaWFsIGNhcmVlci4gSGUgc3Vic2VxdWVudGx5IGNvLWZvdW5kZWQgWmlwMiwgYVxud2ViIHNvZnR3YXJlIGNvbXBhbnksIHdoaWNoIHdhcyBhY3F1aXJlZCBieSBDb21wYXFcbmZvciAkMzQwIG1pbGxpb24gaW4gMTk5OS4gTXVzayB0aGVuIGZvdW5kZWQgWC5jb20sIGFuIG9ubGluZSBiYW5rLlxuSXQgbWVyZ2VkIHdpdGggQ29uZmluaXR5IGluIDIwMDAgYW5kIGxhdGVyIHRoYXRcbnllYXIgYmVjYW1lIFBheVBhbCwgd2hpY2ggd2FzIGJvdWdodCBieSBlQmF5IGZvciAkMS41IGJpbGxpb25cbmluIE9jdG9iZXIgMjAwMi5bMTddWzE4XVsxOV1bMjBdXG5gO1xuIl19"}