<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
        <title>Digger Example</title>
        <script src="/v7/build/releases/latest/emulators/emulators.js"></script>
        <script src="/v7/build/releases/latest/emulators-ui/emulators-ui.js"></script>
        <link rel="stylesheet" href="/v7/build/releases/latest/emulators-ui/emulators-ui.css">
        <link rel="stylesheet" href="examples.css">
    </head>

    <body>
        <div id="root" style="width: 100%; height: 100%;"></div>
        <script>
         emulators.pathPrefix = "/v7/build/releases/latest/emulators/";

         async function start() {
             const layers = emulatorsUi.dom.layers(document.getElementById("root"), { scale: 0.7 });
             layers.showLoadingLayer();

             const bundleUrl = "https://doszone-uploads.s3.dualstack.eu-central-1.amazonaws.com/original/2X/9/9ed7eb9c2c441f56656692ed4dc7ab28f58503ce.jsdos";
             const bundle = await emulatorsUi.network.resolveBundle(bundleUrl);

             const ci = await emulators.dosWorker(bundle);

             const buttons = [];
             const addButtonsGroup = (buttons, prop1, prop2, index) => {
                 for (let i = 0; i < 4; ++i) {
                     const button = {
                         action: "click",
                         mapTo: 88 /*KBD_x*/,
                         symbol: (index + i) + "",
                         position: {},
                     };

                     button.position[prop1] = Math.floor(i / 2) + 1;
                     button.position[prop2] = i % 2 + 1;

                     buttons.push(button);
                 }
             };

             addButtonsGroup(buttons, "left", "bottom", 1);
             addButtonsGroup(buttons, "right", "bottom", 5);
             addButtonsGroup(buttons, "left", "top", 9);
             addButtonsGroup(buttons, "right", "top", 13);

             emulatorsUi.controls.button(layers, ci, buttons);
             layers.hideLoadingLayer();
         };

         start();
        </script>
    </body>
</html>
