<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="built-on" content="2024-08-05T17:16:27.8813973"><title>Deployment | js-dos</title><script type="application/json" id="virtual-toc-data">[{"id":"new-deployment","level":0,"title":"New deployment","anchor":"#new-deployment"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b408/app.css" rel="stylesheet"><link rel="icon" type="image/png" sizes="16x16" href="images/logo-16.png"><link rel="icon" type="image/png" sizes="32x32" href="images/logo-32.png"><link rel="icon" type="image/png" sizes="96x96" href="images/logo-192.png"><link rel="icon" type="image/png" sizes="300x300" href="images/logo-512.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Deployment | js-dos"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="js-dos Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="https://js-dos.com//8.xx/deployment.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Deployment | js-dos"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "https://js-dos.com//8.xx/deployment.html#webpage",
    "url": "https://js-dos.com//8.xx/deployment.html",
    "name": "Deployment | js-dos",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "https://js-dos.com/#website",
    "url": "https://js-dos.com/",
    "name": "js-dos Help"
}</script><!-- End Schema.org --></head><body data-id="Deployment" data-main-title="Deployment" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="cloud-overview.md|js-dos cloud///sockdrive.md|FAT Drives (sockdrive)"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>js-dos 8.xx Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Deployment" id="Deployment.md">Deployment</h1><p id="u44ajg_3">Currently, sockdrive reporistory has only one active deployment, is <code class="code" id="u44ajg_6">sockdrive.js-dos.com:8001</code>. Geographically it is located in Europe, because of that speed can vary between regions.</p><p id="u44ajg_4">We are looking forward to maintainers from other regions. If you want to create a sockdrive mirror, please let me know.</p><section class="chapter"><h2 id="new-deployment" data-toc="new-deployment">New deployment</h2><p id="u44ajg_7">You are also able to create your own sockdrive server with own drives, and run it locally or globally.</p><p id="u44ajg_8">sockdrive server should work fine on any linux distribution like Ubuntu. Download the <a href="https://cdn.dos.zone/custom/tools/sockdrive-backend-11.07.2024.zip" id="u44ajg_27" data-external="true" rel="noopener noreferrer"><span class="control" id="u44ajg_28">server</span></a> and unpack it somewhere.</p><p id="u44ajg_9">Folder structure:</p><div class="code-block" data-lang="none">
- backend         // sockdrive server executable
- cli             // sockdrive cli interface
- config/         // configuration directory
  - props.json    // configuration file
  - drives/       // drive storage  
  - templates/    // drive templates
</div><p id="u44ajg_11">included templates:</p><ul class="list _bullet" id="u44ajg_12"><li class="list__item" id="u44ajg_29"><p><span class="control" id="u44ajg_31">fat16-256m</span> &mdash; empty 256Mb drive formatted in fat16</p></li><li class="list__item" id="u44ajg_30"><p><span class="control" id="u44ajg_32">fat32-2gb</span> &mdash; empty 2Gb drive formatted in fat32</p></li></ul><p id="u44ajg_13">included drives (<code class="code" id="u44ajg_33">./cli list system</code>):</p><div class="table-wrapper"><table class="wide" id="u44ajg_14"><thead><tr class="ijRowHead" id="u44ajg_34"><th id="u44ajg_42"><p>owner</p></th><th id="u44ajg_43"><p>name</p></th><th id="u44ajg_44"><p>description</p></th></tr></thead><tbody><tr id="u44ajg_35"><td id="u44ajg_45"><p>system</p></td><td id="u44ajg_46"><p>fat16-256m</p></td><td id="u44ajg_47"><p>Blank drive based on corresponding template</p></td></tr><tr id="u44ajg_36"><td id="u44ajg_48"><p>system</p></td><td id="u44ajg_49"><p>fat32-2gb</p></td><td id="u44ajg_50"><p>Blank drive based on corresponding template</p></td></tr><tr id="u44ajg_37"><td id="u44ajg_51"><p>system</p></td><td id="u44ajg_52"><p>test</p></td><td id="u44ajg_53"><p>Test drive used in backend unit tests</p></td></tr><tr id="u44ajg_38"><td id="u44ajg_54"><p>system</p></td><td id="u44ajg_55"><p>dos7.1-v1</p></td><td id="u44ajg_56"><p>DOS 7.1 with CDROM support</p></td></tr><tr id="u44ajg_39"><td id="u44ajg_57"><p>system</p></td><td id="u44ajg_58"><p>win95-v1</p></td><td id="u44ajg_59"><p>Minimal (256Mb) Windows 95 installation</p></td></tr><tr id="u44ajg_40"><td id="u44ajg_60"><p>system</p></td><td id="u44ajg_61"><p>win95-v2</p></td><td id="u44ajg_62"><p>Windows 95 (2Gb) with daemon tools</p></td></tr><tr id="u44ajg_41"><td id="u44ajg_63"><p>system</p></td><td id="u44ajg_64"><p>win98-v1</p></td><td id="u44ajg_65"><p>Windows 98 (2Gb) with daemon tools</p></td></tr></tbody></table></div><p id="u44ajg_15">configuration file properties (<code class="code" id="u44ajg_66">config/props.json</code>):</p><div class="table-wrapper"><table class="wide" id="u44ajg_16"><thead><tr class="ijRowHead" id="u44ajg_67"><th id="u44ajg_74"><p>property</p></th><th id="u44ajg_75"><p>description</p></th><th id="u44ajg_76"><p>default value</p></th></tr></thead><tbody><tr id="u44ajg_68"><td id="u44ajg_77"><p>cert</p></td><td id="u44ajg_78"><p>path to ssl certificate file for wss:// support</p></td><td id="u44ajg_79"><p>js-dos.com certificate</p></td></tr><tr id="u44ajg_69"><td id="u44ajg_80"><p>key</p></td><td id="u44ajg_81"><p>path to ssl certificate key file for wss:// support</p></td><td id="u44ajg_82"><p>js-dos.com certificate</p></td></tr><tr id="u44ajg_70"><td id="u44ajg_83"><p>port</p></td><td id="u44ajg_84"><p>server port to use</p></td><td id="u44ajg_85"><p>8001</p></td></tr><tr id="u44ajg_71"><td id="u44ajg_86"><p>templates</p></td><td id="u44ajg_87"><p>path to folder with templates</p></td><td id="u44ajg_88"><p>./config/templates</p></td></tr><tr id="u44ajg_72"><td id="u44ajg_89"><p>drivers</p></td><td id="u44ajg_90"><p>path to folder with drives</p></td><td id="u44ajg_91"><p>./config/drives</p></td></tr><tr id="u44ajg_73"><td id="u44ajg_92"><p>premium</p></td><td id="u44ajg_93"><p>list of emails that have full access to sockdrive even if this emails does not have js-dos subscription</p></td><td id="u44ajg_94"><p>dos.zone, caiiiycuk@gmail.com</p></td></tr></tbody></table></div><aside class="prompt" data-type="tip" data-title="" id="u44ajg_17"><p id="u44ajg_95">you can leave cert and key empty string, then server will work in ws:// mode</p></aside><p id="u44ajg_18">To start the server run backend executable:</p><div class="code-block" data-lang="none">
./backend
</div><p id="u44ajg_20">At the beginning server will print configuration used and information about port used, like this:</p><div class="code-block" data-lang="none">
2024-06-28T03:26:21.456339Z  INFO backend: started non-secured server on 0.0.0.0:8001
</div><p id="u44ajg_22">Now you can use it with js-dos player, just add your server as sockdrive endpoint:</p><div class="code-block" data-lang="javascript">
Dos(document.getElementById(&quot;dos&quot;), {
    sockdriveBackend: {
        name: &quot;custom&quot;,
        host: &quot;localhost:8001&quot;,
    },
});
</div><aside class="prompt" data-type="warning" data-title="" id="u44ajg_24"><p id="u44ajg_96">Users that have js-dos subscription will be able to write and create new drives on your server, moreover, users that listed in config will also be able to write and create drives even without subscription. Be careful sockdrive server can consume a lot of disk space.</p></aside><section class="chapter"><h3 id="open-file-limits" data-toc="open-file-limits">Open file limits</h3><p id="u44ajg_97">You should increase the limit of open files, edit <code class="code" id="u44ajg_100">/etc/security/limits.conf</code> add the following lines:</p><div class="code-block" data-lang="none">
* soft nofile 1000000
* hard nofile 1000000
</div><p id="u44ajg_99">And restart PC.</p></section><section class="chapter"><h3 id="cli-commands" data-toc="cli-commands">Cli commands</h3><div class="table-wrapper"><table class="wide" id="u44ajg_101"><thead><tr class="ijRowHead" id="u44ajg_103"><th id="u44ajg_115"><p>Command</p></th><th id="u44ajg_116"><p>Description</p></th></tr></thead><tbody><tr id="u44ajg_104"><td id="u44ajg_117"><p><span class="control" id="u44ajg_119">create</span> (owner) (name) (template)</p></td><td id="u44ajg_118"><p>Creates new drive owner/name from template</p></td></tr><tr id="u44ajg_105"><td id="u44ajg_120"><p><code class="code" id="u44ajg_122">./cli create me empty fat16-256m</code></p></td><td id="u44ajg_121"><p>Will create me/empty drive based on fat16-256m template</p></td></tr><tr id="u44ajg_106"><td id="u44ajg_123"></td><td id="u44ajg_124"></td></tr><tr id="u44ajg_107"><td id="u44ajg_125"><p><span class="control" id="u44ajg_127">fork</span> (owner) (name) (fork_owner) (fork_name)</p></td><td id="u44ajg_126"><p>Create new drive from existent one</p></td></tr><tr id="u44ajg_108"><td id="u44ajg_128"><p><code class="code" id="u44ajg_130">./cli fork system win95-v1 me mywin</code></p></td><td id="u44ajg_129"><p>Will create me/mywin from system/win95-v1</p></td></tr><tr id="u44ajg_109"><td id="u44ajg_131"></td><td id="u44ajg_132"></td></tr><tr id="u44ajg_110"><td id="u44ajg_133"><p><span class="control" id="u44ajg_135">list</span> (owner)</p></td><td id="u44ajg_134"><p>List all drives of owner + system drives</p></td></tr><tr id="u44ajg_111"><td id="u44ajg_136"><p><code class="code" id="u44ajg_138">./cli list me</code></p></td><td id="u44ajg_137"><p>Will list all drives of me</p></td></tr><tr id="u44ajg_112"><td id="u44ajg_139"></td><td id="u44ajg_140"></td></tr><tr id="u44ajg_113"><td id="u44ajg_141"><p><span class="control" id="u44ajg_143">delete</span> (owner) (name)</p></td><td id="u44ajg_142"><p>Delete specified drive</p></td></tr><tr id="u44ajg_114"><td id="u44ajg_144"><p><code class="code" id="u44ajg_146">./cli delete me mywin</code></p></td><td id="u44ajg_145"><p>Will delete drive my/mywin</p></td></tr></tbody></table></div><aside class="prompt" data-type="warning" data-title="" id="u44ajg_102"><p id="u44ajg_147">be careful with delete command <span class="control" id="u44ajg_148">dependent drives will stop working</span> correctly</p></aside></section></section><div class="last-modified">Last modified: 05 августа 2024</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="fork-drive.html" class="navigation-links__prev">Fork (Clone) Drive</a><a href="system-images.html" class="navigation-links__next">System images</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b408/app.js"></script></body></html>