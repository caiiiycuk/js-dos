<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>js-dos 8.xx</title>
  <style>
    html,
    body {
      width: 100%;
      height: 100%;
    }
  </style>
</head>

<body>
  <div id="app"></div>
  <script type="module" src="/src/main.tsx">
  </script>
  <script>
    const params = new URLSearchParams(location.search);
    document.addEventListener("DOMContentLoaded", () => {
      /* eslint-disable max-len */
      /* eslint-enable max-len */
      const props = Dos(document.getElementById("app"),
        {
          // url: decodeURIComponent("https%3A%2F%2Fcdn.dos.zone%2Fcustom%2Fdos%2Fdoom_dm.jsdos"),
          // url: decodeURIComponent("https%3A%2F%2Fcdn.dos.zone%2Fcustom%2Fdos%2Fhomm2_netbios.jsdos"),
          // url: "https://cdn.dos.zone/original/2X/2/24b00b14f118580763440ecaddcc948f8cb94f14.jsdos", // digger
          // url: "https://cdn.dos.zone/custom/dos/doom.jsdos",
          // url: "https://cdn.dos.zone/custom/dos/duke3d_ipx.jsdos",
          // url: "https://br.cdn.dos.zone/ipx/duke3d/duke3d_ipx.jsdos",
          // url: "https://br.cdn.dos.zone/ipx/doom_dm/doom_dm.jsdos",
          // url: "https://cdn.dos.zone/original/2X/b/b4b5275904d86a4ab8a20917b2b7e34f0df47bf7.jsdos", // dhry2
          // url: "https://cdn.dos.zone/original/2X/7/744842062905f72648a4d492ccc2526d039b3702.jsdos", // sim-city
          // dosboxConf: diabloConf,
          pathPrefix: "/emulators/",
          server: params.get("server"),
          room: params.get("room"),
          //backendHardware: (backend) => {
          //  console.log("Hardware backend for", backend);
          //  return Promise.resolve("ws://127.0.0.1:8080");
          //},
          onEvent: (event) => {
            console.log("Event", event)
            if (event === "ci-ready") {
              // props.setFrame("network");
              // props.setFullScreen(true);
            }
          },
        });
    });

    const diabloConf = `
[sdl]
autolock=false
mouse_emulation=integration

[dosbox]
title=Windows 95
memsize=128

[video]
vmemsize=8
vesa modelist width limit=0
vesa modelist height limit=0

[dos]
ver=7.1
hard drive data rate limit=0
floppy drive data rate limit=0

[cpu]
cputype=pentium_mmx
core=auto 
integration device=true

[sblaster]
sbtype=sb16vibra

[fdc, primary]
int13fakev86io=true

[ide, primary]
int13fakeio=true
int13fakev86io=true

[ide, secondary]
int13fakeio=true
int13fakev86io=true
cd-rom insertion delay=4000

[render]
scaler=none

[autoexec]
echo off
imgmount 2 sockdrive wss://backend.make-vm.com:8001 dos.zone diablo_109_c
imgmount 3 sockdrive wss://backend.make-vm.com:8001 dos.zone diablo_109_d
boot c:
`;
  </script>
</body>

</html>